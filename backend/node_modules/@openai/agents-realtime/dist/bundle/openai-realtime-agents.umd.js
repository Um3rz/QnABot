(function(N,B){typeof exports=="object"&&typeof module<"u"?B(exports):typeof define=="function"&&define.amd?define(["exports"],B):(N=typeof globalThis<"u"?globalThis:N||self,B(N.OpenAIAgentsRealtime={}))})(this,function(N){"use strict";var Sc=Object.defineProperty;var ya=N=>{throw TypeError(N)};var Tc=(N,B,Y)=>B in N?Sc(N,B,{enumerable:!0,configurable:!0,writable:!0,value:Y}):N[B]=Y;var _=(N,B,Y)=>Tc(N,typeof B!="symbol"?B+"":B,Y),Er=(N,B,Y)=>B.has(N)||ya("Cannot "+Y);var u=(N,B,Y)=>(Er(N,B,"read from private field"),Y?Y.call(N):B.get(N)),S=(N,B,Y)=>B.has(N)?ya("Cannot add the same private member more than once"):B instanceof WeakSet?B.add(N):B.set(N,Y),v=(N,B,Y,At)=>(Er(N,B,"write to private field"),At?At.call(N,Y):B.set(N,Y),Y),Z=(N,B,Y)=>(Er(N,B,"access private method"),Y);var gt,Jt,_t,Bt,Gt,yt,te,Re,Le,Ue,Vt,de,Or,wa,It,me,zt,qt,Wt,Ht,rt,Je,Be,st,Yt,vt,De,oe,Ge,Fn,ba,le,Xt,wt,ye,Ve,Qt,Kt,en,tn,bt,ne,Nr,Rr,Dr,xa,Pr,at,nn,pe,rn,q,sn,it,an,ot,xt,K,on,Pe,ut,ct,Ln,Sa,L,P,un,D,St,Tt,cn,H,dn,kt,W,Un,Jn,Ta,Bn,ka,jr,Ia;const B={version:"0.0.4"};function Y(n){const e=atob(n),t=e.length,r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e.charCodeAt(s);return r.buffer}function At(n){const e=String.fromCharCode(...new Uint8Array(n));return btoa(e)}function Zr(n){if(typeof n>"u"||n===null||typeof n!="object"||!("type"in n)||typeof n.type!="string"||!n.type||n.type!=="message"||!("content"in n)||!Array.isArray(n.content)||n.content.length<1)return;const e=n.content[n.content.length-1];if(!(!("type"in e)||typeof e.type!="string")){if(e.type==="text")return typeof e.text=="string"?e.text:void 0;if(e.type==="audio")return typeof e.transcript=="string"?e.transcript:void 0}}function Aa(n,e){const t=n.filter(a=>!e.some(i=>i.itemId===a.itemId)),r=e.filter(a=>!n.some(i=>i.itemId===a.itemId)),s=e.filter(a=>n.some(i=>i.itemId===a.itemId&&JSON.stringify(i)!==JSON.stringify(a)));return{removals:t,additions:r,updates:s}}function Ca(){return typeof window>"u"?!1:typeof window.RTCPeerConnection<"u"}function Mr(n){return n.role==="system"?n:n.role==="assistant"?{...n,content:n.content.map(e=>e.type==="audio"?{...e,audio:null}:e)}:n.role==="user"?{...n,content:n.content.map(e=>e.type==="input_audio"?{...e,audio:null}:e)}:n}function Ea(n,e,t){const r=!t&&e.type==="message"?Mr(e):e,s=n.findIndex(a=>a.itemId===e.itemId);if(s!==-1)return n.map((a,i)=>i===s?r:!t&&a.type==="message"?Mr(a):a);if(e.previousItemId){const a=n.findIndex(i=>i.itemId===e.previousItemId);return a!==-1?[...n.slice(0,a+1),r,...n.slice(a+1)]:[...n,r]}else return[...n,r]}const Oa={"User-Agent":`Agents/JavaScript ${B.version}`,"X-OpenAI-Agents-SDK":`openai-agents-sdk.${B.version}`},Na=`openai-agents-sdk.${B.version}`;async function Gn(n){try{return[null,await n()]}catch(e){return[e,null]}}function Ra(n,e){const t={...n};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}const Da=Symbol("Let zodToJsonSchema decide on which parser to use"),$r={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Pa=n=>typeof n=="string"?{...$r,basePath:["#"],definitions:{},name:n}:{...$r,basePath:["#"],definitions:{},...n},Vn=n=>"_def"in n?n._def:n;function ja(n){if(!n)return!0;for(const e in n)return!1;return!0}const Za=n=>{const e=Pa(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[Vn(s),{def:Vn(s),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function Fr(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function V(n,e,t,r,s){n[e]=t,Fr(n,e,r,s)}var Ct;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},n.getValidEnumValues=s=>{const a=n.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return n.objectValues(i)},n.objectValues=s=>n.objectKeys(s).map(function(a){return s[a]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},n.find=(s,a)=>{for(const i of s)if(a(i))return i},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}n.joinValues=r,n.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Ct||(Ct={}));var Lr;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Lr||(Lr={})),Ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);let Ur=class va extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let o=r,d=0;for(;d<i.path.length;){const p=i.path[d];d===i.path.length-1?(o[p]=o[p]||{_errors:[]},o[p]._errors.push(t(i))):o[p]=o[p]||{_errors:[]},o=o[p],d++}}};return s(this),r}static assert(e){if(!(e instanceof va))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};Ur.create=n=>new Ur(n);var Jr;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Jr||(Jr={}));var O;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(O||(O={}));function Ma(){return{}}function $a(n,e){var r,s;const t={type:"array"};return((s=(r=n.type)==null?void 0:r._def)==null?void 0:s.typeName)!==O.ZodAny&&(t.items=F(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&V(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&V(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(V(t,"minItems",n.exactLength.value,n.exactLength.message,e),V(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function Fa(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?V(t,"minimum",r.value,r.message,e):V(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?V(t,"maximum",r.value,r.message,e):V(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",r.value,r.message,e));break;case"multipleOf":V(t,"multipleOf",r.value,r.message,e);break}return t}function La(){return{type:"boolean"}}function Ua(n,e){return F(n.type._def,e)}const Ja=(n,e)=>F(n.innerType._def,e);function Br(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,a)=>Br(n,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Ba(n,e)}}const Ba=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":V(t,"minimum",r.value,r.message,e);break;case"max":V(t,"maximum",r.value,r.message,e);break}return t};function Ga(n,e){return{...F(n.innerType._def,e),default:n.defaultValue()}}function Va(n,e,t){return e.effectStrategy==="input"?F(n.schema._def,e,t):{}}function za(n){return{type:"string",enum:[...n.values]}}const qa=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function Wa(n,e){const t=[F(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),F(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return t.forEach(a=>{if(qa(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let i=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...d}=a;i=d}else r=void 0;s.push(i)}}),s.length?{allOf:s,...r}:void 0}function Ha(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let zn;const ze={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(zn===void 0&&(zn=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),zn),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function Gr(n,e){const t={type:"string"};function r(s){return e.patternStrategy==="escape"?Ya(s):s}if(n.checks)for(const s of n.checks)switch(s.kind){case"min":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ge(t,"email",s.message,e);break;case"format:idn-email":ge(t,"idn-email",s.message,e);break;case"pattern:zod":_e(t,ze.email,s.message,e);break}break;case"url":ge(t,"uri",s.message,e);break;case"uuid":ge(t,"uuid",s.message,e);break;case"regex":_e(t,s.regex,s.message,e);break;case"cuid":_e(t,ze.cuid,s.message,e);break;case"cuid2":_e(t,ze.cuid2,s.message,e);break;case"startsWith":_e(t,RegExp(`^${r(s.value)}`),s.message,e);break;case"endsWith":_e(t,RegExp(`${r(s.value)}$`),s.message,e);break;case"datetime":ge(t,"date-time",s.message,e);break;case"date":ge(t,"date",s.message,e);break;case"time":ge(t,"time",s.message,e);break;case"duration":ge(t,"duration",s.message,e);break;case"length":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{_e(t,RegExp(r(s.value)),s.message,e);break}case"ip":{s.version!=="v6"&&ge(t,"ipv4",s.message,e),s.version!=="v4"&&ge(t,"ipv6",s.message,e);break}case"emoji":_e(t,ze.emoji,s.message,e);break;case"ulid":{_e(t,ze.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ge(t,"binary",s.message,e);break}case"contentEncoding:base64":{V(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{_e(t,ze.base64,s.message,e);break}}break}case"nanoid":_e(t,ze.nanoid,s.message,e)}return t}const Ya=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),ge=(n,e,t,r)=>{var s;n.format||(s=n.anyOf)!=null&&s.some(a=>a.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):V(n,"format",e,t,r)},_e=(n,e,t,r)=>{var s;n.pattern||(s=n.allOf)!=null&&s.some(a=>a.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:Vr(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):V(n,"pattern",Vr(e,r),t,r)},Vr=(n,e)=>{var p;const t=typeof n=="function"?n():n;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},s=r.i?t.source.toLowerCase():t.source;let a="",i=!1,o=!1,d=!1;for(let l=0;l<s.length;l++){if(i){a+=s[l],i=!1;continue}if(r.i){if(o){if(s[l].match(/[a-z]/)){d?(a+=s[l],a+=`${s[l-2]}-${s[l]}`.toUpperCase(),d=!1):s[l+1]==="-"&&((p=s[l+2])!=null&&p.match(/[a-z]/))?(a+=s[l],d=!0):a+=`${s[l]}${s[l].toUpperCase()}`;continue}}else if(s[l].match(/[a-z]/)){a+=`[${s[l]}${s[l].toUpperCase()}]`;continue}}if(r.m){if(s[l]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(s[l]==="$"){a+=`($|(?=[\r
]))`;continue}}if(r.s&&s[l]==="."){a+=o?`${s[l]}\r
`:`[${s[l]}\r
]`;continue}a+=s[l],s[l]==="\\"?i=!0:o&&s[l]==="]"?o=!1:!o&&s[l]==="["&&(o=!0)}try{const l=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return a};function zr(n,e){var r,s,a,i;if(e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===O.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((o,d)=>({...o,[d]:F(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",d]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:F(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((s=n.keyType)==null?void 0:s._def.typeName)===O.ZodString&&((a=n.keyType._def.checks)!=null&&a.length)){const o=Object.entries(Gr(n.keyType._def,e)).reduce((d,[p,l])=>p==="type"?d:{...d,[p]:l},{});return{...t,propertyNames:o}}else if(((i=n.keyType)==null?void 0:i._def.typeName)===O.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};return t}function Xa(n,e){if(e.mapStrategy==="record")return zr(n,e);const t=F(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=F(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function Qa(n){const e=n.values,r=Object.keys(n.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),s=Array.from(new Set(r.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function Ka(){return{not:{}}}function ei(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const ln={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function ti(n,e){if(e.target==="openApi3")return qr(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in ln&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((s,a)=>{const i=ln[a._def.typeName];return i&&!s.includes(i)?[...s,i]:s},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((s,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...s,i];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===t.length){const s=r.filter((a,i,o)=>o.indexOf(a)===i);return{type:s.length>1?s:s[0],enum:t.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,s)=>[...r,...s._def.values.filter(a=>!r.includes(a))],[])};return qr(n,e)}const qr=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,s)=>F(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function ni(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:ln[n.innerType._def.typeName],nullable:!0}:{type:[ln[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=F(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=F(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function ri(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",Fr(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?V(t,"minimum",r.value,r.message,e):V(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?V(t,"maximum",r.value,r.message,e):V(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",r.value,r.message,e));break;case"multipleOf":V(t,"multipleOf",r.value,r.message,e);break}return t}function si(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":F(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":F(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function ai(n,e){const t={type:"object",...Object.entries(n.shape()).reduce((r,[s,a])=>{var d;if(a===void 0||a._def===void 0)return r;const i=[...e.currentPath,"properties",s],o=F(a._def,{...e,currentPath:i,propertyPath:i});if(o===void 0)return r;if(e.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&typeof((d=a._def)==null?void 0:d.defaultValue)>"u")throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[s]:o},required:a.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,s]}},{properties:{},required:[]}),additionalProperties:si(n,e)};return t.required.length||delete t.required,t}const ii=(n,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return F(n.innerType._def,e);const t=F(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},oi=(n,e)=>{if(e.pipeStrategy==="input")return F(n.in._def,e);if(e.pipeStrategy==="output")return F(n.out._def,e);const t=F(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=F(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(s=>s!==void 0)}};function ui(n,e){return F(n.type._def,e)}function ci(n,e){const r={type:"array",uniqueItems:!0,items:F(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&V(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&V(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function di(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>F(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:F(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>F(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function li(){return{not:{}}}function pi(){return{}}const fi=(n,e)=>F(n.innerType._def,e);function F(n,e,t=!1){var i;const r=e.seen.get(n);if(e.override){const o=(i=e.override)==null?void 0:i.call(e,n,e,r,t);if(o!==Da)return o}if(r&&!t){const o=hi(r,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const s={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,s);const a=gi(n,n.typeName,e,t);return a&&_i(n,e,a),s.jsonSchema=a,a}const hi=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":const t=n.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=n.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:mi(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,s)=>e.currentPath[s]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},mi=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},gi=(n,e,t,r)=>{switch(e){case O.ZodString:return Gr(n,t);case O.ZodNumber:return ri(n,t);case O.ZodObject:return ai(n,t);case O.ZodBigInt:return Fa(n,t);case O.ZodBoolean:return La();case O.ZodDate:return Br(n,t);case O.ZodUndefined:return li();case O.ZodNull:return ei(t);case O.ZodArray:return $a(n,t);case O.ZodUnion:case O.ZodDiscriminatedUnion:return ti(n,t);case O.ZodIntersection:return Wa(n,t);case O.ZodTuple:return di(n,t);case O.ZodRecord:return zr(n,t);case O.ZodLiteral:return Ha(n,t);case O.ZodEnum:return za(n);case O.ZodNativeEnum:return Qa(n);case O.ZodNullable:return ni(n,t);case O.ZodOptional:return ii(n,t);case O.ZodMap:return Xa(n,t);case O.ZodSet:return ci(n,t);case O.ZodLazy:return F(n.getter()._def,t);case O.ZodPromise:return ui(n,t);case O.ZodNaN:case O.ZodNever:return Ka();case O.ZodEffects:return Va(n,t,r);case O.ZodAny:return Ma();case O.ZodUnknown:return pi();case O.ZodDefault:return Ga(n,t);case O.ZodBranded:return Ua(n,t);case O.ZodReadonly:return fi(n,t);case O.ZodCatch:return Ja(n,t);case O.ZodPipeline:return oi(n,t);case O.ZodFunction:case O.ZodVoid:case O.ZodSymbol:return;default:return(s=>{})()}},_i=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),yi=(n,e)=>{const t=Za(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=F(n._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(s.title=a);const i=(()=>{if(ja(t.definitions))return;const d={},p=new Set;for(let l=0;l<500;l++){const h=Object.entries(t.definitions).filter(([f])=>!p.has(f));if(h.length===0)break;for(const[f,b]of h)d[f]=F(Vn(b),{...t,currentPath:[...t.basePath,t.definitionPath,f]},!0)??{},p.add(f)}return d})(),o=r===void 0?i?{...s,[t.definitionPath]:i}:s:t.nameStrategy==="duplicate-ref"?{...s,...i||t.seenRefs.size?{[t.definitionPath]:{...i,...t.seenRefs.size?{[r]:s}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...i,[r]:s}};return t.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function vi(n,{parser:e,callback:t}){const r={...n};return Object.defineProperties(r,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:t,enumerable:!1}}),r}function Wr(n,e){return yi(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function wi(n,e,t){return Ra({type:"json_schema",...t,name:e,strict:!0,schema:Wr(n,{name:e})},r=>n.parse(JSON.parse(r)))}function bi(n){return vi({type:"function",name:n.name,parameters:Wr(n.parameters,{name:n.name}),strict:!0},{callback:n.function,parser:e=>n.parameters.parse(JSON.parse(e))})}class Ze extends Error{constructor(t,r){super(t);_(this,"state");this.state=r}}class xi extends Ze{}class Hr extends Ze{}class fe extends Ze{}class Q extends Ze{}class Yr extends Ze{constructor(t,r,s){super(t,s);_(this,"error");this.error=r}}class Si extends Ze{constructor(t,r,s){super(t,s);_(this,"error");this.error=r}}class Xr extends Ze{constructor(t,r,s){super(t,s);_(this,"result");this.result=r}}class pn extends Ze{constructor(t,r,s){super(t,s);_(this,"result");this.result=r}}function qe(n){return typeof n=="object"&&n!==null&&"_def"in n&&typeof n._def=="object"&&n._def!==null&&"typeName"in n._def&&n._def.typeName==="ZodObject"}function Ti(n){return typeof n=="object"&&n!==null&&"input"in n&&typeof n.input=="string"}function fn(n){if(n=n.replace(/\s/g,"_"),n=n.replace(/[^a-zA-Z0-9]/g,"_"),n.length===0)throw new Error("Tool name cannot be empty");return n}function qn(n,e){const t=r=>JSON.parse(r);if(qe(n)){const r=bi({name:e,parameters:n,function:()=>{}});return{schema:r.parameters,parser:r.$parseRaw}}else if(typeof n=="object"&&n!==null)return{schema:n,parser:t};throw new Q("Input type is not a ZodObject or a valid JSON schema")}function Qr(n){if(n==="text")return"text";if(qe(n)){const e=wi(n,"output");return{type:e.type,name:e.name,strict:e.strict||!1,schema:e.schema}}return n}function ki(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hn={exports:{}},Wn,Kr;function Ii(){if(Kr)return Wn;Kr=1;var n=1e3,e=n*60,t=e*60,r=t*24,s=r*7,a=r*365.25;Wn=function(l,h){h=h||{};var f=typeof l;if(f==="string"&&l.length>0)return i(l);if(f==="number"&&isFinite(l))return h.long?d(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function i(l){if(l=String(l),!(l.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(h){var f=parseFloat(h[1]),b=(h[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*s;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*t;case"minutes":case"minute":case"mins":case"min":case"m":return f*e;case"seconds":case"second":case"secs":case"sec":case"s":return f*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function o(l){var h=Math.abs(l);return h>=r?Math.round(l/r)+"d":h>=t?Math.round(l/t)+"h":h>=e?Math.round(l/e)+"m":h>=n?Math.round(l/n)+"s":l+"ms"}function d(l){var h=Math.abs(l);return h>=r?p(l,h,r,"day"):h>=t?p(l,h,t,"hour"):h>=e?p(l,h,e,"minute"):h>=n?p(l,h,n,"second"):l+" ms"}function p(l,h,f,b){var A=h>=f*1.5;return Math.round(l/f)+" "+b+(A?"s":"")}return Wn}var Hn,es;function Ai(){if(es)return Hn;es=1;function n(e){r.debug=r,r.default=r,r.coerce=p,r.disable=o,r.enable=a,r.enabled=d,r.humanize=Ii(),r.destroy=l,Object.keys(e).forEach(h=>{r[h]=e[h]}),r.names=[],r.skips=[],r.formatters={};function t(h){let f=0;for(let b=0;b<h.length;b++)f=(f<<5)-f+h.charCodeAt(b),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(h){let f,b=null,A,z;function $(...J){if(!$.enabled)return;const re=$,ue=Number(new Date),je=ue-(f||ue);re.diff=je,re.prev=f,re.curr=ue,f=ue,J[0]=r.coerce(J[0]),typeof J[0]!="string"&&J.unshift("%O");let ke=0;J[0]=J[0].replace(/%([a-zA-Z%])/g,(Cr,bc)=>{if(Cr==="%%")return"%";ke++;const _a=r.formatters[bc];if(typeof _a=="function"){const xc=J[ke];Cr=_a.call(re,xc),J.splice(ke,1),ke--}return Cr}),r.formatArgs.call(re,J),(re.log||r.log).apply(re,J)}return $.namespace=h,$.useColors=r.useColors(),$.color=r.selectColor(h),$.extend=s,$.destroy=r.destroy,Object.defineProperty($,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(A!==r.namespaces&&(A=r.namespaces,z=r.enabled(h)),z),set:J=>{b=J}}),typeof r.init=="function"&&r.init($),$}function s(h,f){const b=r(this.namespace+(typeof f>"u"?":":f)+h);return b.log=this.log,b}function a(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];const f=(typeof h=="string"?h:"").trim().replace(" ",",").split(",").filter(Boolean);for(const b of f)b[0]==="-"?r.skips.push(b.slice(1)):r.names.push(b)}function i(h,f){let b=0,A=0,z=-1,$=0;for(;b<h.length;)if(A<f.length&&(f[A]===h[b]||f[A]==="*"))f[A]==="*"?(z=A,$=b,A++):(b++,A++);else if(z!==-1)A=z+1,$++,b=$;else return!1;for(;A<f.length&&f[A]==="*";)A++;return A===f.length}function o(){const h=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),h}function d(h){for(const f of r.skips)if(i(h,f))return!1;for(const f of r.names)if(i(h,f))return!0;return!1}function p(h){return h instanceof Error?h.stack||h.message:h}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Hn=n,Hn}var ts;function Ci(){return ts||(ts=1,function(n,e){e.formatArgs=r,e.save=s,e.load=a,e.useColors=t,e.storage=i(),e.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;d.splice(1,0,p,"color: inherit");let l=0,h=0;d[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(l++,f==="%c"&&(h=l))}),d.splice(h,0,p)}e.log=console.debug||console.log||(()=>{});function s(d){try{d?e.storage.setItem("debug",d):e.storage.removeItem("debug")}catch{}}function a(){let d;try{d=e.storage.getItem("debug")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=process.env.DEBUG),d}function i(){try{return localStorage}catch{}}n.exports=Ai()(e);const{formatters:o}=n.exports;o.j=function(d){try{return JSON.stringify(d)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}(hn,hn.exports)),hn.exports}var Ei=Ci();const Oi=ki(Ei);function ns(){return po()}function Yn(n){const e=ns();return typeof e<"u"&&(e[n]==="true"||e[n]==="1")}const rs={get disabled(){return Yn("OPENAI_AGENTS_DISABLE_TRACING")}},ss={get dontLogModelData(){return Yn("OPENAI_AGENTS_DONT_LOG_MODEL_DATA")},get dontLogToolData(){return Yn("OPENAI_AGENTS_DONT_LOG_TOOL_DATA")}},Ni=ss.dontLogModelData,Ri=ss.dontLogToolData;function as(n="openai-agents"){return{namespace:n,debug:Oi(n),error:console.error,warn:console.warn,dontLogModelData:Ni,dontLogToolData:Ri}}const I=as("openai-agents:core");function We(n){if(n==null)return String(n);if(typeof n=="string")return n;if(typeof n=="object")try{return JSON.stringify(n)}catch{return"[object with circular references]"}return String(n)}function Di(n,e){return`An error occurred while running the tool. Please try again. Error: ${e instanceof Error?e.toString():String(e)}`}function mn(n){const e=n.name?fn(n.name):fn(n.execute.name),t=typeof n.errorFunction>"u"?Di:n.errorFunction;if(!e)throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");const r=n.strict??!0;if(!r&&qe(n.parameters))throw new Q("Strict mode is required for Zod parameters");const{parser:s,schema:a}=qn(n.parameters,e);async function i(p,l){const[h,f]=await Gn(()=>s(l));if(h!==null)throw I.dontLogToolData?I.debug(`Invalid JSON input for tool ${e}`):I.debug(`Invalid JSON input for tool ${e}: ${l}`),new fe("Invalid JSON input for tool");I.dontLogToolData?I.debug(`Invoking tool ${e}`):I.debug(`Invoking tool ${e} with input ${l}`);const b=await n.execute(f,p),A=We(b);return I.dontLogToolData?I.debug(`Tool ${e} completed`):I.debug(`Tool ${e} returned: ${A}`),b}async function o(p,l){return i(p,l).catch(h=>{if(t){const f=Pt();return f==null||f.setError({message:"Error running tool (non-fatal)",data:{tool_name:e,error:h.toString()}}),t(p,h)}throw h})}const d=typeof n.needsApproval=="function"?n.needsApproval:async()=>typeof n.needsApproval=="boolean"?n.needsApproval:!1;return{type:"function",name:e,description:n.description,parameters:a,strict:r,invoke:o,needsApproval:d}}var M;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},n.getValidEnumValues=s=>{const a=n.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return n.objectValues(i)},n.objectValues=s=>n.objectKeys(s).map(function(a){return s[a]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},n.find=(s,a)=>{for(const i of s)if(a(i))return i},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}n.joinValues=r,n.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(M||(M={}));var is;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(is||(is={}));const x=M.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Me=n=>{switch(typeof n){case"undefined":return x.undefined;case"string":return x.string;case"number":return Number.isNaN(n)?x.nan:x.number;case"boolean":return x.boolean;case"function":return x.function;case"bigint":return x.bigint;case"symbol":return x.symbol;case"object":return Array.isArray(n)?x.array:n===null?x.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?x.promise:typeof Map<"u"&&n instanceof Map?x.map:typeof Set<"u"&&n instanceof Set?x.set:typeof Date<"u"&&n instanceof Date?x.date:x.object;default:return x.unknown}},y=M.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ie extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let o=r,d=0;for(;d<i.path.length;){const p=i.path[d];d===i.path.length-1?(o[p]=o[p]||{_errors:[]},o[p]._errors.push(t(i))):o[p]=o[p]||{_errors:[]},o=o[p],d++}}};return s(this),r}static assert(e){if(!(e instanceof Ie))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,M.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ie.create=n=>new Ie(n);const Xn=(n,e)=>{let t;switch(n.code){case y.invalid_type:n.received===x.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case y.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,M.jsonStringifyReplacer)}`;break;case y.unrecognized_keys:t=`Unrecognized key(s) in object: ${M.joinValues(n.keys,", ")}`;break;case y.invalid_union:t="Invalid input";break;case y.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${M.joinValues(n.options)}`;break;case y.invalid_enum_value:t=`Invalid enum value. Expected ${M.joinValues(n.options)}, received '${n.received}'`;break;case y.invalid_arguments:t="Invalid function arguments";break;case y.invalid_return_type:t="Invalid function return type";break;case y.invalid_date:t="Invalid date";break;case y.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:M.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case y.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case y.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case y.custom:t="Invalid input";break;case y.invalid_intersection_types:t="Intersection results could not be merged";break;case y.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case y.not_finite:t="Number must be finite";break;default:t=e.defaultError,M.assertNever(n)}return{message:t}};let Pi=Xn;function ji(){return Pi}const Zi=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,a=[...t,...s.path||[]],i={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let o="";const d=r.filter(p=>!!p).slice().reverse();for(const p of d)o=p(i,{data:e,defaultError:o}).message;return{...s,path:a,message:o}};function w(n,e){const t=ji(),r=Zi({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Xn?void 0:Xn].filter(s=>!!s)});n.common.issues.push(r)}class se{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return C;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const a=await s.key,i=await s.value;r.push({key:a,value:i})}return se.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return C;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(r[a.value]=i.value)}return{status:e.value,value:r}}}const C=Object.freeze({status:"aborted"}),Et=n=>({status:"dirty",value:n}),he=n=>({status:"valid",value:n}),os=n=>n.status==="aborted",us=n=>n.status==="dirty",dt=n=>n.status==="valid",gn=n=>typeof Promise<"u"&&n instanceof Promise;var T;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(T||(T={}));class ve{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cs=(n,e)=>{if(dt(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ie(n.common.issues);return this._error=t,this._error}}};function R(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,o)=>{const{message:d}=n;return i.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:d??r??o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:d??t??o.defaultError}},description:s}}class j{get description(){return this._def.description}_getType(e){return Me(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Me(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new se,ctx:{common:e.parent.common,data:e.data,parsedType:Me(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(gn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Me(e)},s=this._parseSync({data:e,path:r.path,parent:r});return cs(r,s)}"~validate"(e){var r,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Me(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return dt(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>dt(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Me(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(gn(s)?s:Promise.resolve(s));return cs(r,a)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,a)=>{const i=e(s),o=()=>a.addIssue({code:y.custom,...r(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(d=>d?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new Xe({schema:this,typeName:E.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ee.create(this,this._def)}nullable(){return Qe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return we.create(this)}promise(){return Sn.create(this,this._def)}or(e){return yn.create([this,e],this._def)}and(e){return vn.create(this,e,this._def)}transform(e){return new Xe({...R(this._def),schema:this,typeName:E.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Tn({...R(this._def),innerType:this,defaultValue:t,typeName:E.ZodDefault})}brand(){return new ys({typeName:E.ZodBranded,type:this,...R(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new kn({...R(this._def),innerType:this,catchValue:t,typeName:E.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ir.create(this,e)}readonly(){return In.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Mi=/^c[^\s-]{8,}$/i,$i=/^[0-9a-z]+$/,Fi=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Li=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ui=/^[a-z0-9_-]{21}$/i,Ji=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Bi=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Gi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Vi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Qn;const zi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Wi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Hi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Yi=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xi=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ds="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qi=new RegExp(`^${ds}$`);function ls(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Ki(n){return new RegExp(`^${ls(n)}$`)}function eo(n){let e=`${ds}T${ls(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function to(n,e){return!!((e==="v4"||!e)&&zi.test(n)||(e==="v6"||!e)&&Wi.test(n))}function no(n,e){if(!Ji.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function ro(n,e){return!!((e==="v4"||!e)&&qi.test(n)||(e==="v6"||!e)&&Hi.test(n))}class Ae extends j{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==x.string){const a=this._getOrReturnCtx(e);return w(a,{code:y.invalid_type,expected:x.string,received:a.parsedType}),C}const r=new se;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),w(s,{code:y.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),w(s,{code:y.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(s=this._getOrReturnCtx(e,s),i?w(s,{code:y.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&w(s,{code:y.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Gi.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"email",code:y.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Qn||(Qn=new RegExp(Vi,"u")),Qn.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"emoji",code:y.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Li.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"uuid",code:y.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Ui.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"nanoid",code:y.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Mi.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"cuid",code:y.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")$i.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"cuid2",code:y.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Fi.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"ulid",code:y.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),w(s,{validation:"url",code:y.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"regex",code:y.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),w(s,{code:y.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),w(s,{code:y.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),w(s,{code:y.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?eo(a).test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{code:y.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Qi.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{code:y.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Ki(a).test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{code:y.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Bi.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"duration",code:y.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?to(e.data,a.version)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"ip",code:y.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?no(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"jwt",code:y.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?ro(e.data,a.version)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"cidr",code:y.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Yi.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"base64",code:y.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?Xi.test(e.data)||(s=this._getOrReturnCtx(e,s),w(s,{validation:"base64url",code:y.invalid_string,message:a.message}),r.dirty()):M.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:y.invalid_string,...T.errToObj(r)})}_addCheck(e){return new Ae({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...T.errToObj(e)})}url(e){return this._addCheck({kind:"url",...T.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...T.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...T.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...T.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...T.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...T.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...T.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...T.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...T.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...T.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...T.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...T.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...T.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...T.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...T.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...T.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...T.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...T.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...T.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...T.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...T.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...T.errToObj(t)})}nonempty(e){return this.min(1,T.errToObj(e))}trim(){return new Ae({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ae({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ae({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ae.create=n=>new Ae({checks:[],typeName:E.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...R(n)});function so(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,a=Number.parseInt(n.toFixed(s).replace(".","")),i=Number.parseInt(e.toFixed(s).replace(".",""));return a%i/10**s}class lt extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==x.number){const a=this._getOrReturnCtx(e);return w(a,{code:y.invalid_type,expected:x.number,received:a.parsedType}),C}let r;const s=new se;for(const a of this._def.checks)a.kind==="int"?M.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),w(r,{code:y.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),w(r,{code:y.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),w(r,{code:y.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?so(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),w(r,{code:y.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),w(r,{code:y.not_finite,message:a.message}),s.dirty()):M.assertNever(a);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,T.toString(t))}gt(e,t){return this.setLimit("min",e,!1,T.toString(t))}lte(e,t){return this.setLimit("max",e,!0,T.toString(t))}lt(e,t){return this.setLimit("max",e,!1,T.toString(t))}setLimit(e,t,r,s){return new lt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:T.toString(s)}]})}_addCheck(e){return new lt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:T.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:T.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:T.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:T.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:T.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:T.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:T.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:T.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:T.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&M.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}lt.create=n=>new lt({checks:[],typeName:E.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...R(n)});class Ot extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==x.bigint)return this._getInvalidInput(e);let r;const s=new se;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),w(r,{code:y.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),w(r,{code:y.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),w(r,{code:y.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):M.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return w(t,{code:y.invalid_type,expected:x.bigint,received:t.parsedType}),C}gte(e,t){return this.setLimit("min",e,!0,T.toString(t))}gt(e,t){return this.setLimit("min",e,!1,T.toString(t))}lte(e,t){return this.setLimit("max",e,!0,T.toString(t))}lt(e,t){return this.setLimit("max",e,!1,T.toString(t))}setLimit(e,t,r,s){return new Ot({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:T.toString(s)}]})}_addCheck(e){return new Ot({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:T.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:T.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:T.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:T.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:T.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ot.create=n=>new Ot({checks:[],typeName:E.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...R(n)});class Kn extends j{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==x.boolean){const r=this._getOrReturnCtx(e);return w(r,{code:y.invalid_type,expected:x.boolean,received:r.parsedType}),C}return he(e.data)}}Kn.create=n=>new Kn({typeName:E.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...R(n)});class _n extends j{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==x.date){const a=this._getOrReturnCtx(e);return w(a,{code:y.invalid_type,expected:x.date,received:a.parsedType}),C}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return w(a,{code:y.invalid_date}),C}const r=new se;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),w(s,{code:y.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),w(s,{code:y.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):M.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new _n({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:T.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:T.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}_n.create=n=>new _n({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:E.ZodDate,...R(n)});class ps extends j{_parse(e){if(this._getType(e)!==x.symbol){const r=this._getOrReturnCtx(e);return w(r,{code:y.invalid_type,expected:x.symbol,received:r.parsedType}),C}return he(e.data)}}ps.create=n=>new ps({typeName:E.ZodSymbol,...R(n)});class er extends j{_parse(e){if(this._getType(e)!==x.undefined){const r=this._getOrReturnCtx(e);return w(r,{code:y.invalid_type,expected:x.undefined,received:r.parsedType}),C}return he(e.data)}}er.create=n=>new er({typeName:E.ZodUndefined,...R(n)});class tr extends j{_parse(e){if(this._getType(e)!==x.null){const r=this._getOrReturnCtx(e);return w(r,{code:y.invalid_type,expected:x.null,received:r.parsedType}),C}return he(e.data)}}tr.create=n=>new tr({typeName:E.ZodNull,...R(n)});class nr extends j{constructor(){super(...arguments),this._any=!0}_parse(e){return he(e.data)}}nr.create=n=>new nr({typeName:E.ZodAny,...R(n)});class fs extends j{constructor(){super(...arguments),this._unknown=!0}_parse(e){return he(e.data)}}fs.create=n=>new fs({typeName:E.ZodUnknown,...R(n)});class $e extends j{_parse(e){const t=this._getOrReturnCtx(e);return w(t,{code:y.invalid_type,expected:x.never,received:t.parsedType}),C}}$e.create=n=>new $e({typeName:E.ZodNever,...R(n)});class hs extends j{_parse(e){if(this._getType(e)!==x.undefined){const r=this._getOrReturnCtx(e);return w(r,{code:y.invalid_type,expected:x.void,received:r.parsedType}),C}return he(e.data)}}hs.create=n=>new hs({typeName:E.ZodVoid,...R(n)});class we extends j{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==x.array)return w(t,{code:y.invalid_type,expected:x.array,received:t.parsedType}),C;if(s.exactLength!==null){const i=t.data.length>s.exactLength.value,o=t.data.length<s.exactLength.value;(i||o)&&(w(t,{code:i?y.too_big:y.too_small,minimum:o?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(w(t,{code:y.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(w(t,{code:y.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>s.type._parseAsync(new ve(t,i,t.path,o)))).then(i=>se.mergeArray(r,i));const a=[...t.data].map((i,o)=>s.type._parseSync(new ve(t,i,t.path,o)));return se.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new we({...this._def,minLength:{value:e,message:T.toString(t)}})}max(e,t){return new we({...this._def,maxLength:{value:e,message:T.toString(t)}})}length(e,t){return new we({...this._def,exactLength:{value:e,message:T.toString(t)}})}nonempty(e){return this.min(1,e)}}we.create=(n,e)=>new we({type:n,minLength:null,maxLength:null,exactLength:null,typeName:E.ZodArray,...R(e)});function pt(n){if(n instanceof X){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Ee.create(pt(r))}return new X({...n._def,shape:()=>e})}else return n instanceof we?new we({...n._def,type:pt(n.element)}):n instanceof Ee?Ee.create(pt(n.unwrap())):n instanceof Qe?Qe.create(pt(n.unwrap())):n instanceof He?He.create(n.items.map(e=>pt(e))):n}class X extends j{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=M.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==x.object){const p=this._getOrReturnCtx(e);return w(p,{code:y.invalid_type,expected:x.object,received:p.parsedType}),C}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof $e&&this._def.unknownKeys==="strip"))for(const p in s.data)i.includes(p)||o.push(p);const d=[];for(const p of i){const l=a[p],h=s.data[p];d.push({key:{status:"valid",value:p},value:l._parse(new ve(s,h,s.path,p)),alwaysSet:p in s.data})}if(this._def.catchall instanceof $e){const p=this._def.unknownKeys;if(p==="passthrough")for(const l of o)d.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(p==="strict")o.length>0&&(w(s,{code:y.unrecognized_keys,keys:o}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const l of o){const h=s.data[l];d.push({key:{status:"valid",value:l},value:p._parse(new ve(s,h,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const p=[];for(const l of d){const h=await l.key,f=await l.value;p.push({key:h,value:f,alwaysSet:l.alwaysSet})}return p}).then(p=>se.mergeObjectSync(r,p)):se.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(e){return T.errToObj,new X({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,i;const s=((i=(a=this._def).errorMap)==null?void 0:i.call(a,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:T.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new X({...this._def,unknownKeys:"strip"})}passthrough(){return new X({...this._def,unknownKeys:"passthrough"})}extend(e){return new X({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new X({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:E.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new X({...this._def,catchall:e})}pick(e){const t={};for(const r of M.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new X({...this._def,shape:()=>t})}omit(e){const t={};for(const r of M.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new X({...this._def,shape:()=>t})}deepPartial(){return pt(this)}partial(e){const t={};for(const r of M.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new X({...this._def,shape:()=>t})}required(e){const t={};for(const r of M.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Ee;)a=a._def.innerType;t[r]=a}return new X({...this._def,shape:()=>t})}keyof(){return gs(M.objectKeys(this.shape))}}X.create=(n,e)=>new X({shape:()=>n,unknownKeys:"strip",catchall:$e.create(),typeName:E.ZodObject,...R(e)}),X.strictCreate=(n,e)=>new X({shape:()=>n,unknownKeys:"strict",catchall:$e.create(),typeName:E.ZodObject,...R(e)}),X.lazycreate=(n,e)=>new X({shape:n,unknownKeys:"strip",catchall:$e.create(),typeName:E.ZodObject,...R(e)});class yn extends j{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new Ie(o.ctx.common.issues));return w(t,{code:y.invalid_union,unionErrors:i}),C}if(t.common.async)return Promise.all(r.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(s);{let a;const i=[];for(const d of r){const p={...t,common:{...t.common,issues:[]},parent:null},l=d._parseSync({data:t.data,path:t.path,parent:p});if(l.status==="valid")return l;l.status==="dirty"&&!a&&(a={result:l,ctx:p}),p.common.issues.length&&i.push(p.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(d=>new Ie(d));return w(t,{code:y.invalid_union,unionErrors:o}),C}}get options(){return this._def.options}}yn.create=(n,e)=>new yn({options:n,typeName:E.ZodUnion,...R(e)});const Ce=n=>n instanceof bn?Ce(n.schema):n instanceof Xe?Ce(n.innerType()):n instanceof xn?[n.value]:n instanceof Ye?n.options:n instanceof ar?M.objectValues(n.enum):n instanceof Tn?Ce(n._def.innerType):n instanceof er?[void 0]:n instanceof tr?[null]:n instanceof Ee?[void 0,...Ce(n.unwrap())]:n instanceof Qe?[null,...Ce(n.unwrap())]:n instanceof ys||n instanceof In?Ce(n.unwrap()):n instanceof kn?Ce(n._def.innerType):[];class rr extends j{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==x.object)return w(t,{code:y.invalid_type,expected:x.object,received:t.parsedType}),C;const r=this.discriminator,s=t.data[r],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(w(t,{code:y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),C)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const a of t){const i=Ce(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,a)}}return new rr({typeName:E.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...R(r)})}}function sr(n,e){const t=Me(n),r=Me(e);if(n===e)return{valid:!0,data:n};if(t===x.object&&r===x.object){const s=M.objectKeys(e),a=M.objectKeys(n).filter(o=>s.indexOf(o)!==-1),i={...n,...e};for(const o of a){const d=sr(n[o],e[o]);if(!d.valid)return{valid:!1};i[o]=d.data}return{valid:!0,data:i}}else if(t===x.array&&r===x.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<n.length;a++){const i=n[a],o=e[a],d=sr(i,o);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return t===x.date&&r===x.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class vn extends j{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(a,i)=>{if(os(a)||os(i))return C;const o=sr(a.value,i.value);return o.valid?((us(a)||us(i))&&t.dirty(),{status:t.value,value:o.data}):(w(r,{code:y.invalid_intersection_types}),C)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}vn.create=(n,e,t)=>new vn({left:n,right:e,typeName:E.ZodIntersection,...R(t)});class He extends j{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==x.array)return w(r,{code:y.invalid_type,expected:x.array,received:r.parsedType}),C;if(r.data.length<this._def.items.length)return w(r,{code:y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),C;!this._def.rest&&r.data.length>this._def.items.length&&(w(r,{code:y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...r.data].map((i,o)=>{const d=this._def.items[o]||this._def.rest;return d?d._parse(new ve(r,i,r.path,o)):null}).filter(i=>!!i);return r.common.async?Promise.all(a).then(i=>se.mergeArray(t,i)):se.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new He({...this._def,rest:e})}}He.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new He({items:n,typeName:E.ZodTuple,rest:null,...R(e)})};class wn extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==x.object)return w(r,{code:y.invalid_type,expected:x.object,received:r.parsedType}),C;const s=[],a=this._def.keyType,i=this._def.valueType;for(const o in r.data)s.push({key:a._parse(new ve(r,o,r.path,o)),value:i._parse(new ve(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?se.mergeObjectAsync(t,s):se.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof j?new wn({keyType:e,valueType:t,typeName:E.ZodRecord,...R(r)}):new wn({keyType:Ae.create(),valueType:e,typeName:E.ZodRecord,...R(t)})}}class ms extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==x.map)return w(r,{code:y.invalid_type,expected:x.map,received:r.parsedType}),C;const s=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([o,d],p)=>({key:s._parse(new ve(r,o,r.path,[p,"key"])),value:a._parse(new ve(r,d,r.path,[p,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const d of i){const p=await d.key,l=await d.value;if(p.status==="aborted"||l.status==="aborted")return C;(p.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(p.value,l.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const d of i){const p=d.key,l=d.value;if(p.status==="aborted"||l.status==="aborted")return C;(p.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(p.value,l.value)}return{status:t.value,value:o}}}}ms.create=(n,e,t)=>new ms({valueType:e,keyType:n,typeName:E.ZodMap,...R(t)});class Nt extends j{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==x.set)return w(r,{code:y.invalid_type,expected:x.set,received:r.parsedType}),C;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(w(r,{code:y.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(w(r,{code:y.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function i(d){const p=new Set;for(const l of d){if(l.status==="aborted")return C;l.status==="dirty"&&t.dirty(),p.add(l.value)}return{status:t.value,value:p}}const o=[...r.data.values()].map((d,p)=>a._parse(new ve(r,d,r.path,p)));return r.common.async?Promise.all(o).then(d=>i(d)):i(o)}min(e,t){return new Nt({...this._def,minSize:{value:e,message:T.toString(t)}})}max(e,t){return new Nt({...this._def,maxSize:{value:e,message:T.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Nt.create=(n,e)=>new Nt({valueType:n,minSize:null,maxSize:null,typeName:E.ZodSet,...R(e)});class bn extends j{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}bn.create=(n,e)=>new bn({getter:n,typeName:E.ZodLazy,...R(e)});class xn extends j{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return w(t,{received:t.data,code:y.invalid_literal,expected:this._def.value}),C}return{status:"valid",value:e.data}}get value(){return this._def.value}}xn.create=(n,e)=>new xn({value:n,typeName:E.ZodLiteral,...R(e)});function gs(n,e){return new Ye({values:n,typeName:E.ZodEnum,...R(e)})}class Ye extends j{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return w(t,{expected:M.joinValues(r),received:t.parsedType,code:y.invalid_type}),C}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return w(t,{received:t.data,code:y.invalid_enum_value,options:r}),C}return he(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ye.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ye.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Ye.create=gs;class ar extends j{_parse(e){const t=M.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==x.string&&r.parsedType!==x.number){const s=M.objectValues(t);return w(r,{expected:M.joinValues(s),received:r.parsedType,code:y.invalid_type}),C}if(this._cache||(this._cache=new Set(M.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=M.objectValues(t);return w(r,{received:r.data,code:y.invalid_enum_value,options:s}),C}return he(e.data)}get enum(){return this._def.values}}ar.create=(n,e)=>new ar({values:n,typeName:E.ZodNativeEnum,...R(e)});class Sn extends j{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==x.promise&&t.common.async===!1)return w(t,{code:y.invalid_type,expected:x.promise,received:t.parsedType}),C;const r=t.parsedType===x.promise?t.data:Promise.resolve(t.data);return he(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Sn.create=(n,e)=>new Sn({type:n,typeName:E.ZodPromise,...R(e)});class Xe extends j{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===E.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:i=>{w(r,i),i.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const i=s.transform(r.data,a);if(r.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return C;const d=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return d.status==="aborted"?C:d.status==="dirty"||t.value==="dirty"?Et(d.value):d});{if(t.value==="aborted")return C;const o=this._def.schema._parseSync({data:i,path:r.path,parent:r});return o.status==="aborted"?C:o.status==="dirty"||t.value==="dirty"?Et(o.value):o}}if(s.type==="refinement"){const i=o=>{const d=s.refinement(o,a);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?C:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?C:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!dt(i))return C;const o=s.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>dt(i)?Promise.resolve(s.transform(i.value,a)).then(o=>({status:t.value,value:o})):C);M.assertNever(s)}}Xe.create=(n,e,t)=>new Xe({schema:n,typeName:E.ZodEffects,effect:e,...R(t)}),Xe.createWithPreprocess=(n,e,t)=>new Xe({schema:e,effect:{type:"preprocess",transform:n},typeName:E.ZodEffects,...R(t)});class Ee extends j{_parse(e){return this._getType(e)===x.undefined?he(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ee.create=(n,e)=>new Ee({innerType:n,typeName:E.ZodOptional,...R(e)});class Qe extends j{_parse(e){return this._getType(e)===x.null?he(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qe.create=(n,e)=>new Qe({innerType:n,typeName:E.ZodNullable,...R(e)});class Tn extends j{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===x.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Tn.create=(n,e)=>new Tn({innerType:n,typeName:E.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...R(e)});class kn extends j{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return gn(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ie(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ie(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}kn.create=(n,e)=>new kn({innerType:n,typeName:E.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...R(e)});class _s extends j{_parse(e){if(this._getType(e)!==x.nan){const r=this._getOrReturnCtx(e);return w(r,{code:y.invalid_type,expected:x.nan,received:r.parsedType}),C}return{status:"valid",value:e.data}}}_s.create=n=>new _s({typeName:E.ZodNaN,...R(n)});class ys extends j{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class ir extends j{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?C:a.status==="dirty"?(t.dirty(),Et(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?C:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new ir({in:e,out:t,typeName:E.ZodPipeline})}}class In extends j{_parse(e){const t=this._def.innerType._parse(e),r=s=>(dt(s)&&(s.value=Object.freeze(s.value)),s);return gn(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}In.create=(n,e)=>new In({innerType:n,typeName:E.ZodReadonly,...R(e)});var E;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(E||(E={}));const c=Ae.create,k=lt.create,Rt=Kn.create,U=nr.create;$e.create;const G=we.create,g=X.create,vs=yn.create,ce=rr.create;vn.create,He.create;const ae=wn.create,ao=bn.create,m=xn.create,ie=Ye.create;Sn.create,Ee.create,Qe.create,g({name:c(),description:c().optional(),inputSchema:g({type:m("object"),properties:ae(c(),U()),required:G(c()),additionalProperties:Rt()})});async function io(n,e=!1){const t=[],r=new Set;for(const s of n){const a=await oo(s,e),o=[...new Set(a.map(d=>d.name))].filter(d=>r.has(d));if(o.length>0)throw new Q(`Duplicate tool names found across MCP servers: ${o.join(", ")}`);for(const d of a)r.add(d.name),t.push(d)}return t}const or={};async function oo(n,e){return n.cacheToolsList&&or[n.name]?or[n.name]:Po(async t=>{const r=await n.listTools();t.spanData.result=r.map(a=>a.name);const s=r.map(a=>co(a,n,e));return n.cacheToolsList&&(or[n.name]=s),s},{data:{server:n.name}})}async function uo(n,e=!1){return io(n,e)}function co(n,e,t){var i,o,d,p;async function r(l,h){let f={};typeof l=="string"&&l?f=JSON.parse(l):typeof l=="object"&&l!=null&&(f=l);const b=Pt();b&&(b.spanData.mcp_data={server:e.name});const A=await e.callTool(n.name,f);return A.length===1?A[0]:A}const s={type:((i=n.inputSchema)==null?void 0:i.type)??"object",properties:((o=n.inputSchema)==null?void 0:o.properties)??{},required:((d=n.inputSchema)==null?void 0:d.required)??[],additionalProperties:((p=n.inputSchema)==null?void 0:p.additionalProperties)??!1};if(t||s.additionalProperties===!0)try{const l=lo(s);return mn({name:n.name,description:n.description||"",parameters:l,strict:!0,execute:r})}catch(l){I.warn(`Error converting MCP schema to strict mode: ${l}`)}const a={...s,additionalProperties:!0};return mn({name:n.name,description:n.description||"",parameters:a,strict:!1,execute:r})}function lo(n){const e={...n,additionalProperties:!1};return e.required||(e.required=[]),e}function po(){return{}}class An{constructor(){S(this,gt,new EventTarget)}on(e,t){return u(this,gt).addEventListener(e,r=>t(...r.detail??[])),this}off(e,t){return u(this,gt).removeEventListener(e,r=>t(...r.detail??[])),this}emit(e,...t){const r=new CustomEvent(e,{detail:t});return u(this,gt).dispatchEvent(r)}once(e,t){const r=(...s)=>{this.off(e,r),t(...s)};return this.on(e,r),this}}gt=new WeakMap;const ws=crypto.randomUUID.bind(crypto),fo=class{constructor(){}pipeTo(e,t){}pipeThrough(e,t){}},ho=globalThis.ReadableStream,mo=globalThis.TransformStream;class go{constructor(){_(this,"context",null)}run(e,t){return this.context=e,t()}getStore(){return this.context}enterWith(){}}class _o{constructor(){}setTimeout(e,t){const r=setTimeout(e,t);return r.ref=typeof r.ref=="function"?r.ref:()=>r,r.unref=typeof r.unref=="function"?r.unref:()=>r,r.hasRef=typeof r.hasRef=="function"?r.hasRef:()=>!0,r.refresh=typeof r.refresh=="function"?r.refresh:()=>r,r}clearTimeout(e){window.clearTimeout(e)}}const yo=new _o;let bs;function be(){return bs??(bs=new go),bs}function Dt(){const n=be().getStore();return n!=null&&n.trace?n.trace:null}function Pt(){const n=be().getStore();return n!=null&&n.span?n.span:null}function xs(n){return async()=>{const e=Dt();if(!e)throw new Error("No trace found");await e.start();const t=await n(e);return await e.end(),t}}async function vo(n,e,t={}){const r=typeof n=="string"?xe().createTrace({...t,name:n}):n;return be().run({trace:r},xs(e))}async function wo(n,e={}){if(Dt())return await n();const r=xe().createTrace(e);return be().run({trace:r},xs(n))}function Cn(n){const e=be().getStore();if(!e)throw new Error("No existing trace found");e.span&&(e.span.previousSpan=e.previousSpan,e.previousSpan=e.span),e.span=n,be().enterWith(e)}function jt(){var e;const n=be().getStore();n&&(n.span=n.previousSpan,n.previousSpan=(e=n.previousSpan)==null?void 0:e.previousSpan,be().enterWith(n))}function Zt(n){const e=Pt();e&&e.setError(n)}function bo(n){var e,t,r;return{trace:(e=n.trace)==null?void 0:e.clone(),span:(t=n.span)==null?void 0:t.clone(),previousSpan:(r=n.previousSpan)==null?void 0:r.clone()}}function ur(n){const e=be().getStore();if(!e)throw new Error("No existing trace found");const t=bo(e);return be().run(t,n)}class xo{async export(e){if(rs.disabled){I.debug("Tracing is disabled. Skipping export");return}for(const t of e)t.type==="trace"?console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}`):console.log(`[Exporter] Export span: ${JSON.stringify(t)}`)}}class So{constructor(e,{maxQueueSize:t=1e3,maxBatchSize:r=100,scheduleDelay:s=5e3,exportTriggerRatio:a=.8}={}){S(this,de);S(this,Jt);S(this,_t);S(this,Bt);S(this,Gt);S(this,yt);S(this,te,[]);S(this,Re);S(this,Le,null);S(this,Ue,!1);S(this,Vt,new AbortController);v(this,Jt,t),v(this,_t,r),v(this,Bt,s),v(this,Gt,t*a),v(this,yt,e),v(this,Re,yo),I.warn("BatchTraceProcessor is not supported in the browser. Traces will not be exported.")}async onTraceStart(e){await Z(this,de,Or).call(this,e)}async onTraceEnd(e){}async onSpanStart(e){}async onSpanEnd(e){await Z(this,de,Or).call(this,e)}async shutdown(e){for(e&&u(this,Re).setTimeout(()=>{u(this,Vt).abort()},e),I.debug("Shutting down gracefully");u(this,te).length>0;){if(I.debug(`Waiting for buffer to empty. Items left: ${u(this,te).length}`),u(this,Ue)||await Z(this,de,It).call(this,!0),u(this,Vt).signal.aborted){I.debug("Timeout reached, force flushing"),await Z(this,de,It).call(this,!0);break}await new Promise(t=>u(this,Re).setTimeout(t,500))}I.debug("Buffer empty. Exiting"),u(this,Re)&&u(this,Le)&&u(this,Re).clearTimeout(u(this,Le))}async forceFlush(){u(this,te).length>0&&await Z(this,de,It).call(this,!0)}}Jt=new WeakMap,_t=new WeakMap,Bt=new WeakMap,Gt=new WeakMap,yt=new WeakMap,te=new WeakMap,Re=new WeakMap,Le=new WeakMap,Ue=new WeakMap,Vt=new WeakMap,de=new WeakSet,Or=async function(e){if(u(this,te).length+1>u(this,Jt)){I.error("Dropping trace because buffer is full");return}u(this,te).push(e),u(this,te).length>u(this,Gt)&&await Z(this,de,It).call(this)},wa=function(){v(this,Le,u(this,Re).setTimeout(async()=>{await Z(this,de,It).call(this),Z(this,de,wa).call(this)},u(this,Bt))),typeof u(this,Le).unref=="function"&&u(this,Le).unref()},It=async function(e=!1){if(u(this,te).length!==0){if(I.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this,te).length}`),e||u(this,te).length<u(this,_t)){const t=[...u(this,te)];v(this,te,[]),v(this,Ue,!0),await u(this,yt).export(t),v(this,Ue,!1)}else if(u(this,te).length>0){const t=u(this,te).splice(0,u(this,_t));v(this,Ue,!0),await u(this,yt).export(t),v(this,Ue,!1)}}};class To{constructor(){S(this,me,[])}addTraceProcessor(e){u(this,me).push(e)}setProcessors(e){I.debug("Shutting down old processors");for(const t of u(this,me))t.shutdown();v(this,me,e)}async onTraceStart(e){for(const t of u(this,me))await t.onTraceStart(e)}async onTraceEnd(e){for(const t of u(this,me))await t.onTraceEnd(e)}async onSpanStart(e){for(const t of u(this,me))await t.onSpanStart(e)}async onSpanEnd(e){for(const t of u(this,me))await t.onSpanEnd(e)}async shutdown(e){for(const t of u(this,me))await t.shutdown(e)}async forceFlush(){for(const e of u(this,me))await e.forceFlush()}}me=new WeakMap;let cr=null,dr=null;function ko(){return cr||(cr=new xo),cr}function Ss(){return dr||(dr=new So(ko())),dr}function Ts(){return new Date().toISOString()}function ks(){return`trace_${ws().replace(/-/g,"")}`}function Io(){return`span_${ws().replace(/-/g,"").slice(0,24)}`}function Ao(n){return Object.fromEntries(Object.entries(n).filter(([e])=>!e.startsWith("_")))}const Ir=class Ir{constructor(e,t){_(this,"type","trace.span");S(this,zt);S(this,qt);S(this,Wt);S(this,Ht);S(this,rt);S(this,Je);S(this,Be);S(this,st);S(this,Yt);v(this,qt,e.traceId),v(this,Wt,e.spanId??Io()),v(this,zt,e.data),v(this,rt,t),v(this,Ht,e.parentId??null),v(this,st,e.error??null),v(this,Je,e.startedAt??null),v(this,Be,e.endedAt??null)}get traceId(){return u(this,qt)}get spanData(){return u(this,zt)}get spanId(){return u(this,Wt)}get parentId(){return u(this,Ht)}get previousSpan(){return u(this,Yt)}set previousSpan(e){v(this,Yt,e)}start(){if(u(this,Je)){I.warn("Span already started");return}v(this,Je,Ts()),u(this,rt).onSpanStart(this)}end(){if(u(this,Be)){I.debug("Span already finished",this.spanData);return}v(this,Be,Ts()),u(this,rt).onSpanEnd(this)}setError(e){v(this,st,e)}get error(){return u(this,st)}get startedAt(){return u(this,Je)}get endedAt(){return u(this,Be)}clone(){var t;const e=new Ir({traceId:this.traceId,spanId:this.spanId,parentId:this.parentId??void 0,data:this.spanData,startedAt:u(this,Je)??void 0,endedAt:u(this,Be)??void 0,error:u(this,st)??void 0},u(this,rt));return e.previousSpan=(t=this.previousSpan)==null?void 0:t.clone(),e}toJSON(){return{object:this.type,id:this.spanId,trace_id:this.traceId,parent_id:this.parentId,started_at:this.startedAt,ended_at:this.endedAt,span_data:Ao(this.spanData),error:this.error}}};zt=new WeakMap,qt=new WeakMap,Wt=new WeakMap,Ht=new WeakMap,rt=new WeakMap,Je=new WeakMap,Be=new WeakMap,st=new WeakMap,Yt=new WeakMap;let Mt=Ir;class Fe extends Mt{constructor(e,t){super({traceId:"no-op",spanId:"no-op",data:e},t)}start(){}end(){}setError(){}toJSON(){return null}}const Ar=class Ar{constructor(e,t){_(this,"type","trace");_(this,"traceId");_(this,"name");_(this,"groupId",null);_(this,"metadata");S(this,vt);S(this,De);this.traceId=e.traceId??ks(),this.name=e.name??"Agent workflow",this.groupId=e.groupId??null,this.metadata=e.metadata??{},v(this,vt,t??Ss()),v(this,De,e.started??!1)}async start(){u(this,De)||(v(this,De,!0),await u(this,vt).onTraceStart(this))}async end(){u(this,De)&&(v(this,De,!1),await u(this,vt).onTraceEnd(this))}clone(){return new Ar({traceId:this.traceId,name:this.name,groupId:this.groupId??void 0,metadata:this.metadata,started:u(this,De)})}toJSON(){return{object:this.type,id:this.traceId,workflow_name:this.name,group_id:this.groupId,metadata:this.metadata}}};vt=new WeakMap,De=new WeakMap;let $t=Ar;class lr extends $t{constructor(){super({})}async start(){}async end(){}toJSON(){return null}}class Co{constructor(){S(this,Fn);S(this,oe);S(this,Ge);v(this,oe,new To),v(this,Ge,rs.disabled),ns().NODE_ENV==="test"&&v(this,Ge,!0),Z(this,Fn,ba).call(this)}registerProcessor(e){u(this,oe).addTraceProcessor(e)}setProcessors(e){u(this,oe).setProcessors(e)}getCurrentTrace(){return Dt()}getCurrentSpan(){return Pt()}setDisabled(e){v(this,Ge,e)}createTrace(e){if(u(this,Ge))return I.debug("Tracing is disabled, Not creating trace %o",e),new lr;const t=e.traceId??ks(),r=e.name??"Agent workflow";return I.debug("Creating trace %s with name %s",t,r),new $t({...e,name:r,traceId:t},u(this,oe))}createSpan(e,t){if(u(this,Ge)||e.disabled)return I.debug("Tracing is disabled, Not creating span %o",e),new Fe(e.data,u(this,oe));let r,s;if(t){if(t instanceof $t){if(t instanceof lr)return I.debug("Parent trace is no-op, returning NoopSpan"),new Fe(e.data,u(this,oe));s=t.traceId}else if(t instanceof Mt){if(t instanceof Fe)return I.debug("Parent span is no-op, returning NoopSpan"),new Fe(e.data,u(this,oe));r=t.spanId,s=t.traceId}}else{const a=Dt(),i=Pt();if(!a)return I.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new Fe(e.data,u(this,oe));if(i instanceof Fe||a instanceof lr)return I.debug(`Parent ${i} or ${a} is no-op, returning NoopSpan`),new Fe(e.data,u(this,oe));s=a.traceId,i?(I.debug("Using parent span %s",i.spanId),r=i.spanId):I.debug("No parent span, using current trace %s",a.traceId)}return s?(I.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId??s}`),new Mt({...e,traceId:s,parentId:r},u(this,oe))):(I.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new Fe(e.data,u(this,oe)))}async shutdown(e){try{I.debug("Shutting down tracing provider"),await u(this,oe).shutdown(e)}catch(t){I.error("Error shutting down tracing provider %o",t)}}}oe=new WeakMap,Ge=new WeakMap,Fn=new WeakSet,ba=function(){if(typeof process<"u"&&typeof process.on=="function"){const e=async()=>{const t=setTimeout(()=>{console.warn("Cleanup timeout, forcing exit"),process.exit(1)},5e3);try{await this.shutdown()}finally{clearTimeout(t)}};process.on("beforeExit",e),process.on("SIGINT",async()=>{await e(),process.exit(130)}),process.on("SIGTERM",async()=>{await e(),process.exit(0)}),process.on("unhandledRejection",async(t,r)=>{I.error("Unhandled rejection",t,r),await e(),process.exit(1)})}};let pr;function xe(){return pr||(pr=new Co),pr}function En(n){return async(e,...t)=>ur(async()=>{const r=n(...t);Cn(r);try{return r.start(),await e(r)}catch(s){throw r.setError({message:s.message,data:s.data}),s}finally{r.end(),jt()}})}function Is(n,e){var t;return xe().createSpan({...n,data:{type:"agent",name:((t=n==null?void 0:n.data)==null?void 0:t.name)??"Agent",...n==null?void 0:n.data}},e)}function Eo(n,e){var t,r;return xe().createSpan({...n,data:{type:"function",input:((t=n==null?void 0:n.data)==null?void 0:t.input)??"",output:((r=n==null?void 0:n.data)==null?void 0:r.output)??"",...n==null?void 0:n.data}},e)}const As=En(Eo);function Oo(n,e){return xe().createSpan({...n,data:{type:"handoff",...n==null?void 0:n.data}},e)}const No=En(Oo);function Ro(n,e){return xe().createSpan({...n,data:{type:"guardrail",triggered:!1,...n==null?void 0:n.data}},e)}const Cs=En(Ro);function Do(n,e){return xe().createSpan({...n,data:{type:"mcp_tools",...n==null?void 0:n.data}},e)}const Po=En(Do);function jo(n){xe().registerProcessor(n)}class fr{on(e,t){return this.eventEmitter.on(e,t),this.eventEmitter}off(e,t){return this.eventEmitter.off(e,t),this.eventEmitter}emit(e,...t){return this.eventEmitter.emit(e,...t)}once(e,t){return this.eventEmitter.once(e,t),this.eventEmitter}}class Zo extends fr{constructor(){super(...arguments);_(this,"eventEmitter",new An)}}class Mo extends fr{constructor(){super(...arguments);_(this,"eventEmitter",new An)}}function Es({name:n,execute:e}){return{type:"input",name:n,guardrailFunction:e,async run(t){return{guardrail:{type:"input",name:n},output:await e(t)}}}}function hr({name:n,execute:e}){return{type:"output",name:n,guardrailFunction:e,async run(t){return{guardrail:{type:"output",name:n},agent:t.agent,agentOutput:t.agentOutput,output:await e(t)}}}}function Os(n){return JSON.stringify({assistant:n.name})}function $o(n){return`transfer_to_${fn(n.name)}`}function Fo(n){return`Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription??""}`}class Ns{constructor(e,t){_(this,"toolName");_(this,"toolDescription");_(this,"inputJsonSchema",{type:"object",properties:{},required:[],additionalProperties:!1});_(this,"strictJsonSchema",!0);_(this,"onInvokeHandoff");_(this,"agentName");_(this,"inputFilter");_(this,"agent");this.agentName=e.name,this.onInvokeHandoff=t,this.toolName=$o(e),this.toolDescription=Fo(e),this.agent=e}getHandoffAsFunctionTool(){return{type:"function",name:this.toolName,description:this.toolDescription,parameters:this.inputJsonSchema,strict:this.strictJsonSchema}}}function Rs(n,e={}){let t;const r=!!e.onHandoff,s=!!e.inputType;if(!(r===s))throw new Q("You must provide either both `onHandoff` and `inputType` or neither.");async function i(d,p){var l;if(t){if(!p)throw Zt({message:`Handoff function expected non empty input but got: ${p}`,data:{details:"input is empty"}}),new fe("Handoff function expected non empty input");try{const h=await t(p);e.onHandoff&&await e.onHandoff(d,h)}catch(h){throw Zt({message:"Invalid JSON provided",data:{}}),I.dontLogToolData||I.error(`Invalid JSON when parsing: ${p}. Error: ${h}`),new fe("Invalid JSON provided")}}else await((l=e.onHandoff)==null?void 0:l.call(e,d));return n}const o=new Ns(n,i);if(e.inputType){const d=qn(e.inputType,o.toolName);o.inputJsonSchema=d.schema,o.strictJsonSchema=!0,t=d.parser}return e.toolNameOverride&&(o.toolName=e.toolNameOverride),e.toolDescriptionOverride&&(o.toolDescription=e.toolDescriptionOverride),e.inputFilter&&(o.inputFilter=e.inputFilter),o}function On(n){return n instanceof Ns?n:Rs(n)}function Lo(){throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.")}const ee=g({providerData:ae(c(),U()).optional()}),Ke=ee.extend({id:c().optional()}),Uo=ee.extend({type:m("refusal"),refusal:c()}),Jo=ee.extend({type:m("output_text"),text:c()}),mr=ee.extend({type:m("input_text"),text:c()}),Bo=ee.extend({type:m("input_image"),image:c().or(g({id:c()})).describe("Could be a URL, base64 or an object with a file ID.")}),Go=ee.extend({type:m("input_file"),file:c().or(g({id:c()})).describe("Contents of the file or an object with a file ID.")}),Ds=ee.extend({type:m("audio"),audio:c().or(g({id:c()})).describe("Base64 encoded audio data or file id"),format:c().nullable().optional(),transcript:c().nullable().optional()}),Vo=ee.extend({type:m("image"),image:c().describe("Base64 encoded image data")}),zo=ee.extend({type:m("text"),text:c()}),qo=ee.extend({type:m("image"),data:c().describe("Base64 encoded image data"),mediaType:c().describe("IANA media type of the image")}),Wo=ee.extend({type:m("computer_screenshot"),data:c().describe("Base64 encoded image data or URL")}),Ho=ce("type",[g({type:m("screenshot")}),g({type:m("click"),x:k(),y:k(),button:ie(["left","right","wheel","back","forward"])}),g({type:m("double_click"),x:k(),y:k()}),g({type:m("scroll"),x:k(),y:k(),scroll_x:k(),scroll_y:k()}),g({type:m("type"),text:c()}),g({type:m("wait")}),g({type:m("move"),x:k(),y:k()}),g({type:m("keypress"),keys:G(c())}),g({type:m("drag"),path:G(g({x:k(),y:k()}))})]),Yo=ce("type",[Jo,Uo,mr,Ds,Vo]),gr=Ke.extend({type:m("message").optional()}),Nn=gr.extend({role:m("assistant"),status:ie(["in_progress","completed","incomplete"]),content:G(Yo)}),Xo=ce("type",[mr,Bo,Go,Ds]),Ps=gr.extend({role:m("user"),content:G(Xo).or(c())}),js=gr.extend({role:m("system"),content:c()});ce("role",[js,Nn,Ps]);const Rn=Ke.extend({type:m("hosted_tool_call"),name:c().describe("The name of the hosted tool"),status:c().optional(),output:c().optional()}),Ft=Ke.extend({type:m("function_call"),callId:c().describe("The ID of the tool call"),name:c().describe("The name of the function"),status:ie(["in_progress","completed","incomplete"]).optional(),arguments:c()}),_r=Ke.extend({type:m("function_call_result"),name:c().describe("The name of the tool"),callId:c().describe("The ID of the tool call"),status:ie(["in_progress","completed","incomplete"]),output:ce("type",[zo,qo])}),yr=Ke.extend({type:m("computer_call"),callId:c().describe("The ID of the computer call"),status:ie(["in_progress","completed","incomplete"]),action:Ho}),Qo=Ke.extend({type:m("computer_call_result"),callId:c().describe("The ID of the computer call"),output:Wo}),Ko=ce("type",[yr,Ft,Rn]),vr=ee.extend({id:c().optional(),type:m("reasoning"),content:G(mr)}),Zs=Ke.extend({type:m("unknown")}),wr=ce("type",[Nn,Rn,Ft,yr,vr,Zs]),eu=vs([Ps,Nn,js,Rn,Ft,yr,_r,Qo,vr,Zs]),tu=g({requests:k().optional(),inputTokens:k(),outputTokens:k(),totalTokens:k(),inputTokensDetails:ae(c(),k()).optional(),outputTokensDetails:ae(c(),k()).optional()}),Ms=ee.extend({type:m("output_text_delta"),delta:c()}),nu=ee.extend({type:m("response_started")}),$s=ee.extend({type:m("response_done"),response:ee.extend({id:c(),usage:tu,output:G(wr)})}),ru=ee.extend({type:m("model"),event:U().describe("The event from the model")});ce("type",[Ms,$s,nu,ru]);class Dn{constructor(e){_(this,"requests");_(this,"inputTokens");_(this,"outputTokens");_(this,"totalTokens");_(this,"inputTokensDetails",[]);_(this,"outputTokensDetails",[]);typeof e>"u"?(this.requests=0,this.inputTokens=0,this.outputTokens=0,this.totalTokens=0,this.inputTokensDetails=[],this.outputTokensDetails=[]):(this.requests=(e==null?void 0:e.requests)??1,this.inputTokens=(e==null?void 0:e.inputTokens)??0,this.outputTokens=(e==null?void 0:e.outputTokens)??0,this.totalTokens=(e==null?void 0:e.totalTokens)??0,this.inputTokensDetails=e!=null&&e.inputTokensDetails?[e.inputTokensDetails]:[],this.outputTokensDetails=e!=null&&e.outputTokensDetails?[e.outputTokensDetails]:[])}add(e){this.requests+=e.requests,this.inputTokens+=e.inputTokens,this.outputTokens+=e.outputTokens,this.totalTokens+=e.totalTokens,this.inputTokensDetails.push(...e.inputTokensDetails),this.outputTokensDetails.push(...e.outputTokensDetails)}}class ft{constructor(e={}){_(this,"context");_(this,"usage");S(this,le);this.context=e,this.usage=new Dn,v(this,le,new Map)}_rebuildApprovals(e){v(this,le,new Map(Object.entries(e)))}isToolApproved({toolName:e,callId:t}){const r=u(this,le).get(e);if((r==null?void 0:r.approved)===!0&&r.rejected===!0)return I.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"),!0;if((r==null?void 0:r.approved)===!0)return!0;if((r==null?void 0:r.rejected)===!0)return!1;const s=Array.isArray(r==null?void 0:r.approved)?r.approved.includes(t):!1,a=Array.isArray(r==null?void 0:r.rejected)?r.rejected.includes(t):!1;if(s&&a)return I.warn(`Tool call ${t} is both approved and rejected at the same time. Approval takes precedence`),!0;if(s)return!0;if(a)return!1}approveTool(e,{alwaysApprove:t=!1}={}){const r=e.rawItem.name;if(t){u(this,le).set(r,{approved:!0,rejected:[]});return}const s=u(this,le).get(r)??{approved:[],rejected:[]};Array.isArray(s.approved)&&s.approved.push(e.rawItem.callId),u(this,le).set(r,s)}rejectTool(e,{alwaysReject:t=!1}={}){const r=e.rawItem.name;if(t){u(this,le).set(r,{approved:!1,rejected:!0});return}const s=u(this,le).get(r)??{approved:[],rejected:[]};Array.isArray(s.rejected)&&s.rejected.push(e.rawItem.callId),u(this,le).set(r,s)}toJSON(){return{context:this.context,usage:this.usage,approvals:Object.fromEntries(u(this,le).entries())}}}le=new WeakMap;class Fs{constructor(e){_(this,"state");this.state=e}get history(){return $n(this.input,this.newItems)}get output(){return $n([],this.newItems)}get input(){return this.state._originalInput}get newItems(){return this.state._generatedItems}get rawResponses(){return this.state._modelResponses}get lastResponseId(){const e=this.rawResponses;return e&&e.length>0?e[e.length-1].responseId:void 0}get lastAgent(){return this.state._currentAgent}get inputGuardrailResults(){return this.state._inputGuardrailResults}get outputGuardrailResults(){return this.state._outputGuardrailResults}get interruptions(){var e;return((e=this.state._currentStep)==null?void 0:e.type)==="next_step_interruption"?this.state._currentStep.data.interruptions:[]}get finalOutput(){var e;if(((e=this.state._currentStep)==null?void 0:e.type)==="next_step_final_output")return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);I.warn("Accessed finalOutput before agent run is completed.")}}class Ls extends Fs{constructor(e){super(e)}}class su extends Fs{constructor(t={}){super(t.state);_(this,"currentTurn",0);_(this,"maxTurns");S(this,Xt,null);S(this,wt);S(this,ye);S(this,Ve);S(this,Qt);S(this,Kt);S(this,en);S(this,tn,!1);v(this,wt,t.signal),u(this,wt)&&u(this,wt).addEventListener("abort",async()=>{await u(this,Ve).cancel()}),v(this,Ve,new ho({start:r=>{v(this,ye,r)},cancel:()=>{v(this,tn,!0)}})),v(this,Qt,new Promise((r,s)=>{v(this,Kt,r),v(this,en,s)}))}get currentAgent(){return this.lastAgent}_addItem(t){var r;this.cancelled||(r=u(this,ye))==null||r.enqueue(t)}_done(){var t;!this.cancelled&&u(this,ye)&&(u(this,ye).close(),v(this,ye,void 0),(t=u(this,Kt))==null||t.call(this))}_raiseError(t){var r;!this.cancelled&&u(this,ye)&&(u(this,ye).error(t),v(this,ye,void 0)),v(this,Xt,t),(r=u(this,en))==null||r.call(this,t)}get cancelled(){return u(this,tn)}toStream(){return u(this,Ve)}get completed(){return u(this,Qt)}get error(){return u(this,Xt)}toTextStream(t={}){const r=u(this,Ve).pipeThrough(new mo({transform(s,a){if(s.type==="raw_model_stream_event"&&s.data.type==="output_text_delta"){const i=Ms.parse(s.data);a.enqueue(i.delta)}}}));return t.compatibleWithNodeStreams?fo.fromWeb(r):r}[Symbol.asyncIterator](){return u(this,Ve)[Symbol.asyncIterator]()}}Xt=new WeakMap,wt=new WeakMap,ye=new WeakMap,Ve=new WeakMap,Qt=new WeakMap,Kt=new WeakMap,en=new WeakMap,tn=new WeakMap;function Us(n){return n.type==="function"?{type:"function",name:n.name,description:n.description,parameters:n.parameters,strict:n.strict}:n.type==="computer"?{type:"computer",name:n.name,environment:n.computer.environment,dimensions:n.computer.dimensions}:{type:"hosted_tool",name:n.name,providerData:n.providerData}}function Js(n){return{toolName:n.toolName,toolDescription:n.toolDescription,inputJsonSchema:n.inputJsonSchema,strictJsonSchema:n.strictJsonSchema}}class et{constructor(){_(this,"type","base_item");_(this,"rawItem")}toJSON(){return{type:this.type,rawItem:this.rawItem}}}class Pn extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","message_output_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}get content(){let t="";for(const r of this.rawItem.content)r.type==="output_text"&&(t+=r.text);return t}}class Lt extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","tool_call_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class ht extends et{constructor(t,r,s){super();_(this,"rawItem");_(this,"agent");_(this,"output");_(this,"type","tool_call_output_item");this.rawItem=t,this.agent=r,this.output=s}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON(),output:We(this.output)}}}class br extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","reasoning_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class xr extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","handoff_call_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class Sr extends et{constructor(t,r,s){super();_(this,"rawItem");_(this,"sourceAgent");_(this,"targetAgent");_(this,"type","handoff_output_item");this.rawItem=t,this.sourceAgent=r,this.targetAgent=s}toJSON(){return{...super.toJSON(),sourceAgent:this.sourceAgent.toJSON(),targetAgent:this.targetAgent.toJSON()}}}class tt extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","tool_approval_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}function Bs(n){if(n.type!=="message"||n.role!=="assistant")return;const e=n.content[n.content.length-1];if(e.type==="output_text")return e.text}function au(n){return n.output.length===0?"":Bs(n.output[n.output.length-1])||""}class iu{constructor(e){_(this,"data");_(this,"type","raw_model_stream_event");this.data=e}}class ou{constructor(e,t){_(this,"name");_(this,"item");_(this,"type","run_item_stream_event");this.name=e,this.item=t}}class uu{constructor(e){_(this,"agent");_(this,"type","agent_updated_stream_event");this.agent=e}}function Gs(n,e,t,r){const s=[],a=[],i=[],o=[],d=[],p=new Map(r.map(f=>[f.toolName,f])),l=new Map(t.filter(f=>f.type==="function").map(f=>[f.name,f])),h=t.find(f=>f.type==="computer");for(const f of n.output){if(f.type==="message")f.role==="assistant"&&s.push(new Pn(f,e));else if(f.type==="hosted_tool_call")s.push(new Lt(f,e)),d.push(f.name);else if(f.type==="reasoning")s.push(new br(f,e));else if(f.type==="computer_call"){if(s.push(new Lt(f,e)),d.push("computer_use"),!h)throw Zt({message:"Model produced computer action without a computer tool.",data:{agent_name:e.name}}),new fe("Model produced computer action without a computer tool.");o.push({toolCall:f,computer:h})}if(f.type!=="function_call")continue;d.push(f.name);const b=p.get(f.name);if(b)s.push(new xr(f,e)),a.push({toolCall:f,handoff:b});else{const A=l.get(f.name);if(!A)throw Zt({message:`Tool ${f.name} not found in agent ${e.name}.`,data:{tool_name:f.name,agent_name:e.name}}),new fe(`Tool ${f.name} not found in agent ${e.name}.`);s.push(new Lt(f,e)),i.push({toolCall:f,tool:A})}}return{newItems:s,handoffs:a,functions:i,computerActions:o,toolsUsed:d}}const cu=ce("type",[g({type:m("next_step_handoff"),newAgent:U()}),g({type:m("next_step_final_output"),output:c()}),g({type:m("next_step_run_again")}),g({type:m("next_step_interruption"),data:ae(c(),U())})]);class Se{constructor(e,t,r,s,a){_(this,"originalInput");_(this,"modelResponse");_(this,"preStepItems");_(this,"newStepItems");_(this,"nextStep");this.originalInput=e,this.modelResponse=t,this.preStepItems=r,this.newStepItems=s,this.nextStep=a}get generatedItems(){return this.preStepItems.concat(this.newStepItems)}}function Vs(n,e,t){return n.resetToolChoice&&e.hasUsedTools(n)?{...t,toolChoice:void 0}:t}async function zs(n,e,t,r,s,a,i){const o=t.filter(b=>!(b instanceof tt)),d=t.filter(b=>b instanceof tt).map(b=>b.rawItem.callId),p=s.functions.filter(b=>d.includes(b.toolCall.callId)),l=await Ws(n,p,a,i),h=l.map(b=>b.runItem),f=await Hs(n,l,i);return f.isFinalOutput?(a.emit("agent_end",i._context,n,f.finalOutput),n.emit("agent_end",i._context,f.finalOutput),new Se(e,r,o,h,{type:"next_step_final_output",output:f.finalOutput})):f.isInterrupted?new Se(e,r,o,h,{type:"next_step_interruption",data:{interruptions:f.interruptions}}):new Se(e,r,o,h,{type:"next_step_run_again"})}async function qs(n,e,t,r,s,a,i){const o=t;let d=s.newItems;const[p,l]=await Promise.all([Ws(n,s.functions,a,i),lu(n,s.computerActions,a,i._context)]);if(d=d.concat(p.map(A=>A.runItem)),d=d.concat(l),s.handoffs.length>0)return await pu(n,e,o,d,r,s.handoffs,a,i._context);const h=await Hs(n,p,i);if(h.isFinalOutput)return a.emit("agent_end",i._context,n,h.finalOutput),n.emit("agent_end",i._context,h.finalOutput),new Se(e,r,o,d,{type:"next_step_final_output",output:h.finalOutput});if(h.isInterrupted)return new Se(e,r,o,d,{type:"next_step_interruption",data:{interruptions:h.interruptions}});const f=d.filter(A=>A instanceof Pn),b=f.length>0?Bs(f[f.length-1].rawItem):void 0;if(!b)return new Se(e,r,o,d,{type:"next_step_run_again"});if(n.outputType==="text")return new Se(e,r,o,d,{type:"next_step_final_output",output:b});{const{parser:A}=qn(n.outputType,"final_output"),[z]=await Gn(()=>A(b));if(z)throw Zt({message:"Invalid output type",data:{error:String(z)}}),new fe("Invalid output type");return new Se(e,r,o,d,{type:"next_step_final_output",output:b})}}function jn(n,e){return{type:"function_call_result",name:n.name,callId:n.callId,status:"completed",output:{type:"text",text:We(e)}}}async function Ws(n,e,t,r){async function s(a){let i=a.toolCall.arguments;if(a.tool.parameters&&(qe(a.tool.parameters)?i=a.tool.parameters.parse(i):i=JSON.parse(i)),await a.tool.needsApproval(r._context,i,a.toolCall.callId)){const d=r._context.isToolApproved({toolName:a.tool.name,callId:a.toolCall.callId});if(d===!1)return As(async p=>{const l="Tool execution was not approved.";return p.setError({message:l,data:{tool_name:a.tool.name,error:`Tool execution for ${a.toolCall.callId} was manually rejected by user.`}}),p.spanData.output=l,{type:"function_output",tool:a.tool,output:l,runItem:new ht(jn(a.toolCall,l),n,l)}},{data:{name:a.tool.name}});if(d!==!0)return{type:"function_approval",tool:a.tool,runItem:new tt(a.toolCall,n)}}return As(async d=>{t.config.traceIncludeSensitiveData&&(d.spanData.input=a.toolCall.arguments);try{t.emit("agent_tool_start",r._context,n,a.tool),n.emit("agent_tool_start",r._context,a.tool);const p=await a.tool.invoke(r._context,a.toolCall.arguments),l=We(p);return t.emit("agent_tool_end",r._context,n,a.tool,l),n.emit("agent_tool_end",r._context,a.tool,l),t.config.traceIncludeSensitiveData&&(d.spanData.output=l),{type:"function_output",tool:a.tool,output:p,runItem:new ht(jn(a.toolCall,p),n,p)}}catch(p){throw d.setError({message:"Error running tool",data:{tool_name:a.tool.name,error:String(p)}}),p}},{data:{name:a.tool.name}})}try{return await Promise.all(e.map(s))}catch(a){throw new Si(`Failed to run function tools: ${a}`,a,r)}}async function du(n,e){const t=e.action;let r;switch(t.type){case"click":await n.click(t.x,t.y,t.button);break;case"double_click":await n.doubleClick(t.x,t.y);break;case"drag":await n.drag(t.path.map(s=>[s.x,s.y]));break;case"keypress":await n.keypress(t.keys);break;case"move":await n.move(t.x,t.y);break;case"screenshot":r=await n.screenshot();break;case"scroll":await n.scroll(t.x,t.y,t.scroll_x,t.scroll_y);break;case"type":await n.type(t.text);break;case"wait":await n.wait();break}if(typeof r<"u"||typeof n.screenshot=="function"&&(r=await n.screenshot(),typeof r<"u"))return r;throw new Error("Computer does not implement screenshot()")}async function lu(n,e,t,r,s=void 0){const a=s??I,i=[];for(const o of e){const d=o.computer.computer,p=o.toolCall;t.emit("agent_tool_start",r,n,o.computer),typeof n.emit=="function"&&n.emit("agent_tool_start",r,o.computer);let l;try{l=await du(d,p)}catch(b){a.error("Failed to execute computer action:",b),l=""}t.emit("agent_tool_end",r,n,o.computer,l),typeof n.emit=="function"&&n.emit("agent_tool_end",r,o.computer,l);const h=l?`data:image/png;base64,${l}`:"",f={type:"computer_call_result",callId:p.callId,output:{type:"computer_screenshot",data:h}};i.push(new ht(f,n,h))}return i}async function pu(n,e,t,r,s,a,i,o){if(r=[...r],a.length===0)return I.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."),new Se(e,s,t,r,{type:"next_step_run_again"});if(a.length>1){const p="Multiple handoffs detected, ignorning this one.";for(let l=1;l<a.length;l++)r.push(new ht(jn(a[l].toolCall,p),n,p))}const d=a[0];return No(async p=>{const l=d.handoff,h=await l.onInvokeHandoff(o,d.toolCall.arguments);if(p.spanData.to_agent=h.name,a.length>1){const b=a.map(A=>A.handoff.agentName);p.setError({message:"Multiple handoffs requested",data:{requested_agents:b}})}r.push(new Sr(jn(d.toolCall,Os(h)),n,h)),i.emit("agent_handoff",o,n,h),n.emit("agent_handoff",o,h);const f=l.inputFilter??i.config.handoffInputFilter;if(f){I.debug("Filtering inputs for handoff"),typeof f!="function"&&p.setError({message:"Invalid input filter",data:{details:"not callable"}});const b={inputHistory:Array.isArray(e)?[...e]:e,preHandoffItems:[...t],newItems:[...r]},A=f(b);e=A.inputHistory,t=A.preHandoffItems,r=A.newItems}return new Se(e,s,t,r,{type:"next_step_handoff",newAgent:h})},{data:{from_agent:n.name}})}const Zn={isFinalOutput:!1,isInterrupted:void 0};async function Hs(n,e,t){if(e.length===0)return Zn;const r=e.filter(i=>i.runItem instanceof tt).map(i=>i.runItem);if(r.length>0)return{isFinalOutput:!1,isInterrupted:!0,interruptions:r};if(n.toolUseBehavior==="run_llm_again")return Zn;const s=e[0];if(n.toolUseBehavior==="stop_on_first_tool")return(s==null?void 0:s.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:We(s.output)}:Zn;const a=n.toolUseBehavior;if(typeof a=="object"){const i=e.find(o=>a.stopAtToolNames.includes(o.tool.name));return(i==null?void 0:i.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:We(i.output)}:Zn}if(typeof a=="function")return a(t._context,e);throw new Q(`Invalid toolUseBehavior: ${a}`,t)}function Ys(n,e){for(const t of e.newStepItems){let r;if(t instanceof Pn)r="message_output_created";else if(t instanceof xr)r="handoff_requested";else if(t instanceof Sr)r="handoff_occurred";else if(t instanceof Lt)r="tool_called";else if(t instanceof ht)r="tool_output";else if(t instanceof br)r="reasoning_item_created";else if(t instanceof tt)r="tool_approval_requested";else{I.warn("Unknown item type: ",t);continue}n._addItem(new ou(r,t))}}class Xs{constructor(){S(this,bt,new Map)}addToolUse(e,t){u(this,bt).set(e,t)}hasUsedTools(e){return u(this,bt).has(e)}toJSON(){return Object.fromEntries(Array.from(u(this,bt).entries()).map(([e,t])=>[e.name,t]))}}bt=new WeakMap;const Mn="1.0",fu=m(Mn),Te=g({name:c()}),Qs=g({object:m("trace.span"),id:c(),trace_id:c(),parent_id:c().nullable(),started_at:c().nullable(),ended_at:c().nullable(),error:g({message:c(),data:ae(c(),U()).optional()}).nullable(),span_data:ae(c(),U())}).extend({previous_span:ao(()=>Qs).optional()}),Ks=g({requests:k(),inputTokens:k(),outputTokens:k(),totalTokens:k()}),ea=g({usage:Ks,output:G(wr),responseId:c().optional()}),ta=ce("type",[g({type:m("message_output_item"),rawItem:Nn,agent:Te}),g({type:m("tool_call_item"),rawItem:Ko.or(Rn),agent:Te}),g({type:m("tool_call_output_item"),rawItem:_r,agent:Te,output:c()}),g({type:m("reasoning_item"),rawItem:vr,agent:Te}),g({type:m("handoff_call_item"),rawItem:Ft,agent:Te}),g({type:m("handoff_output_item"),rawItem:_r,sourceAgent:Te,targetAgent:Te}),g({type:m("tool_approval_item"),rawItem:Ft,agent:Te})]),hu=g({object:m("trace"),id:c(),workflow_name:c(),group_id:c().nullable(),metadata:ae(c(),U())}),mu=g({newItems:G(ta),toolsUsed:G(c()),handoffs:G(g({toolCall:U(),handoff:U()})),functions:G(g({toolCall:U(),tool:U()})),computerActions:G(g({toolCall:U(),computer:U()}))}),na=g({tripwireTriggered:Rt(),outputInfo:U()}),gu=g({guardrail:g({type:m("input"),name:c()}),output:na}),_u=g({guardrail:g({type:m("output"),name:c()}),agentOutput:U(),agent:Te,output:na}),ra=g({$schemaVersion:fu,currentTurn:k(),currentAgent:Te,originalInput:c().or(G(eu)),modelResponses:G(ea),context:g({usage:Ks,approvals:ae(c(),g({approved:G(c()).or(Rt()),rejected:G(c()).or(Rt())})),context:ae(c(),U())}),toolUseTracker:ae(c(),G(c())),maxTurns:k(),currentAgentSpan:Qs.nullable().optional(),noActiveAgentRun:Rt(),inputGuardrailResults:G(gu),outputGuardrailResults:G(_u),currentStep:cu.optional(),lastModelResponse:ea.optional(),generatedItems:G(ta),lastProcessedResponse:mu.optional(),trace:hu.nullable()});class nt{constructor(e,t,r,s){_(this,"_currentTurn",0);_(this,"_currentAgent");_(this,"_originalInput");_(this,"_modelResponses");_(this,"_currentAgentSpan");_(this,"_context");_(this,"_toolUseTracker");_(this,"_generatedItems");_(this,"_maxTurns");_(this,"_noActiveAgentRun",!0);_(this,"_lastTurnResponse");_(this,"_inputGuardrailResults");_(this,"_outputGuardrailResults");_(this,"_currentStep");_(this,"_lastProcessedResponse");_(this,"_trace",null);this._context=e,this._originalInput=structuredClone(t),this._modelResponses=[],this._currentAgentSpan=void 0,this._currentAgent=r,this._toolUseTracker=new Xs,this._generatedItems=[],this._maxTurns=s,this._inputGuardrailResults=[],this._outputGuardrailResults=[],this._trace=Dt()}approve(e,t={alwaysApprove:!1}){this._context.approveTool(e,t)}reject(e,t={alwaysReject:!1}){this._context.rejectTool(e,t)}toJSON(){var r;const e={$schemaVersion:Mn,currentTurn:this._currentTurn,currentAgent:{name:this._currentAgent.name},originalInput:this._originalInput,modelResponses:this._modelResponses.map(s=>({usage:{requests:s.usage.requests,inputTokens:s.usage.inputTokens,outputTokens:s.usage.outputTokens,totalTokens:s.usage.totalTokens},output:s.output,responseId:s.responseId})),context:this._context.toJSON(),toolUseTracker:this._toolUseTracker.toJSON(),maxTurns:this._maxTurns,currentAgentSpan:(r=this._currentAgentSpan)==null?void 0:r.toJSON(),noActiveAgentRun:this._noActiveAgentRun,inputGuardrailResults:this._inputGuardrailResults,outputGuardrailResults:this._outputGuardrailResults.map(s=>({...s,agent:s.agent.toJSON()})),currentStep:this._currentStep,lastModelResponse:this._lastTurnResponse,generatedItems:this._generatedItems.map(s=>s.toJSON()),lastProcessedResponse:this._lastProcessedResponse,trace:this._trace?this._trace.toJSON():null},t=ra.safeParse(e);if(!t.success)throw new xi(`Failed to serialize run state. ${t.error.message}`);return t.data}toString(){return JSON.stringify(this.toJSON())}static async fromString(e,t){var h,f,b,A,z;const[r,s]=await Gn(()=>JSON.parse(t));if(r)throw new Q(`Failed to parse run state. ${r instanceof Error?r.message:String(r)}`);const a=s.$schemaVersion;if(!a)throw new Q("Run state is missing schema version");if(a!==Mn)throw new Q(`Run state schema version ${a} is not supported. Please use version ${Mn}`);const i=ra.parse(JSON.parse(t)),o=yu(e),d=new ft(i.context.context);d._rebuildApprovals(i.context.approvals);const p=o.get(i.currentAgent.name);if(!p)throw new Q(`Agent ${i.currentAgent.name} not found`);const l=new nt(d,"",p,i.maxTurns);l._currentTurn=i.currentTurn,l._toolUseTracker=new Xs;for(const[$,J]of Object.entries(i.toolUseTracker))l._toolUseTracker.addToolUse(o.get($),J);if(i.currentAgentSpan){i.trace||I.warn("Trace is not set, skipping tracing setup");const $=xe().createTrace({traceId:(h=i.trace)==null?void 0:h.id,name:(f=i.trace)==null?void 0:f.workflow_name,groupId:((b=i.trace)==null?void 0:b.group_id)??void 0,metadata:(A=i.trace)==null?void 0:A.metadata});l._currentAgentSpan=sa($,i.currentAgentSpan),l._trace=$}return l._noActiveAgentRun=i.noActiveAgentRun,l._inputGuardrailResults=i.inputGuardrailResults,l._outputGuardrailResults=i.outputGuardrailResults.map($=>({...$,agent:o.get($.agent.name)})),l._currentStep=i.currentStep,l._originalInput=i.originalInput,l._modelResponses=i.modelResponses.map(aa),l._lastTurnResponse=i.lastModelResponse?aa(i.lastModelResponse):void 0,l._generatedItems=i.generatedItems.map($=>ia($,o)),l._lastProcessedResponse=i.lastProcessedResponse?await vu(o,l._currentAgent,i.lastProcessedResponse):void 0,((z=i.currentStep)==null?void 0:z.type)==="next_step_handoff"&&(l._currentStep={type:"next_step_handoff",newAgent:o.get(i.currentStep.newAgent.name)}),l}}function yu(n){const e=new Map,t=[n];for(;t.length>0;){const r=t.shift();if(!e.has(r.name)){e.set(r.name,r);for(const s of r.handoffs)s instanceof mt?e.has(s.name)||t.push(s):s.agent&&(e.has(s.agent.name)||t.push(s.agent))}}return e}function sa(n,e){const t=e.span_data,r=e.previous_span?sa(n,e.previous_span):void 0,s=xe().createSpan({spanId:e.id,traceId:e.trace_id,parentId:e.parent_id??void 0,startedAt:e.started_at??void 0,endedAt:e.ended_at??void 0,data:t},n);return s.previousSpan=r,s}function aa(n){const e=new Dn;return e.requests=n.usage.requests,e.inputTokens=n.usage.inputTokens,e.outputTokens=n.usage.outputTokens,e.totalTokens=n.usage.totalTokens,{usage:e,output:n.output.map(t=>wr.parse(t)),responseId:n.responseId}}function ia(n,e){switch(n.type){case"message_output_item":return new Pn(n.rawItem,e.get(n.agent.name));case"tool_call_item":return new Lt(n.rawItem,e.get(n.agent.name));case"tool_call_output_item":return new ht(n.rawItem,e.get(n.agent.name),n.output);case"reasoning_item":return new br(n.rawItem,e.get(n.agent.name));case"handoff_call_item":return new xr(n.rawItem,e.get(n.agent.name));case"handoff_output_item":return new Sr(n.rawItem,e.get(n.sourceAgent.name),e.get(n.targetAgent.name));case"tool_approval_item":return new tt(n.rawItem,e.get(n.agent.name))}}async function vu(n,e,t){const r=await e.getAllTools(),s=new Map(r.filter(o=>o.type==="function").map(o=>[o.name,o])),a=new Map(r.filter(o=>o.type==="computer").map(o=>[o.name,o])),i=new Map(e.handoffs.map(o=>o instanceof mt?[o.name,Rs(o)]:[o.toolName,o]));return{newItems:t.newItems.map(o=>ia(o,n)),toolsUsed:t.toolsUsed,handoffs:t.handoffs.map(o=>{if(!i.has(o.handoff.toolName))throw new Q(`Handoff ${o.handoff.toolName} not found`);return{toolCall:o.toolCall,handoff:i.get(o.handoff.toolName)}}),functions:await Promise.all(t.functions.map(async o=>{if(!s.has(o.tool.name))throw new Q(`Tool ${o.tool.name} not found`);return{toolCall:o.toolCall,tool:s.get(o.tool.name)}})),computerActions:t.computerActions.map(o=>{const d=o.computer.name;if(!a.has(d))throw new Q(`Computer tool ${d} not found`);return{toolCall:o.toolCall,computer:a.get(d)}})}}const oa=10;function ua(n,e){return n?!1:e?!0:"enabled_without_data"}function $n(n,e){const t=e.map(r=>r.rawItem);return typeof n=="string"&&(n=[{type:"message",role:"user",content:n}]),[...n,...t]}class wu extends Mo{constructor(t={}){super();S(this,ne);_(this,"config");_(this,"inputGuardrailDefs");_(this,"outputGuardrailDefs");this.config={modelProvider:t.modelProvider??Lo(),model:t.model,modelSettings:t.modelSettings,handoffInputFilter:t.handoffInputFilter,inputGuardrails:t.inputGuardrails,outputGuardrails:t.outputGuardrails,tracingDisabled:t.tracingDisabled??!1,traceIncludeSensitiveData:t.traceIncludeSensitiveData??!0,workflowName:t.workflowName??"Agent workflow",traceId:t.traceId,groupId:t.groupId,traceMetadata:t.traceMetadata},this.inputGuardrailDefs=(t.inputGuardrails??[]).map(Es),this.outputGuardrailDefs=(t.outputGuardrails??[]).map(hr)}run(t,r,s={stream:!1,context:void 0}){return r instanceof nt&&r._trace?vo(r._trace,async()=>(r._currentAgentSpan&&Cn(r._currentAgentSpan),s!=null&&s.stream?Z(this,ne,Pr).call(this,t,r,s):Z(this,ne,Nr).call(this,t,r,s))):wo(async()=>s!=null&&s.stream?Z(this,ne,Pr).call(this,t,r,s):Z(this,ne,Nr).call(this,t,r,s))}}ne=new WeakSet,Nr=async function(t,r,s){return ur(async()=>{var i,o;const a=r instanceof nt?r:new nt(s.context instanceof ft?s.context:new ft(s.context),r,t,s.maxTurns??oa);try{for(;;){let d=a._currentAgent.model??this.config.model;if(typeof d=="string"&&(d=await this.config.modelProvider.getModel(d)),a._currentStep=a._currentStep??{type:"next_step_run_again"},a._currentStep.type==="next_step_interruption"){if(I.debug("Continuing from interruption"),!a._lastTurnResponse||!a._lastProcessedResponse)throw new Q("No model response found in previous state",a);const p=await zs(a._currentAgent,a._originalInput,a._generatedItems,a._lastTurnResponse,a._lastProcessedResponse,this,a);a._toolUseTracker.addToolUse(a._currentAgent,a._lastProcessedResponse.toolsUsed),a._originalInput=p.originalInput,a._generatedItems=p.generatedItems,a._currentStep=p.nextStep;continue}if(a._currentStep.type==="next_step_run_again"){const p=a._currentAgent.handoffs.map(On);if(!a._currentAgentSpan){const J=p.map(re=>re.agentName);a._currentAgentSpan=Is({data:{name:a._currentAgent.name,handoffs:J,output_type:a._currentAgent.outputSchemaName}}),a._currentAgentSpan.start(),Cn(a._currentAgentSpan)}const l=await a._currentAgent.getAllTools(),h=l.map(J=>Us(J)),f=p.map(J=>Js(J));if(a._currentAgentSpan&&(a._currentAgentSpan.spanData.tools=l.map(J=>J.name)),a._currentTurn++,a._currentTurn>a._maxTurns)throw(i=a._currentAgentSpan)==null||i.setError({message:"Max turns exceeded",data:{max_turns:a._maxTurns}}),new Hr(`Max turns (${a._maxTurns}) exceeded`,a);I.debug(`Running agent ${a._currentAgent.name} (turn ${a._currentTurn})`),a._currentTurn===1&&await Z(this,ne,Rr).call(this,a);const b=$n(a._originalInput,a._generatedItems);a._noActiveAgentRun&&(a._currentAgent.emit("agent_start",a._context,a._currentAgent),this.emit("agent_start",a._context,a._currentAgent));let A={...this.config.modelSettings,...a._currentAgent.modelSettings};A=Vs(a._currentAgent,a._toolUseTracker,A),a._lastTurnResponse=await d.getResponse({systemInstructions:await a._currentAgent.getSystemPrompt(a._context),input:b,previousResponseId:s.previousResponseId,modelSettings:A,tools:h,outputType:Qr(a._currentAgent.outputType),handoffs:f,tracing:ua(this.config.tracingDisabled,this.config.traceIncludeSensitiveData)}),a._modelResponses.push(a._lastTurnResponse),a._context.usage.add(a._lastTurnResponse.usage),a._noActiveAgentRun=!1;const z=Gs(a._lastTurnResponse,a._currentAgent,l,p);a._lastProcessedResponse=z;const $=await qs(a._currentAgent,a._originalInput,a._generatedItems,a._lastTurnResponse,a._lastProcessedResponse,this,a);a._toolUseTracker.addToolUse(a._currentAgent,a._lastProcessedResponse.toolsUsed),a._originalInput=$.originalInput,a._generatedItems=$.generatedItems,a._currentStep=$.nextStep}if(a._currentStep&&a._currentStep.type==="next_step_final_output")return await Z(this,ne,Dr).call(this,a,a._currentStep.output),this.emit("agent_end",a._context,a._currentAgent,a._currentStep.output),a._currentAgent.emit("agent_end",a._context,a._currentStep.output),new Ls(a);if(a._currentStep&&a._currentStep.type==="next_step_handoff")a._currentAgent=a._currentStep.newAgent,a._currentAgentSpan&&(a._currentAgentSpan.end(),jt(),a._currentAgentSpan=void 0),a._noActiveAgentRun=!0,a._currentStep={type:"next_step_run_again"};else{if(a._currentStep&&a._currentStep.type==="next_step_interruption")return new Ls(a);I.debug("Running next loop")}}}catch(d){throw a._currentAgentSpan&&a._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(d)}}),d}finally{a._currentAgentSpan&&(((o=a._currentStep)==null?void 0:o.type)!=="next_step_interruption"&&a._currentAgentSpan.end(),jt())}})},Rr=async function(t){const r=this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map(Es));if(r.length>0){const s={agent:t._currentAgent,input:t._originalInput,context:t._context};try{const a=await Promise.all(r.map(async i=>Cs(async o=>{const d=await i.run(s);return o.spanData.triggered=d.output.tripwireTriggered,d},{data:{name:i.name}},t._currentAgentSpan)));for(const i of a)if(i.output.tripwireTriggered)throw t._currentAgentSpan&&t._currentAgentSpan.setError({message:"Guardrail tripwire triggered",data:{guardrail:i.guardrail.name}}),new Xr(`Input guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`,i,t)}catch(a){throw a instanceof Xr?a:(t._currentTurn--,new Yr(`Input guardrail failed to complete: ${a}`,a,t))}}},Dr=async function(t,r){const s=this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(hr));if(s.length>0){const a=t._currentAgent.processFinalOutput(r),i={agent:t._currentAgent,agentOutput:a,context:t._context};try{const o=await Promise.all(s.map(async d=>Cs(async p=>{const l=await d.run(i);return p.spanData.triggered=l.output.tripwireTriggered,l},{data:{name:d.name}},t._currentAgentSpan)));for(const d of o)if(d.output.tripwireTriggered)throw t._currentAgentSpan&&t._currentAgentSpan.setError({message:"Guardrail tripwire triggered",data:{guardrail:d.guardrail.name}}),new pn(`Output guardrail triggered: ${JSON.stringify(d.output.outputInfo)}`,d,t)}catch(o){throw o instanceof pn?o:new Yr(`Output guardrail failed to complete: ${o}`,o,t)}}},xa=async function(t,r){var s,a,i;try{for(;;){const o=t.state._currentAgent,d=o.handoffs.map(On),p=await o.getAllTools(),l=p.map(f=>Us(f)),h=d.map(f=>Js(f));if(t.state._currentStep=t.state._currentStep??{type:"next_step_run_again"},t.state._currentStep.type==="next_step_interruption"){if(I.debug("Continuing from interruption"),!t.state._lastTurnResponse||!t.state._lastProcessedResponse)throw new Q("No model response found in previous state",t.state);const f=await zs(t.state._currentAgent,t.state._originalInput,t.state._generatedItems,t.state._lastTurnResponse,t.state._lastProcessedResponse,this,t.state);Ys(t,f),t.state._toolUseTracker.addToolUse(t.state._currentAgent,t.state._lastProcessedResponse.toolsUsed),t.state._originalInput=f.originalInput,t.state._generatedItems=f.generatedItems,t.state._currentStep=f.nextStep;continue}if(t.state._currentStep.type==="next_step_run_again"){if(!t.state._currentAgentSpan){const re=d.map(ue=>ue.agentName);t.state._currentAgentSpan=Is({data:{name:o.name,handoffs:re,tools:p.map(ue=>ue.name),output_type:o.outputSchemaName}}),t.state._currentAgentSpan.start(),Cn(t.state._currentAgentSpan)}if(t.state._currentTurn++,t.state._currentTurn>t.state._maxTurns)throw(s=t.state._currentAgentSpan)==null||s.setError({message:"Max turns exceeded",data:{max_turns:t.state._maxTurns}}),new Hr(`Max turns (${t.state._maxTurns}) exceeded`,t.state);I.debug(`Running agent ${o.name} (turn ${t.state._currentTurn})`);let f=o.model??this.config.model;typeof f=="string"&&(f=await this.config.modelProvider.getModel(f)),t.state._currentTurn===1&&await Z(this,ne,Rr).call(this,t.state);let b={...this.config.modelSettings,...o.modelSettings};b=Vs(o,t.state._toolUseTracker,b);const A=$n(t.input,t.newItems);t.state._noActiveAgentRun&&(o.emit("agent_start",t.state._context,o),this.emit("agent_start",t.state._context,o));let z;for await(const re of f.getStreamedResponse({systemInstructions:await o.getSystemPrompt(t.state._context),input:A,previousResponseId:r.previousResponseId,modelSettings:b,tools:l,handoffs:h,outputType:Qr(o.outputType),tracing:ua(this.config.tracingDisabled,this.config.traceIncludeSensitiveData)})){if(re.type==="response_done"){const ue=$s.parse(re);z={usage:new Dn(ue.response.usage),output:ue.response.output,responseId:ue.response.id}}if(t.cancelled)return;t._addItem(new iu(re))}if(t.state._noActiveAgentRun=!1,!z)throw new fe("Model did not procude a final response!",t.state);t.state._lastTurnResponse=z,t.state._modelResponses.push(t.state._lastTurnResponse);const $=Gs(t.state._lastTurnResponse,o,p,d);t.state._lastProcessedResponse=$;const J=await qs(o,t.state._originalInput,t.state._generatedItems,t.state._lastTurnResponse,t.state._lastProcessedResponse,this,t.state);Ys(t,J),t.state._toolUseTracker.addToolUse(o,$.toolsUsed),t.state._originalInput=J.originalInput,t.state._generatedItems=J.generatedItems,t.state._currentStep=J.nextStep}if(t.state._currentStep.type==="next_step_final_output"){await Z(this,ne,Dr).call(this,t.state,t.state._currentStep.output);return}else{if(t.state._currentStep.type==="next_step_interruption")return;t.state._currentStep.type==="next_step_handoff"?(t.state._currentAgent=(a=t.state._currentStep)==null?void 0:a.newAgent,t.state._currentAgentSpan&&(t.state._currentAgentSpan.end(),jt()),t.state._currentAgentSpan=void 0,t._addItem(new uu(o)),t.state._noActiveAgentRun=!0,t.state._currentStep={type:"next_step_run_again"}):I.debug("Running next loop")}}}catch(o){throw t.state._currentAgentSpan&&t.state._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(o)}}),o}finally{t.state._currentAgentSpan&&(((i=t.state._currentStep)==null?void 0:i.type)!=="next_step_interruption"&&t.state._currentAgentSpan.end(),jt())}},Pr=async function(t,r,s){return s=s??{},ur(async()=>{const a=r instanceof nt?r:new nt(s.context instanceof ft?s.context:new ft(s.context),r,t,s.maxTurns??oa),i=new su({signal:s.signal,state:a});return i.maxTurns=s.maxTurns??a._maxTurns,Z(this,ne,xa).call(this,i,s).then(()=>{i._done()},o=>{i._raiseError(o)}),i})};class mt extends Zo{constructor(t){super();_(this,"name");_(this,"instructions");_(this,"handoffDescription");_(this,"handoffs");_(this,"model");_(this,"modelSettings");_(this,"tools");_(this,"mcpServers");_(this,"inputGuardrails");_(this,"outputGuardrails");_(this,"outputType","text");_(this,"toolUseBehavior");_(this,"resetToolChoice");if(typeof t.name!="string"||t.name.trim()==="")throw new Q("Agent must have a name.");if(this.name=t.name,this.instructions=t.instructions??"",this.handoffDescription=t.handoffDescription??"",this.handoffs=t.handoffs??[],this.model=t.model??"",this.modelSettings=t.modelSettings??{},this.tools=t.tools??[],this.mcpServers=t.mcpServers??[],this.inputGuardrails=t.inputGuardrails??[],this.outputGuardrails=t.outputGuardrails??[],t.outputType&&(this.outputType=t.outputType),this.toolUseBehavior=t.toolUseBehavior??"run_llm_again",this.resetToolChoice=t.resetToolChoice??!0,(t.handoffOutputTypeWarningEnabled===void 0||t.handoffOutputTypeWarningEnabled)&&this.handoffs&&this.outputType){const r=new Set([JSON.stringify(this.outputType)]);for(const s of this.handoffs)"outputType"in s&&s.outputType?r.add(JSON.stringify(s.outputType)):"agent"in s&&s.agent.outputType&&r.add(JSON.stringify(s.agent.outputType));r.size>1&&I.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`)}}static create(t){return new mt({...t,handoffs:t.handoffs,outputType:t.outputType,handoffOutputTypeWarningEnabled:!1})}get outputSchemaName(){if(this.outputType==="text")return"text";if(qe(this.outputType))return"ZodOutput";if(typeof this.outputType=="object")return this.outputType.name;throw new Error(`Unknown output type: ${this.outputType}`)}clone(t){return new mt({...this,...t})}asTool(t){const{toolName:r,toolDescription:s,customOutputExtractor:a}=t;return mn({name:r??fn(this.name),description:s??"",parameters:{type:"object",properties:{input:{type:"string"}},required:["input"],additionalProperties:!1},strict:!0,execute:async(i,o)=>{if(!Ti(i))throw new fe("Agent tool called with invalid input");const p=await new wu().run(this,i.input,{context:o==null?void 0:o.context});return typeof a=="function"?a(p):au(p.rawResponses[p.rawResponses.length-1])}})}async getSystemPrompt(t){return typeof this.instructions=="function"?await this.instructions(t,this):this.instructions}async getMcpTools(){return this.mcpServers.length>0?uo(this.mcpServers):[]}async getAllTools(){return[...await this.getMcpTools(),...this.tools]}processFinalOutput(t){if(this.outputType==="text")return t;if(typeof this.outputType=="object"){const r=JSON.parse(t);return qe(this.outputType)?this.outputType.parse(r):r}throw new Error(`Unknown output type: ${this.outputType}`)}toJSON(){return{name:this.name}}}jo(Ss());class bu extends mt{constructor(t){super(t);_(this,"voice");this.voice=t.voice??"ash"}}function xu(n){return{debounceTextLength:n.debounceTextLength??100}}function Su({policyHint:n,...e}){const t=hr(e),r=n??t.name;return{...t,policyHint:r,run:async s=>{const a=await t.run(s);return{...a,guardrail:{...a.guardrail,policyHint:r}}}}}function Tu(n){return`
⚠️ Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo??{})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim()}const Oe=as("openai-agents:realtime");g({itemId:c()});const ca=ce("role",[g({itemId:c(),previousItemId:c().nullable().optional(),type:m("message"),role:m("system"),content:G(g({type:m("input_text"),text:c()}))}),g({itemId:c(),previousItemId:c().nullable().optional(),type:m("message"),role:m("user"),status:ie(["in_progress","completed"]),content:G(g({type:m("input_text"),text:c()}).or(g({type:m("input_audio"),audio:c().nullable().optional(),transcript:c().nullable()})))}),g({itemId:c(),previousItemId:c().nullable().optional(),type:m("message"),role:m("assistant"),status:ie(["in_progress","completed","incomplete"]),content:G(g({type:m("text"),text:c()}).or(g({type:m("audio"),audio:c().nullable().optional(),transcript:c().nullable().optional()})))})]),da=g({itemId:c(),previousItemId:c().nullable().optional(),type:m("function_call"),status:ie(["in_progress","completed"]),arguments:c(),name:c(),output:c().nullable()}),la=g({id:c().optional().nullable(),conversation_id:c().optional().nullable(),max_output_tokens:k().or(m("inf")).optional().nullable(),metadata:ae(c(),U()).optional().nullable(),modalities:G(c()).optional().nullable(),object:m("realtime.response").optional().nullable(),output:G(U()).optional().nullable(),output_audio_format:c().optional().nullable(),status:ie(["completed","incomplete","failed","cancelled","in_progress"]).optional().nullable(),status_details:ae(c(),U()).optional().nullable(),usage:g({input_tokens:k().optional(),input_tokens_details:ae(c(),U()).optional().nullable(),output_tokens:k().optional(),output_tokens_details:ae(c(),U()).optional().nullable()}).optional().nullable(),voice:c().optional().nullable()}),ku=g({id:c().optional(),audio:c().nullable().optional(),text:c().nullable().optional(),transcript:c().nullable().optional(),type:vs([m("input_text"),m("input_audio"),m("item_reference"),m("text"),m("audio")])}),Ut=g({id:c().optional(),arguments:c().optional(),call_id:c().optional(),content:G(ku).optional(),name:c().optional(),object:m("realtime.item").optional(),output:c().optional(),role:ie(["user","assistant","system"]).optional(),status:ie(["completed","incomplete","in_progress"]).optional(),type:ie(["message","function_call","function_call_output"]).optional()}),Iu=g({type:m("conversation.created"),event_id:c(),conversation:g({id:c().optional(),object:m("realtime.conversation").optional()})}),Au=g({type:m("conversation.item.created"),event_id:c(),item:Ut,previous_item_id:c().nullable().optional()}),Cu=g({type:m("conversation.item.deleted"),event_id:c(),item_id:c()}),Eu=g({type:m("conversation.item.input_audio_transcription.completed"),event_id:c(),item_id:c(),content_index:k(),transcript:c(),logprobs:G(U()).nullable().optional()}),Ou=g({type:m("conversation.item.input_audio_transcription.delta"),event_id:c(),item_id:c(),content_index:k().optional(),delta:c().optional(),logprobs:G(U()).nullable().optional()}),Nu=g({type:m("conversation.item.input_audio_transcription.failed"),event_id:c(),item_id:c(),content_index:k(),error:g({code:c().optional(),message:c().optional(),param:c().optional(),type:c().optional()})}),Ru=g({type:m("conversation.item.retrieved"),event_id:c(),item:Ut}),Du=g({type:m("conversation.item.truncated"),event_id:c(),item_id:c(),audio_end_ms:k(),content_index:k()}),Pu=g({type:m("conversation.item.create"),item:Ut,event_id:c().optional(),previous_item_id:c().nullable().optional()}),ju=g({type:m("conversation.item.delete"),item_id:c(),event_id:c().optional()}),Zu=g({type:m("conversation.item.retrieve"),item_id:c(),event_id:c().optional()}),Mu=g({type:m("conversation.item.truncate"),item_id:c(),audio_end_ms:k(),content_index:k(),event_id:c().optional()}),$u=g({type:m("error"),event_id:c().optional(),error:U().optional()}),Fu=g({type:m("input_audio_buffer.cleared"),event_id:c()}),Lu=g({type:m("input_audio_buffer.append"),audio:c(),event_id:c().optional()}),Uu=g({type:m("input_audio_buffer.clear"),event_id:c().optional()}),Ju=g({type:m("input_audio_buffer.commit"),event_id:c().optional()}),Bu=g({type:m("input_audio_buffer.committed"),event_id:c(),item_id:c(),previous_item_id:c().nullable().optional()}),Gu=g({type:m("input_audio_buffer.speech_started"),event_id:c(),item_id:c(),audio_start_ms:k()}),Vu=g({type:m("input_audio_buffer.speech_stopped"),event_id:c(),item_id:c(),audio_end_ms:k()}),zu=g({type:m("output_audio_buffer.started"),event_id:c()}).passthrough(),qu=g({type:m("output_audio_buffer.stopped"),event_id:c()}).passthrough(),Wu=g({type:m("output_audio_buffer.cleared"),event_id:c()}),Hu=g({type:m("rate_limits.updated"),event_id:c(),rate_limits:G(g({limit:k().optional(),name:ie(["requests","tokens"]).optional(),remaining:k().optional(),reset_seconds:k().optional()}))}),Yu=g({type:m("response.audio.delta"),event_id:c(),item_id:c(),content_index:k(),delta:c(),output_index:k(),response_id:c()}),Xu=g({type:m("response.audio.done"),event_id:c(),item_id:c(),content_index:k(),output_index:k(),response_id:c()}),Qu=g({type:m("response.audio_transcript.delta"),event_id:c(),item_id:c(),content_index:k(),delta:c(),output_index:k(),response_id:c()}),Ku=g({type:m("response.audio_transcript.done"),event_id:c(),item_id:c(),content_index:k(),transcript:c(),output_index:k(),response_id:c()}),ec=g({type:m("response.content_part.added"),event_id:c(),item_id:c(),content_index:k(),output_index:k(),response_id:c(),part:g({audio:c().optional(),text:c().optional(),transcript:c().optional(),type:ie(["text","audio"]).optional()})}),tc=g({type:m("response.content_part.done"),event_id:c(),item_id:c(),content_index:k(),output_index:k(),response_id:c(),part:g({audio:c().optional(),text:c().optional(),transcript:c().optional(),type:ie(["text","audio"]).optional()})}),nc=g({type:m("response.created"),event_id:c(),response:la}),pa=g({type:m("response.done"),event_id:c(),response:la}),rc=g({type:m("response.function_call_arguments.delta"),event_id:c(),item_id:c(),call_id:c(),delta:c(),output_index:k(),response_id:c()}),sc=g({type:m("response.function_call_arguments.done"),event_id:c(),item_id:c(),call_id:c(),arguments:c(),output_index:k(),response_id:c()}),ac=g({type:m("response.output_item.added"),event_id:c(),item:Ut,output_index:k(),response_id:c()}),ic=g({type:m("response.output_item.done"),event_id:c(),item:Ut,output_index:k(),response_id:c()}),oc=g({type:m("response.text.delta"),event_id:c(),item_id:c(),content_index:k(),delta:c(),output_index:k(),response_id:c()}),uc=g({type:m("response.text.done"),event_id:c(),item_id:c(),content_index:k(),text:c(),output_index:k(),response_id:c()}),cc=g({type:m("session.created"),event_id:c(),session:U()}),dc=g({type:m("session.updated"),event_id:c(),session:U()}),lc=g({type:m("response.cancel"),event_id:c().optional(),response_id:c().optional()}),pc=g({type:m("response.create"),event_id:c().optional(),response:U().optional()}),fc=g({type:m("session.update"),event_id:c().optional(),session:U()}),hc=g({type:m("transcription_session.update"),event_id:c().optional(),session:U()}),mc=g({type:m("transcription_session.updated"),event_id:c(),session:U()}),gc=g({type:c(),event_id:c().optional().nullable()}).passthrough(),_c=ce("type",[Iu,Au,Cu,Eu,Ou,Nu,Ru,Du,$u,Fu,Bu,Gu,Vu,zu,qu,Wu,Hu,Yu,Xu,Qu,Ku,ec,tc,nc,pa,rc,sc,ac,ic,oc,uc,cc,dc,mc]);ce("type",[Pu,ju,Zu,Mu,Lu,Uu,Ju,lc,pc,fc,hc]);function Tr(n){const e=JSON.parse(n.data.toString()),t=_c.safeParse(e);if(!t.success){const r=gc.safeParse(e);return r.success?{data:r.data,isGeneric:!0}:{data:null,isGeneric:!0}}return{data:t.data,isGeneric:!1}}const fa="gpt-4o-realtime-preview",Ne={voice:"ash",modalities:["text","audio"],inputAudioFormat:"pcm16",outputAudioFormat:"pcm16",inputAudioTranscription:{model:"gpt-4o-mini-transcribe"},turnDetection:{type:"semantic_vad"}};class kr extends fr{constructor(t={}){super();S(this,at);S(this,nn);S(this,pe,null);_(this,"eventEmitter",new An);v(this,at,t.model??fa),v(this,nn,t.apiKey)}get currentModel(){return u(this,at)}set currentModel(t){v(this,at,t)}async _getApiKey(t){const r=t.apiKey??u(this,nn);return typeof r=="function"?await r():r}_onMessage(t){var a,i,o,d,p,l;const{data:r,isGeneric:s}=Tr(t);if(r!==null&&(this.emit("*",r),!s)){if(r.type==="error"?this.emit("error",{type:"error",error:r}):this.emit(r.type,r),r.type==="response.created"){this.emit("turn_started",{type:"response_started",providerData:{...r}});return}if(r.type==="response.done"){const h=pa.safeParse(r);if(!h.success){Oe.error("Error parsing response done event",h.error);return}const f=((a=h.data.response.usage)==null?void 0:a.input_tokens)??0,b=((i=h.data.response.usage)==null?void 0:i.output_tokens)??0,A=f+b,z=new Dn({inputTokens:f,inputTokensDetails:((o=h.data.response.usage)==null?void 0:o.input_tokens_details)??{},outputTokens:b,outputTokensDetails:((d=h.data.response.usage)==null?void 0:d.output_tokens_details)??{},totalTokens:A});this.emit("usage_update",z),this.emit("turn_done",{type:"response_done",response:{id:h.data.response.id??"",output:h.data.response.output??[],usage:{inputTokens:f,inputTokensDetails:((p=h.data.response.usage)==null?void 0:p.input_tokens_details)??{},outputTokens:b,outputTokensDetails:((l=h.data.response.usage)==null?void 0:l.output_tokens_details)??{},totalTokens:A}}});return}if(r.type==="response.audio.done"){this.emit("audio_done");return}if(r.type==="conversation.item.deleted"){this.emit("item_deleted",{itemId:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.completed"||r.type==="conversation.item.truncated"){this.sendEvent({type:"conversation.item.retrieve",item_id:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.delta"||r.type==="response.text.delta"||r.type==="response.audio_transcript.delta"||r.type==="response.function_call_arguments.delta"){r.type==="response.audio_transcript.delta"&&this.emit("audio_transcript_delta",{type:"transcript_delta",delta:r.delta,itemId:r.item_id,responseId:r.response_id});return}if((r.type==="conversation.item.created"||r.type==="conversation.item.retrieved")&&r.item.type==="message"){const h=r.type==="conversation.item.created"?r.previous_item_id:null,f=ca.parse({itemId:r.item.id,previousItemId:h,type:r.item.type,role:r.item.role,content:r.item.content,status:r.item.status});this.emit("item_update",f);return}if(r.type==="response.output_item.done"||r.type==="response.output_item.added"){const h=r.item;if(h.type==="function_call"&&h.status==="completed"){const f=da.parse({itemId:h.id,type:h.type,status:"in_progress",arguments:h.arguments,name:h.name,output:null});this.emit("item_update",f),this.emit("function_call",{id:h.id,type:"function_call",callId:h.call_id??"",arguments:h.arguments??"",name:h.name??""});return}if(h.type==="message"){const f=ca.parse({itemId:r.item.id,type:r.item.type,role:r.item.role,content:r.item.content,status:"in_progress"});this.emit("item_update",f);return}}}}_onError(t){this.emit("error",{type:"error",error:t})}_onOpen(){this.emit("connected")}_onClose(){this.emit("disconnected")}sendMessage(t,r){this.sendEvent({type:"conversation.item.create",item:typeof t=="string"?{type:"message",role:"user",content:[{type:"input_text",text:t}]}:t,...r}),this.sendEvent({type:"response.create"})}_getMergedSessionConfig(t){var s;return{instructions:t.instructions,model:t.model??u(this,at)??Ne.model,voice:t.voice??Ne.voice,modalities:t.modalities??Ne.modalities,input_audio_format:t.inputAudioFormat??Ne.inputAudioFormat,output_audio_format:t.outputAudioFormat??Ne.outputAudioFormat,input_audio_transcription:t.inputAudioTranscription??Ne.inputAudioTranscription,turn_detection:t.turnDetection??Ne.turnDetection,tool_choice:t.toolChoice??Ne.toolChoice,tools:(s=t.tools)==null?void 0:s.map(a=>({...a,strict:void 0})),...t.providerData??{}}}set _tracingConfig(t){v(this,pe,t)}_updateTracingConfig(t){var r,s,a;if(typeof u(this,pe)>"u"&&v(this,pe,null),t==="auto"){this.sendEvent({type:"session.update",session:{tracing:"auto"}});return}if(typeof u(this,pe)!="string"&&typeof t!="string"){Oe.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");return}if(t===null){Oe.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."),this.sendEvent({type:"session.update",session:{tracing:null}});return}if(u(this,pe)===null||typeof u(this,pe)=="string"){this.sendEvent({type:"session.update",session:{tracing:t}});return}if((t==null?void 0:t.group_id)!==((r=u(this,pe))==null?void 0:r.group_id)||(t==null?void 0:t.metadata)!==((s=u(this,pe))==null?void 0:s.metadata)||(t==null?void 0:t.workflow_name)!==((a=u(this,pe))==null?void 0:a.workflow_name)){Oe.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s",JSON.stringify(u(this,pe)),JSON.stringify(t));return}this.sendEvent({type:"session.update",session:{tracing:t}})}updateSessionConfig(t){const r=this._getMergedSessionConfig(t);this.sendEvent({type:"session.update",session:r})}sendFunctionCallOutput(t,r,s=!0){this.sendEvent({type:"conversation.item.create",item:{type:"function_call_output",output:r,call_id:t.callId}});try{const a=da.parse({itemId:t.id,previousItemId:t.previousItemId,type:"function_call",status:"completed",arguments:t.arguments,name:t.name,output:r});this.emit("item_update",a)}catch(a){Oe.error("Error parsing tool call item",a,t)}s&&this.sendEvent({type:"response.create"})}sendAudio(t,{commit:r=!1}={}){this.sendEvent({type:"input_audio_buffer.append",audio:At(t)}),r&&this.sendEvent({type:"input_audio_buffer.commit"})}resetHistory(t,r){const{removals:s,additions:a,updates:i}=Aa(t,r),o=new Set(s.map(p=>p.itemId));for(const p of i)o.add(p.itemId);if(o.size>0)for(const p of o)this.sendEvent({type:"conversation.item.delete",item_id:p});const d=[...a,...i];for(const p of d)if(p.type==="message"){const l={type:"message",role:p.role,content:p.content,id:p.itemId};p.role!=="system"&&p.status&&(l.status=p.status),this.sendEvent({type:"conversation.item.create",item:l})}else p.type==="function_call"&&Oe.warn("Function calls cannot be manually added or updated at the moment. Ignoring.")}}at=new WeakMap,nn=new WeakMap,pe=new WeakMap;class ha extends kr{constructor(t={}){if(typeof RTCPeerConnection>"u")throw new Error("WebRTC is not supported in this environment");super(t);_(this,"options");S(this,rn);S(this,q,{status:"disconnected",peerConnection:void 0,dataChannel:void 0});S(this,sn);S(this,it,!1);S(this,an,!1);this.options=t,v(this,rn,t.baseUrl??"https://api.openai.com/v1/realtime"),v(this,sn,t.useInsecureApiKey??!1)}get status(){return u(this,q).status}get connectionState(){return u(this,q)}get muted(){return u(this,an)}async connect(t){if(u(this,q).status==="connected")return;u(this,q).status==="connecting"&&Oe.warn("Realtime connection already in progress. Please await original promise");const r=t.model??this.currentModel;this.currentModel=r;const s=t.url??u(this,rn),a=await this._getApiKey(t),i=typeof a=="string"&&a.startsWith("ek_");if(!u(this,sn)&&!i)throw new Q("Using the WebRTC connection in a browser environment requires an insecure API key. Please use a WebSocket connection instead or set the useInsecureApiKey option to true.");return new Promise(async(o,d)=>{try{const p={...t.initialSessionConfig||{},model:this.currentModel},l=new URL(s),h=new RTCPeerConnection,f=h.createDataChannel("oai-events");v(this,q,{status:"connecting",peerConnection:h,dataChannel:f}),this.emit("connection_change",u(this,q).status),f.addEventListener("open",()=>{v(this,q,{status:"connected",peerConnection:h,dataChannel:f}),this.updateSessionConfig(p),this.emit("connection_change",u(this,q).status),this._onOpen(),o()}),f.addEventListener("error",je=>{this.close(),this._onError(je),d(je)}),f.addEventListener("message",je=>{this._onMessage(je);const{data:ke,isGeneric:ga}=Tr(je);!ke||ga||(ke.type==="response.created"?v(this,it,!0):ke.type==="response.done"&&v(this,it,!1),ke.type==="session.created"&&(this._tracingConfig=ke.session.tracing,this._updateTracingConfig(p.tracing??"auto")))});const b=this.options.audioElement??document.createElement("audio");b.autoplay=!0,h.ontrack=je=>{b.srcObject=je.streams[0]};const A=this.options.mediaStream??await navigator.mediaDevices.getUserMedia({audio:!0});h.addTrack(A.getAudioTracks()[0]);const z=await h.createOffer();if(await h.setLocalDescription(z),!z.sdp)throw new Error("Failed to create offer");const $={...this._getMergedSessionConfig(p),model:this.currentModel},J=new FormData;J.append("sdp",z.sdp),J.append("session",JSON.stringify($));const ue={type:"answer",sdp:await(await fetch(l,{method:"POST",body:J,headers:{Authorization:`Bearer ${a}`,"X-OpenAI-Agents-SDK":Oa["X-OpenAI-Agents-SDK"]}})).text()};await h.setRemoteDescription(ue)}catch(p){this.close(),this._onError(p),d(p)}})}sendEvent(t){if(!u(this,q).dataChannel||u(this,q).dataChannel.readyState!=="open")throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");u(this,q).dataChannel.send(JSON.stringify(t))}mute(t){v(this,an,t),u(this,q).peerConnection&&u(this,q).peerConnection.getSenders().forEach(s=>{s.track&&(s.track.enabled=!t)})}close(){if(u(this,q).dataChannel&&u(this,q).dataChannel.close(),u(this,q).peerConnection){const t=u(this,q).peerConnection;t.getSenders().forEach(r=>{var s;(s=r.track)==null||s.stop()}),t.close()}u(this,q).status!=="disconnected"&&(v(this,q,{status:"disconnected",peerConnection:void 0,dataChannel:void 0}),this.emit("connection_change",u(this,q).status),this._onClose())}interrupt(){u(this,it)&&(this.sendEvent({type:"response.cancel"}),v(this,it,!1)),this.sendEvent({type:"output_audio_buffer.clear"})}}rn=new WeakMap,q=new WeakMap,sn=new WeakMap,it=new WeakMap,an=new WeakMap;const yc=globalThis.WebSocket;class ma extends kr{constructor(t={}){super(t);S(this,Ln);S(this,ot);S(this,xt);S(this,K,{status:"disconnected",websocket:void 0});S(this,on);S(this,Pe);S(this,ut);_(this,"_firstAudioTimestamp");_(this,"_audioLengthMs",0);S(this,ct,!1);v(this,xt,`wss://api.openai.com/v1/realtime?model=${this.currentModel}`),v(this,on,t.useInsecureApiKey??!1)}get status(){return u(this,K).status}get connectionState(){return u(this,K)}get muted(){return null}get currentItemId(){return u(this,Pe)}_onAudio(t){this.emit("audio",t)}async connect(t){const r=t.model??this.currentModel;this.currentModel=r,v(this,ot,await this._getApiKey(t)),v(this,xt,t.url??`wss://api.openai.com/v1/realtime?model=${this.currentModel}`);const s={...t.initialSessionConfig||{},model:this.currentModel};await new Promise((a,i)=>{try{Z(this,Ln,Sa).call(this,a,i,s)}catch(o){i(o)}}),await this.updateSessionConfig(s)}sendEvent(t){if(!u(this,K).websocket)throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");u(this,K).websocket.send(JSON.stringify(t))}close(){var t;(t=u(this,K).websocket)==null||t.close(),v(this,Pe,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,v(this,ut,void 0)}mute(t){throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.")}sendAudio(t,r={}){u(this,K).status==="connected"&&super.sendAudio(t,r)}_cancelResponse(){u(this,ct)&&(this.sendEvent({type:"response.cancel"}),v(this,ct,!1))}_interrupt(t){this.emit("audio_interrupted"),this.sendEvent({type:"conversation.item.truncate",item_id:u(this,Pe),content_index:u(this,ut),audio_end_ms:t})}interrupt(){if(!u(this,Pe)||typeof this._firstAudioTimestamp!="number")return;this._cancelResponse();const t=Date.now()-this._firstAudioTimestamp;t>=0&&t<this._audioLengthMs&&this._interrupt(t),v(this,Pe,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,v(this,ut,void 0)}}ot=new WeakMap,xt=new WeakMap,K=new WeakMap,on=new WeakMap,Pe=new WeakMap,ut=new WeakMap,ct=new WeakMap,Ln=new WeakSet,Sa=function(t,r,s){if(u(this,K).websocket){t();return}if(!u(this,ot))throw new Q("API key is not set. Please call `connect()` with an API key first.");if(!u(this,ot).startsWith("ek_")&&!u(this,on))throw new Q("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");const a=["realtime","openai-insecure-api-key."+u(this,ot),"openai-beta.realtime-v1",Na],i=new yc(u(this,xt),a);v(this,K,{status:"connecting",websocket:i}),this.emit("connection_change",u(this,K).status),i.addEventListener("open",()=>{v(this,K,{status:"connected",websocket:i}),this.emit("connection_change",u(this,K).status),this._onOpen(),t()}),i.addEventListener("error",o=>{this._onError(o),v(this,K,{status:"disconnected",websocket:void 0}),this.emit("connection_change",u(this,K).status),r(o)}),i.addEventListener("message",o=>{this._onMessage(o);const{data:d,isGeneric:p}=Tr(o);if(!(!d||p))if(d.type==="response.audio.delta"){v(this,ut,d.content_index),v(this,Pe,d.item_id),this._firstAudioTimestamp===void 0&&(this._firstAudioTimestamp=Date.now(),this._audioLengthMs=0);const l=Y(d.delta);this._audioLengthMs+=l.byteLength/24/2;const h={type:"audio",data:l,responseId:d.response_id};this._onAudio(h)}else d.type==="input_audio_buffer.speech_started"?this.interrupt():d.type==="response.created"?v(this,ct,!0):d.type==="response.done"?v(this,ct,!1):d.type==="session.created"&&(this._tracingConfig=d.session.tracing,this._updateTracingConfig(s.tracing??"auto"))}),i.addEventListener("close",()=>{v(this,K,{status:"disconnected",websocket:void 0}),this.emit("connection_change",u(this,K).status),this._onClose()})};class vc extends An{constructor(t,r={}){super();S(this,W);_(this,"initialAgent");_(this,"options");S(this,L);S(this,P);S(this,un,[]);S(this,D);S(this,St,[]);S(this,Tt);S(this,cn,{});S(this,H,[]);S(this,dn);S(this,kt,{});this.initialAgent=t,this.options=r,typeof r.transport>"u"&&Ca()||r.transport==="webrtc"?v(this,L,new ha):r.transport==="websocket"||typeof r.transport>"u"?v(this,L,new ma):v(this,L,r.transport),v(this,P,t),v(this,D,new ft({...r.context??{},history:u(this,H)})),v(this,St,(r.outputGuardrails??[]).map(Su)),v(this,Tt,xu(r.outputGuardrailSettings??{})),v(this,dn,r.historyStoreAudio??!1)}get transport(){return u(this,L)}get currentAgent(){return u(this,P)}get usage(){return u(this,D).usage}get context(){return u(this,D)}get muted(){return u(this,L).muted}get history(){return u(this,H)}async updateAgent(t){return u(this,P).emit("agent_handoff",u(this,D),t),this.emit("agent_handoff",u(this,D),u(this,P),t),await Z(this,W,Un).call(this,t),await u(this,L).updateSessionConfig(await Z(this,W,Jn).call(this)),t}async connect(t){await Z(this,W,Un).call(this,this.initialAgent),Z(this,W,Ia).call(this),await u(this,L).connect({apiKey:t.apiKey??this.options.apiKey,model:this.options.model,initialSessionConfig:await Z(this,W,Jn).call(this,this.options.config)}),v(this,H,[]),this.emit("history_updated",u(this,H))}updateHistory(t){let r;typeof t=="function"?r=t(u(this,H)):r=t,u(this,L).resetHistory(u(this,H),r)}sendMessage(t,r={}){u(this,L).sendMessage(t,r)}mute(t){u(this,L).mute(t)}close(){v(this,kt,{}),u(this,L).close()}sendAudio(t,r={}){u(this,L).sendAudio(t,r)}interrupt(){u(this,L).interrupt()}async approve(t,r={alwaysApprove:!1}){u(this,D).approveTool(t,r);const s=u(this,P).tools.find(a=>a.name===t.rawItem.name);if(s&&s.type==="function")await Z(this,W,Bn).call(this,t.rawItem,s);else throw new fe(`Tool ${t.rawItem.name} not found`)}async reject(t,r={alwaysReject:!1}){u(this,D).rejectTool(t,r);const s=u(this,P).tools.find(a=>a.name===t.rawItem.name);if(s&&s.type==="function")await Z(this,W,Bn).call(this,t.rawItem,s);else throw new fe(`Tool ${t.rawItem.name} not found`)}}L=new WeakMap,P=new WeakMap,un=new WeakMap,D=new WeakMap,St=new WeakMap,Tt=new WeakMap,cn=new WeakMap,H=new WeakMap,dn=new WeakMap,kt=new WeakMap,W=new WeakSet,Un=async function(t){v(this,P,t);const s=u(this,P).handoffs.map(On).map(a=>a.getHandoffAsFunctionTool());v(this,un,[...(await u(this,P).getAllTools()).filter(a=>a.type==="function"),...s])},Jn=async function(t={}){const r=await u(this,P).getSystemPrompt(u(this,D)),s=this.options.tracingDisabled?null:this.options.workflowName?{workflow_name:this.options.workflowName}:"auto";return s!==null&&s!=="auto"?(this.options.groupId&&(s.group_id=this.options.groupId),this.options.traceMetadata&&(s.metadata=this.options.traceMetadata)):(this.options.groupId||this.options.traceMetadata)&&Oe.warn("In order to set traceMetadata or a groupId you need to specify a workflowName."),{instructions:r,voice:u(this,P).voice,model:this.options.model,tools:u(this,un),tracing:s,...t}},Ta=async function(t,r){const s=await r.onInvokeHandoff(u(this,D),t.arguments);u(this,P).emit("agent_handoff",u(this,D),s),this.emit("agent_handoff",u(this,D),u(this,P),s),await Z(this,W,Un).call(this,s),await u(this,L).updateSessionConfig(await Z(this,W,Jn).call(this));const a=Os(s);return u(this,L).sendFunctionCallOutput(t,a,!0),s},Bn=async function(t,r){u(this,D).context.history=JSON.parse(JSON.stringify(u(this,H)));let s=t.arguments;if(r.parameters&&(qe(r.parameters)?s=r.parameters.parse(s):s=JSON.parse(s)),await r.needsApproval(u(this,D),s,t.callId)){const d=this.context.isToolApproved({toolName:r.name,callId:t.callId});if(d===!1){this.emit("agent_tool_start",u(this,D),u(this,P),r),u(this,P).emit("agent_tool_start",u(this,D),r);const p="Tool execution was not approved.";u(this,L).sendFunctionCallOutput(t,p,!0),this.emit("agent_tool_end",u(this,D),u(this,P),r,p),u(this,P).emit("agent_tool_end",u(this,D),r,p);return}else if(typeof d>"u"){this.emit("tool_approval_requested",u(this,D),u(this,P),{type:"function_approval",tool:r,approvalItem:new tt(t,u(this,P))});return}}this.emit("agent_tool_start",u(this,D),u(this,P),r),u(this,P).emit("agent_tool_start",u(this,D),r),u(this,D).context.history=JSON.parse(JSON.stringify(u(this,H)));const i=await r.invoke(u(this,D),t.arguments),o=We(i);u(this,L).sendFunctionCallOutput(t,o,!0),this.emit("agent_tool_end",u(this,D),u(this,P),r,o),u(this,P).emit("agent_tool_end",u(this,D),r,o)},ka=async function(t){const r=new Map(u(this,P).handoffs.map(On).map(i=>[i.toolName,i])),s=new Map((await u(this,P).getAllTools()).map(i=>[i.name,i])),a=r.get(t.name);if(a)await Z(this,W,Ta).call(this,t,a);else{const i=s.get(t.name);if(i&&i.type==="function")await Z(this,W,Bn).call(this,t,i);else throw new fe(`Tool ${t.name} not found`)}},jr=async function(t,r){if(u(this,St).length===0)return;const s={agent:u(this,P),agentOutput:t,context:u(this,D)},i=(await Promise.all(u(this,St).map(o=>o.run(s)))).find(o=>o.output.tripwireTriggered);if(i){if(u(this,kt)[r])return;u(this,kt)[r]=!0;const o=new pn(`Output guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`,i);this.emit("guardrail_tripped",u(this,D),u(this,P),o),this.interrupt();const d=Tu(i);this.sendMessage(d);return}},Ia=function(){u(this,L).on("*",s=>{this.emit("transport_event",s)}),u(this,L).on("audio",s=>{this.emit("audio",s)}),u(this,L).on("turn_started",()=>{this.emit("agent_start",u(this,D),u(this,P)),u(this,P).emit("agent_start",u(this,D),u(this,P))}),u(this,L).on("turn_done",s=>{const a=s.response.output[s.response.output.length-1],i=Zr(a)??"";this.emit("agent_end",u(this,D),u(this,P),i),u(this,P).emit("agent_end",u(this,D),i),Z(this,W,jr).call(this,i,s.response.id)}),u(this,L).on("audio_done",()=>{this.emit("audio_stopped",u(this,D),u(this,P))});let t=0,r;u(this,L).on("audio_transcript_delta",s=>{try{const a=s.delta,i=s.itemId,o=s.responseId;r!==i&&(r=i,t=0);const p=(u(this,cn)[i]??"")+a;if(u(this,cn)[i]=p,u(this,Tt).debounceTextLength<0)return;const l=Math.floor(p.length/u(this,Tt).debounceTextLength);l>t&&(t=l,Z(this,W,jr).call(this,p,o))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,L).on("item_update",s=>{try{const a=!u(this,H).some(i=>i.itemId===s.itemId);if(v(this,H,Ea(u(this,H),s,u(this,dn))),u(this,D).context.history=u(this,H),a){const i=u(this,H).find(o=>o.itemId===s.itemId);i&&this.emit("history_added",i)}this.emit("history_updated",u(this,H))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,L).on("item_deleted",s=>{try{v(this,H,u(this,H).filter(a=>a.itemId!==s.itemId)),u(this,D).context.history=u(this,H),this.emit("history_updated",u(this,H))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,L).on("function_call",async s=>{try{await Z(this,W,ka).call(this,s)}catch(a){Oe.error("Error handling function call",a),this.emit("error",{type:"error",error:a})}}),u(this,L).on("usage_update",s=>{u(this,D).usage.add(s)}),u(this,L).on("audio_interrupted",()=>{this.emit("audio_interrupted",u(this,D),u(this,P))}),u(this,L).on("error",s=>{this.emit("error",s)})};const wc={base64ToArrayBuffer:Y,arrayBufferToBase64:At,getLastTextFromAudioOutputMessage:Zr};N.DEFAULT_OPENAI_REALTIME_MODEL=fa,N.DEFAULT_OPENAI_REALTIME_SESSION_CONFIG=Ne,N.ModelBehaviorError=fe,N.OpenAIRealtimeBase=kr,N.OpenAIRealtimeWebRTC=ha,N.OpenAIRealtimeWebSocket=ma,N.OutputGuardrailTripwireTriggered=pn,N.RealtimeAgent=bu,N.RealtimeSession=vc,N.UserError=Q,N.tool=mn,N.utils=wc,Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy51bWQuanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uL3V0aWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvcGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvT3B0aW9ucy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3V0aWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9SZWZzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvZXJyb3JNZXNzYWdlcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvdXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvZXJyb3JVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC9kaXN0L2VzbS92My90eXBlcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hbnkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2FycmF5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9iaWdpbnQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2Jvb2xlYW4ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2JyYW5kZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2NhdGNoLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kYXRlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kZWZhdWx0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lZmZlY3RzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9pbnRlcnNlY3Rpb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2xpdGVyYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3N0cmluZy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVjb3JkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9tYXAubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25hdGl2ZUVudW0ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25ldmVyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udWxsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmlvbi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbGFibGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bWJlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb2JqZWN0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vcHRpb25hbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcGlwZWxpbmUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Byb21pc2UubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3NldC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdHVwbGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3VuZGVmaW5lZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5rbm93bi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVhZG9ubHkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZURlZi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3pvZFRvSnNvblNjaGVtYS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2xpYi9SZXNwb25zZXNQYXJzZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9oZWxwZXJzL3pvZC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2Vycm9ycy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3R5cGVHdWFyZHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvbG9jYWxlcy9lbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9wYXJzZVV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9lcnJvclV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvdHlwZXMuanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L21jcC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3NoaW1zL3NoaW1zLWJyb3dzZXIubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2NvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb2Nlc3Nvci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdXRpbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3NwYW5zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy90cmFjZXMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb3ZpZGVyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9jcmVhdGVTcGFucy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvaW5kZXgubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9saWZlY3ljbGUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ndWFyZHJhaWwubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9oYW5kb2ZmLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9yZXN1bHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL21lc3NhZ2VzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXZlbnRzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuSW1wbGVtZW50YXRpb24ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5TdGF0ZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzIiwiLi4vcmVhbHRpbWVBZ2VudC5tanMiLCIuLi9ndWFyZHJhaWwubWpzIiwiLi4vbG9nZ2VyLm1qcyIsIi4uL2l0ZW1zLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lQmFzZS5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMiLCIuLi9zaGltcy9zaGltcy1icm93c2VyLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcyIsIi4uL3JlYWx0aW1lU2Vzc2lvbi5tanMiLCIuLi9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkXG5leHBvcnQgY29uc3QgTUVUQURBVEEgPSB7XG4gICAgXCJuYW1lXCI6IFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIixcbiAgICBcInZlcnNpb25cIjogXCIwLjAuNFwiLFxuICAgIFwidmVyc2lvbnNcIjoge1xuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLXJlYWx0aW1lXCI6IFwiMC4wLjRcIixcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1jb3JlXCI6IFwid29ya3NwYWNlOipcIlxuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBNRVRBREFUQTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldGFkYXRhLm1qcy5tYXAiLCJpbXBvcnQgTUVUQURBVEEgZnJvbSBcIi4vbWV0YWRhdGEubWpzXCI7XG4vKipcbiAqIENvbnZlcnRzIGEgYmFzZTY0IHN0cmluZyB0byBhbiBBcnJheUJ1ZmZlclxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2U2NFxuICogQHJldHVybnMge0FycmF5QnVmZmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgbGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXMuYnVmZmVyO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhbiBBcnJheUJ1ZmZlciB0byBhIGJhc2U2NCBzdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFycmF5QnVmZmVyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChhcnJheUJ1ZmZlcikge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ubmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpKTtcbiAgICByZXR1cm4gYnRvYShiaW5hcnlTdHJpbmcpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIGFuIGF1ZGlvIG91dHB1dCBtZXNzYWdlXG4gKiBAcGFyYW0gaXRlbVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSB7XG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBpdGVtID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBpdGVtICE9PSAnb2JqZWN0JyB8fFxuICAgICAgICAhKCd0eXBlJyBpbiBpdGVtKSB8fFxuICAgICAgICB0eXBlb2YgaXRlbS50eXBlICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAhaXRlbS50eXBlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChpdGVtLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoISgnY29udGVudCcgaW4gaXRlbSkgfHxcbiAgICAgICAgIUFycmF5LmlzQXJyYXkoaXRlbS5jb250ZW50KSB8fFxuICAgICAgICBpdGVtLmNvbnRlbnQubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0Q29udGVudEl0ZW0gPSBpdGVtLmNvbnRlbnRbaXRlbS5jb250ZW50Lmxlbmd0aCAtIDFdO1xuICAgIGlmICghKCd0eXBlJyBpbiBsYXN0Q29udGVudEl0ZW0pIHx8XG4gICAgICAgIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGxhc3RDb250ZW50SXRlbS50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udGV4dCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRleHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBDb21wYXJlIHR3byBjb252ZXJzYXRpb24gaGlzdG9yaWVzIHRvIGRldGVybWluZSB0aGUgcmVtb3ZhbHMsIGFkZGl0aW9ucywgYW5kIHVwZGF0ZXMuXG4gKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeS5cbiAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5LlxuICogQHJldHVybnMgQSBkaWZmIG9mIHRoZSB0d28gaGlzdG9yaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgY29uc3QgcmVtb3ZhbHMgPSBvbGRIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW5ld0hpc3Rvcnkuc29tZSgobmV3SXRlbSkgPT4gbmV3SXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgYWRkaXRpb25zID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQgJiZcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkob2xkSXRlbSkgIT09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZhbHMsXG4gICAgICAgIGFkZGl0aW9ucyxcbiAgICAgICAgdXBkYXRlcyxcbiAgICB9O1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBXZWJSVEMuXG4gKiBAcmV0dXJucyBUcnVlIGlmIFdlYlJUQyBpcyBzdXBwb3J0ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1dlYlJUQ1N1cHBvcnQoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3dbJ1JUQ1BlZXJDb25uZWN0aW9uJ10gIT09ICd1bmRlZmluZWQnO1xufVxuLyoqXG4gKiBSZW1vdmVzIHRoZSBhdWRpbyBkYXRhIGZyb20gYWxsIGNvbnRlbnQgaW4gYSBtZXNzYWdlIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC5cbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICd1c2VyJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09ICdpbnB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbn1cbi8qKlxuICogVXBkYXRlcyB0aGUgcmVhbHRpbWUgaGlzdG9yeSBhcnJheSBiYXNlZCBvbiB0aGUgaW5jb21pbmcgZXZlbnQgYW5kIG9wdGlvbnMuXG4gKiBAcGFyYW0gaGlzdG9yeSAtIFRoZSBjdXJyZW50IGhpc3RvcnkgYXJyYXkuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcHJvY2VzcyAoUmVhbHRpbWVJdGVtKS5cbiAqIEBwYXJhbSBzaG91bGRJbmNsdWRlQXVkaW9EYXRhIC0gV2hldGhlciB0byBpbmNsdWRlIGF1ZGlvIGRhdGEgaW4gbWVzc2FnZSBpdGVtcy5cbiAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIGhpc3RvcnkgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSZWFsdGltZUhpc3RvcnkoaGlzdG9yeSwgZXZlbnQsIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEpIHtcbiAgICBjb25zdCBuZXdFdmVudCA9ICFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICA/IHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoZXZlbnQpXG4gICAgICAgIDogZXZlbnQ7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGl0ZW1cbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChpZHggPT09IGV4aXN0aW5nSW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3RXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNob3VsZEluY2x1ZGVBdWRpb0RhdGEgJiYgaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnQucHJldmlvdXNJdGVtSWQpIHtcbiAgICAgICAgLy8gSW5zZXJ0IGFmdGVyIHByZXZpb3VzSXRlbUlkIGlmIGZvdW5kLCBlbHNlIGF0IGVuZFxuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBoaXN0b3J5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50LnByZXZpb3VzSXRlbUlkKTtcbiAgICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZSgwLCBwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgICAgICAgICAuLi5oaXN0b3J5LnNsaWNlKHByZXZJbmRleCArIDEpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4uaGlzdG9yeSwgbmV3RXZlbnRdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBoZWFkZXJzIHRvIHVzZSBmb3IgdGhlIFJlYWx0aW1lIEFQSS5cbiAqL1xuZXhwb3J0IGNvbnN0IEhFQURFUlMgPSB7XG4gICAgJ1VzZXItQWdlbnQnOiBgQWdlbnRzL0phdmFTY3JpcHQgJHtNRVRBREFUQS52ZXJzaW9ufWAsXG4gICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBgb3BlbmFpLWFnZW50cy1zZGsuJHtNRVRBREFUQS52ZXJzaW9ufWAsXG59O1xuLyoqXG4gKiBCcm93c2VyIHdlYnNvY2tldCBoZWFkZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFdFQlNPQ0tFVF9NRVRBID0gYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlRXhlY3V0ZShmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgYXdhaXQgZm4oKV07XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gW2Vycm9yLCBudWxsXTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYWZlRXhlY3V0ZS5tanMubWFwIiwiaW1wb3J0IHsgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yLCBMZW5ndGhGaW5pc2hSZWFzb25FcnJvciwgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCwgcGFyc2VyKSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi5yZXNwb25zZV9mb3JtYXQgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQpIHtcbiAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0Py5bJyRicmFuZCddID09PSAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0Jztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUGFyc2VDaGF0Q29tcGxldGlvbihjb21wbGV0aW9uLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNvbXBsZXRpb24sXG4gICAgICAgICAgICBjaG9pY2VzOiBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uY2hvaWNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2hvaWNlLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGNvbnN0IGNob2ljZXMgPSBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExlbmd0aEZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnY29udGVudF9maWx0ZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHM/Lm1hcCgodG9vbENhbGwpID0+IHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkpID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgcGFyc2VkOiBjaG9pY2UubWVzc2FnZS5jb250ZW50ICYmICFjaG9pY2UubWVzc2FnZS5yZWZ1c2FsID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgY2hvaWNlcyB9O1xufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNvbnRlbnQpIHtcbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSAhPT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgPT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgaWYgKCckcGFyc2VSYXcnIGluIHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Zvcm1hdCA9IHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaW5wdXRUb29sLmZ1bmN0aW9uPy5uYW1lID09PSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi50b29sQ2FsbCxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIC4uLnRvb2xDYWxsLmZ1bmN0aW9uLFxuICAgICAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgPyBpbnB1dFRvb2wuJHBhcnNlUmF3KHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICA6IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0ID8gSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChwYXJhbXMudG9vbHM/LnNvbWUoKHQpID0+IGlzQXV0b1BhcnNhYmxlVG9vbCh0KSB8fCAodC50eXBlID09PSAnZnVuY3Rpb24nICYmIHQuZnVuY3Rpb24uc3RyaWN0ID09PSB0cnVlKSkgPz8gZmFsc2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZXIubWpzLm1hcCIsImV4cG9ydCBjb25zdCBpZ25vcmVPdmVycmlkZSA9IFN5bWJvbCgnTGV0IHpvZFRvSnNvblNjaGVtYSBkZWNpZGUgb24gd2hpY2ggcGFyc2VyIHRvIHVzZScpO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICRyZWZTdHJhdGVneTogJ3Jvb3QnLFxuICAgIGVmZmVjdFN0cmF0ZWd5OiAnaW5wdXQnLFxuICAgIHBpcGVTdHJhdGVneTogJ2FsbCcsXG4gICAgZGF0ZVN0cmF0ZWd5OiAnZm9ybWF0OmRhdGUtdGltZScsXG4gICAgbWFwU3RyYXRlZ3k6ICdlbnRyaWVzJyxcbiAgICBudWxsYWJsZVN0cmF0ZWd5OiAnZnJvbS10YXJnZXQnLFxuICAgIHJlbW92ZUFkZGl0aW9uYWxTdHJhdGVneTogJ3Bhc3N0aHJvdWdoJyxcbiAgICBkZWZpbml0aW9uUGF0aDogJ2RlZmluaXRpb25zJyxcbiAgICB0YXJnZXQ6ICdqc29uU2NoZW1hNycsXG4gICAgc3RyaWN0VW5pb25zOiBmYWxzZSxcbiAgICBlcnJvck1lc3NhZ2VzOiBmYWxzZSxcbiAgICBtYXJrZG93bkRlc2NyaXB0aW9uOiBmYWxzZSxcbiAgICBwYXR0ZXJuU3RyYXRlZ3k6ICdlc2NhcGUnLFxuICAgIGFwcGx5UmVnZXhGbGFnczogZmFsc2UsXG4gICAgZW1haWxTdHJhdGVneTogJ2Zvcm1hdDplbWFpbCcsXG4gICAgYmFzZTY0U3RyYXRlZ3k6ICdjb250ZW50RW5jb2Rpbmc6YmFzZTY0JyxcbiAgICBuYW1lU3RyYXRlZ3k6ICdyZWYnLFxufTtcbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0T3B0aW9ucyA9IChvcHRpb25zKSA9PiB7XG4gICAgLy8gV2UgbmVlZCB0byBhZGQgYGRlZmluaXRpb25zYCBoZXJlIGFzIHdlIG1heSBtdXRhdGUgaXRcbiAgICByZXR1cm4gKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucyxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3B0aW9ucy5tanMubWFwIiwiZXhwb3J0IGNvbnN0IHpvZERlZiA9ICh6b2RTY2hlbWEpID0+IHtcbiAgICByZXR1cm4gJ19kZWYnIGluIHpvZFNjaGVtYSA/IHpvZFNjaGVtYS5fZGVmIDogem9kU2NoZW1hO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iaikge1xuICAgIGlmICghb2JqKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IF9rIGluIG9iailcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9PcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmV4cG9ydCBjb25zdCBnZXRSZWZzID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBfb3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKG9wdGlvbnMpO1xuICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gX29wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgWy4uLl9vcHRpb25zLmJhc2VQYXRoLCBfb3B0aW9ucy5kZWZpbml0aW9uUGF0aCwgX29wdGlvbnMubmFtZV1cbiAgICAgICAgOiBfb3B0aW9ucy5iYXNlUGF0aDtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5fb3B0aW9ucyxcbiAgICAgICAgY3VycmVudFBhdGg6IGN1cnJlbnRQYXRoLFxuICAgICAgICBwcm9wZXJ0eVBhdGg6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VlblJlZnM6IG5ldyBTZXQoKSxcbiAgICAgICAgc2VlbjogbmV3IE1hcChPYmplY3QuZW50cmllcyhfb3B0aW9ucy5kZWZpbml0aW9ucykubWFwKChbbmFtZSwgZGVmXSkgPT4gW1xuICAgICAgICAgICAgem9kRGVmKGRlZiksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVmOiB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICAgICAgICAgICAgICAvLyBSZXNvbHV0aW9uIG9mIHJlZmVyZW5jZXMgd2lsbCBiZSBmb3JjZWQgZXZlbiB0aG91Z2ggc2Vlbiwgc28gaXQncyBvayB0aGF0IHRoZSBzY2hlbWEgaXMgdW5kZWZpbmVkIGhlcmUgZm9yIG5vdy5cbiAgICAgICAgICAgICAgICBqc29uU2NoZW1hOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKSksXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWZzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcbiAgICBpZiAoIXJlZnM/LmVycm9yTWVzc2FnZXMpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHJlcy5lcnJvck1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAuLi5yZXMuZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgW2tleV06IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIGtleSwgdmFsdWUsIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIHJlc1trZXldID0gdmFsdWU7XG4gICAgYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JNZXNzYWdlcy5tanMubWFwIiwiZXhwb3J0IHZhciB1dGlsO1xuKGZ1bmN0aW9uICh1dGlsKSB7XG4gICAgdXRpbC5hc3NlcnRFcXVhbCA9IChfKSA9PiB7IH07XG4gICAgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG4gICAgdXRpbC5hc3NlcnRJcyA9IGFzc2VydElzO1xuICAgIGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgICB1dGlsLmFzc2VydE5ldmVyID0gYXNzZXJ0TmV2ZXI7XG4gICAgdXRpbC5hcnJheVRvRW51bSA9IChpdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBvYmpbaXRlbV0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKG9iaikuZmlsdGVyKChrKSA9PiB0eXBlb2Ygb2JqW29ialtrXV0gIT09IFwibnVtYmVyXCIpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgdmFsaWRLZXlzKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RWYWx1ZXMoZmlsdGVyZWQpO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RWYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdEtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmpbZV07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RLZXlzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSBcImZ1bmN0aW9uXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgID8gKG9iaikgPT4gT2JqZWN0LmtleXMob2JqKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICB1dGlsLmZpbmQgPSAoYXJyLCBjaGVja2VyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgICAgIGlmIChjaGVja2VyKGl0ZW0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICB1dGlsLmlzSW50ZWdlciA9IHR5cGVvZiBOdW1iZXIuaXNJbnRlZ2VyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyAodmFsKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbCkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUodmFsKSAmJiBNYXRoLmZsb29yKHZhbCkgPT09IHZhbDtcbiAgICBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcIiB8IFwiKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgPyBgJyR7dmFsfSdgIDogdmFsKSkuam9pbihzZXBhcmF0b3IpO1xuICAgIH1cbiAgICB1dGlsLmpvaW5WYWx1ZXMgPSBqb2luVmFsdWVzO1xuICAgIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyID0gKF8sIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xufSkodXRpbCB8fCAodXRpbCA9IHt9KSk7XG5leHBvcnQgdmFyIG9iamVjdFV0aWw7XG4oZnVuY3Rpb24gKG9iamVjdFV0aWwpIHtcbiAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmZpcnN0LFxuICAgICAgICAgICAgLi4uc2Vjb25kLCAvLyBzZWNvbmQgb3ZlcndyaXRlcyBmaXJzdFxuICAgICAgICB9O1xuICAgIH07XG59KShvYmplY3RVdGlsIHx8IChvYmplY3RVdGlsID0ge30pKTtcbmV4cG9ydCBjb25zdCBab2RQYXJzZWRUeXBlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJzdHJpbmdcIixcbiAgICBcIm5hblwiLFxuICAgIFwibnVtYmVyXCIsXG4gICAgXCJpbnRlZ2VyXCIsXG4gICAgXCJmbG9hdFwiLFxuICAgIFwiYm9vbGVhblwiLFxuICAgIFwiZGF0ZVwiLFxuICAgIFwiYmlnaW50XCIsXG4gICAgXCJzeW1ib2xcIixcbiAgICBcImZ1bmN0aW9uXCIsXG4gICAgXCJ1bmRlZmluZWRcIixcbiAgICBcIm51bGxcIixcbiAgICBcImFycmF5XCIsXG4gICAgXCJvYmplY3RcIixcbiAgICBcInVua25vd25cIixcbiAgICBcInByb21pc2VcIixcbiAgICBcInZvaWRcIixcbiAgICBcIm5ldmVyXCIsXG4gICAgXCJtYXBcIixcbiAgICBcInNldFwiLFxuXSk7XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQ7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN0cmluZztcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/IFpvZFBhcnNlZFR5cGUubmFuIDogWm9kUGFyc2VkVHlwZS5udW1iZXI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmZ1bmN0aW9uO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5iaWdpbnQ7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5vYmplY3Q7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmtub3duO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyB1dGlsIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kSXNzdWVDb2RlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJpbnZhbGlkX3R5cGVcIixcbiAgICBcImludmFsaWRfbGl0ZXJhbFwiLFxuICAgIFwiY3VzdG9tXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3JcIixcbiAgICBcImludmFsaWRfZW51bV92YWx1ZVwiLFxuICAgIFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgICBcImludmFsaWRfYXJndW1lbnRzXCIsXG4gICAgXCJpbnZhbGlkX3JldHVybl90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2RhdGVcIixcbiAgICBcImludmFsaWRfc3RyaW5nXCIsXG4gICAgXCJ0b29fc21hbGxcIixcbiAgICBcInRvb19iaWdcIixcbiAgICBcImludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzXCIsXG4gICAgXCJub3RfbXVsdGlwbGVfb2ZcIixcbiAgICBcIm5vdF9maW5pdGVcIixcbl0pO1xuZXhwb3J0IGNvbnN0IHF1b3RlbGVzc0pzb24gPSAob2JqKSA9PiB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvXCIoW15cIl0rKVwiOi9nLCBcIiQxOlwiKTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZ2V0IGVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZElzc3VlcyA9IChzdWJzID0gW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCAuLi5zdWJzXTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvdG8gPSBuZXcudGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IGFjdHVhbFByb3RvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgfVxuICAgIGZvcm1hdChfbWFwcGVyKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChpc3N1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZS5tZXNzYWdlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgIGNvbnN0IHByb2Nlc3NFcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpc3N1ZSBvZiBlcnJvci5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWUudW5pb25FcnJvcnMubWFwKHByb2Nlc3NFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5yZXR1cm5UeXBlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfYXJndW1lbnRzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLmFyZ3VtZW50c0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRFcnJvcnMuX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnIgPSBmaWVsZEVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGlzc3VlLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGlzc3VlLnBhdGhbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hbCA9IGkgPT09IGlzc3VlLnBhdGgubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY29uc3QgZXJyb3JBcnJheTogYW55ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlcnJvckFycmF5Ll9lcnJvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgZXJyb3JBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gY3VycltlbF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHByb2Nlc3NFcnJvcih0aGlzKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkRXJyb3JzO1xuICAgIH1cbiAgICBzdGF0aWMgYXNzZXJ0KHZhbHVlKSB7XG4gICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgWm9kRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBhIFpvZEVycm9yOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuaXNzdWVzLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICBmbGF0dGVuKG1hcHBlciA9IChpc3N1ZSkgPT4gaXNzdWUubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHt9O1xuICAgICAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIHRoaXMuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoc3ViLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSA9IGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSB8fCBbXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgfTtcbiAgICBpZiAoZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSB7XG4gICAgICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRlZi5taW5MZW5ndGgpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5JdGVtcycsIGRlZi5taW5MZW5ndGgudmFsdWUsIGRlZi5taW5MZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhJdGVtcycsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAnaW50NjQnLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpZ2ludC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbkRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnJhbmRlZERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2gubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gb3ZlcnJpZGVEYXRlU3RyYXRlZ3kgPz8gcmVmcy5kYXRlU3RyYXRlZ3k7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtLCBpKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUtdGltZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdmb3JtYXQ6ZGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmLCByZWZzKTtcbiAgICB9XG59XG5jb25zdCBpbnRlZ2VyRGF0ZVBhcnNlciA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAndW5peC10aW1lJyxcbiAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgICAgIGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKCksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gcmVmcy5lZmZlY3RTdHJhdGVneSA9PT0gJ2lucHV0JyA/IHBhcnNlRGVmKF9kZWYuc2NoZW1hLl9kZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgOiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVmZmVjdHMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW1EZWYoZGVmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgIGVudW06IFsuLi5kZWYudmFsdWVzXSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoJ3R5cGUnIGluIHR5cGUgJiYgdHlwZS50eXBlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWxsT2YnIGluIHR5cGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgICAgICB9KSxcbiAgICAgICAgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcxJ10sXG4gICAgICAgIH0pLFxuICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICAgIGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5JyA/IHsgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG4gICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBzY2hlbWFzIGlzIGFuIGFsbE9mLCBtZXJnZSB0aGVtIGludG8gYSBzaW5nbGUgYWxsT2ZcbiAgICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICAgICAgaWYgKGlzSnNvblNjaGVtYTdBbGxPZlR5cGUoc2NoZW1hKSkge1xuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaCguLi5zY2hlbWEuYWxsT2YpO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS51bmV2YWx1YXRlZFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgbm8gdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIHNldCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVyZ2VkIHNjaGVtYSBzaG91bGQgYWxzbyBoYXZlIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXRcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICAgICAgaWYgKCdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCAuLi5yZXN0IH0gPSBzY2hlbWE7XG4gICAgICAgICAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFzIHNvb24gYXMgb25lIG9mIHRoZSBzY2hlbWFzIGhhcyBhZGRpdGlvbmFsUHJvcGVydGllcyBzZXQgbm90IHRvIGZhbHNlLCB3ZSBhbGxvdyB1bmV2YWx1YXRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRBbGxPZi5wdXNoKG5lc3RlZFNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID9cbiAgICAgICAge1xuICAgICAgICAgICAgYWxsT2Y6IG1lcmdlZEFsbE9mLFxuICAgICAgICAgICAgLi4udW5ldmFsdWF0ZWRQcm9wZXJ0aWVzLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0aW9uLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSAnYmlnaW50JyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnYm9vbGVhbicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwYXJzZWRUeXBlID09PSAnYmlnaW50JyA/ICdpbnRlZ2VyJyA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICBjb25zdDogZGVmLnZhbHVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXRlcmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5sZXQgZW1vamlSZWdleDtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2Jsb2IvbWFzdGVyL3NyYy90eXBlcy50cy5cbiAqXG4gKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4gKi9cbmV4cG9ydCBjb25zdCB6b2RQYXR0ZXJucyA9IHtcbiAgICAvKipcbiAgICAgKiBgY2Agd2FzIGNoYW5nZWQgdG8gYFtjQ11gIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgICBjdWlkMjogL15bMC05YS16XSskLyxcbiAgICB1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcbiAgICAvKipcbiAgICAgKiBgYS16YCB3YXMgYWRkZWQgdG8gcmVwbGljYXRlIC9pIGZsYWdcbiAgICAgKi9cbiAgICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdGVkIGEgdmFsaWQgVW5pY29kZSBSZWdFeHBcbiAgICAgKlxuICAgICAqIExhemlseSBpbnN0YW50aWF0ZSBzaW5jZSB0aGlzIHR5cGUgb2YgcmVnZXggaXNuJ3Qgc3VwcG9ydGVkXG4gICAgICogaW4gYWxsIGVudnMgKGUuZy4gUmVhY3QgTmF0aXZlKS5cbiAgICAgKlxuICAgICAqIFNlZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvaXNzdWVzLzI0MzNcbiAgICAgKiBGaXggaW4gWm9kOlxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9jb21taXQvOTM0MGZkNTFlNDg1NzZhNzVhZGM5MTliZmY2NWRiYzRhNWQ0Yzk5YlxuICAgICAqL1xuICAgIGVtb2ppOiAoKSA9PiB7XG4gICAgICAgIGlmIChlbW9qaVJlZ2V4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVtb2ppUmVnZXggPSBSZWdFeHAoJ14oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskJywgJ3UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1vamlSZWdleDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NDogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLyxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICBpcHY2OiAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLyxcbiAgICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgICBuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWZzLnBhdHRlcm5TdHJhdGVneSA9PT0gJ2VzY2FwZScgPyBlc2NhcGVOb25BbHBoYU51bWVyaWModmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5MZW5ndGgnLCB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4TGVuZ3RoJywgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6ZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdlbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0Omlkbi1lbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2lkbi1lbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0dGVybjp6b2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbWFpbCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3VyaScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1dWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3V1aWQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkMic6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkMiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtwcm9jZXNzUGF0dGVybihjaGVjay52YWx1ZSl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmRzV2l0aCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAoYCR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfSRgKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUtdGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd0aW1lJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cmF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2R1cmF0aW9uJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5jbHVkZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAocHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdpcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY2JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vtb2ppJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtb2ppLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndWxpZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFzZTY0Jzoge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDpiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2JpbmFyeScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudEVuY29kaW5nOmJhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2NvbnRlbnRFbmNvZGluZycsICdiYXNlNjQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5iYXNlNjQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICduYW5vaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0b0xvd2VyQ2FzZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9VcHBlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyaW0nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbignJyk7XG5jb25zdCBhZGRGb3JtYXQgPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8IHNjaGVtYS5hbnlPZj8uc29tZSgoeCkgPT4geC5mb3JtYXQpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogc2NoZW1hLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgIGZvcm1hdDogdmFsdWUsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdmb3JtYXQnLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCByZWdleCwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEucGF0dGVybiB8fCBzY2hlbWEuYWxsT2Y/LnNvbWUoKHgpID0+IHgucGF0dGVybikpIHtcbiAgICAgICAgaWYgKCFzY2hlbWEuYWxsT2YpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVybikge1xuICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIC4uLihzY2hlbWEuZXJyb3JNZXNzYWdlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBzY2hlbWEuZXJyb3JNZXNzYWdlLnBhdHRlcm4gfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm46IHByb2Nlc3NSZWdFeHAocmVnZXgsIHJlZnMpLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ3BhdHRlcm4nLCBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbi8vIE11dGF0ZSB6LnN0cmluZy5yZWdleCgpIGluIGEgYmVzdCBhdHRlbXB0IHRvIGFjY29tbW9kYXRlIGZvciByZWdleCBmbGFncyB3aGVuIGFwcGx5UmVnZXhGbGFncyBpcyB0cnVlXG5jb25zdCBwcm9jZXNzUmVnRXhwID0gKHJlZ2V4T3JGdW5jdGlvbiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIHJlZ2V4T3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHJlZ2V4T3JGdW5jdGlvbigpIDogcmVnZXhPckZ1bmN0aW9uO1xuICAgIGlmICghcmVmcy5hcHBseVJlZ2V4RmxhZ3MgfHwgIXJlZ2V4LmZsYWdzKVxuICAgICAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICAgIC8vIEN1cnJlbnRseSBoYW5kbGVkIGZsYWdzXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdpJyksIC8vIENhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ20nKSwgLy8gYF5gIGFuZCBgJGAgbWF0Y2hlcyBhZGphY2VudCB0byBuZXdsaW5lIGNoYXJhY3RlcnNcbiAgICAgICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ3MnKSwgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgICB9O1xuICAgIC8vIFRoZSBnZW5lcmFsIHByaW5jaXBsZSBoZXJlIGlzIHRvIHN0ZXAgdGhyb3VnaCBlYWNoIGNoYXJhY3Rlciwgb25lIGF0IGEgdGltZSwgYXBwbHlpbmcgbXV0YXRpb25zIGFzIGZsYWdzIHJlcXVpcmUuIFdlIGtlZXAgdHJhY2sgd2hlbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCwgYW5kIHdoZW4gaXQncyBpbnNpZGUgYSBncm91cCAvbGlrZSBbdGhpc10vIG9yIChhbHNvKSBhIHJhbmdlIGxpa2UgL1thLXpdLy4gVGhlIGZvbGxvd2luZyBpcyBmYWlybHkgYnJpdHRsZSBpbXBlcmF0aXZlIGNvZGU7IGVkaXQgYXQgeW91ciBwZXJpbCFcbiAgICBjb25zdCBzb3VyY2UgPSBmbGFncy5pID8gcmVnZXguc291cmNlLnRvTG93ZXJDYXNlKCkgOiByZWdleC5zb3VyY2U7XG4gICAgbGV0IHBhdHRlcm4gPSAnJztcbiAgICBsZXQgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXNjYXBlZCkge1xuICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncy5pKSB7XG4gICAgICAgICAgICBpZiAoaW5DaGFyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkNoYXJSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpIC0gMl19LSR7c291cmNlW2ldfWAudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2kgKyAxXSA9PT0gJy0nICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VbaV0ubWF0Y2goL1thLXpdLykpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MubSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKF58KD88PVtcXHJcXG5dKSlgO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAoJHwoPz1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MucyAmJiBzb3VyY2VbaV0gPT09ICcuJykge1xuICAgICAgICAgICAgcGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICBpZiAoc291cmNlW2ldID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGlzRXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSAnXScpIHtcbiAgICAgICAgICAgIGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ1snKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVnZXhUZXN0ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3N0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgJiYgZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgICAgICAgIFtrZXldOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIGtleV0sXG4gICAgICAgICAgICAgICAgfSkgPz8ge30sXG4gICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgfSkgPz8ge30sXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKHBhcnNlU3RyaW5nRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHJlZnMpKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiAoa2V5ID09PSAndHlwZScgPyBhY2MgOiB7IC4uLmFjYywgW2tleV06IHZhbHVlIH0pLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9yZWNvcmQubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMubWFwU3RyYXRlZ3kgPT09ICdyZWNvcmQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gcGFyc2VEZWYoZGVmLmtleVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcwJ10sXG4gICAgfSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgJ2l0ZW1zJywgJzEnXSxcbiAgICB9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBtYXhJdGVtczogMTI1LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF0aXZlRW51bURlZihkZWYpIHtcbiAgICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICAgIGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09ICdudW1iZXInO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgIHBhcnNlZFR5cGVzWzBdID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgJ3N0cmluZydcbiAgICAgICAgICAgICAgICA6ICdudW1iZXInXG4gICAgICAgICAgICA6IFsnc3RyaW5nJywgJ251bWJlciddLFxuICAgICAgICBlbnVtOiBhY3R1YWxWYWx1ZXMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZUVudW0ubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5ldmVyRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsRGVmKHJlZnMpIHtcbiAgICByZXR1cm4gcmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgP1xuICAgICAgICB7XG4gICAgICAgICAgICBlbnVtOiBbJ251bGwnXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ251bGwnLFxuICAgICAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVsbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiAnc3RyaW5nJyxcbiAgICBab2ROdW1iZXI6ICdudW1iZXInLFxuICAgIFpvZEJpZ0ludDogJ2ludGVnZXInLFxuICAgIFpvZEJvb2xlYW46ICdib29sZWFuJyxcbiAgICBab2ROdWxsOiAnbnVsbCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKVxuICAgICAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gICAgLy8gVGhpcyBibG9ja3MgdHJpZXMgdG8gbG9vayBhaGVhZCBhIGJpdCB0byBwcm9kdWNlIG5pY2VyIGxvb2tpbmcgc2NoZW1hcyB3aXRoIHR5cGUgYXJyYXkgaW5zdGVhZCBvZiBhbnlPZi5cbiAgICBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuICAgICAgICAvLyBhbGwgdHlwZXMgaW4gdW5pb24gYXJlIHByaW1pdGl2ZSBhbmQgbGFjayBjaGVja3MsIHNvIG1pZ2h0IGFzIHdlbGwgc3F1YXNoIGludG8ge3R5cGU6IFsuLi5dfVxuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKCh0eXBlcywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSAnWm9kTGl0ZXJhbCcgJiYgIXguZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIC8vIGFsbCBvcHRpb25zIGxpdGVyYWxzXG4gICAgICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB4Ll9kZWYudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCB0eXBlXTtcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgJ2ludGVnZXInXTtcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdudWxsJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBhbGwgdGhlIGxpdGVyYWxzIGFyZSBwcmltaXRpdmUsIGFzIGZhciBhcyBudWxsIGNhbiBiZSBjb25zaWRlcmVkIHByaW1pdGl2ZVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVHlwZXMgPSB0eXBlcy5maWx0ZXIoKHgsIGksIGEpID0+IGEuaW5kZXhPZih4KSA9PT0gaSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5pbmNsdWRlcyh4Ll9kZWYudmFsdWUpID8gYWNjIDogWy4uLmFjYywgeC5fZGVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICB9LCBbXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZEVudW0nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiBbLi4uYWNjLCAuLi54Ll9kZWYudmFsdWVzLmZpbHRlcigoeCkgPT4gIWFjYy5pbmNsdWRlcyh4KSldLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG59XG5jb25zdCBhc0FueU9mID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucylcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgYCR7aX1gXSxcbiAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmICghcmVmcy5zdHJpY3RVbmlvbnMgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pb24ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcHJpbWl0aXZlTWFwcGluZ3MgfSBmcm9tIFwiLi91bmlvbi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChbJ1pvZFN0cmluZycsICdab2ROdW1iZXInLCAnWm9kQmlnSW50JywgJ1pvZEJvb2xlYW4nLCAnWm9kTnVsbCddLmluY2x1ZGVzKGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZSkgJiZcbiAgICAgICAgKCFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzIHx8ICFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnIHx8IHJlZnMubnVsbGFibGVTdHJhdGVneSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogW3ByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sICdudWxsJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChiYXNlICYmICckcmVmJyBpbiBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIHsgYWxsT2Y6IFtiYXNlXSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIGJhc2UgJiYgeyAuLi5iYXNlLCBudWxsYWJsZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmFzZSAmJiB7IGFueU9mOiBbYmFzZSwgeyB0eXBlOiAnbnVsbCcgfV0gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGxhYmxlLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUgPSAnaW50ZWdlcic7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKHJlcywgJ3R5cGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09ICdzdHJpY3QnKSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgIT09ICdzdHJpY3QnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgPT09ICdwYXNzdGhyb3VnaCdcbiAgICAgICAgICAgIDogcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICB9KSA/PyB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIHByb3BOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IHByb3BlcnR5UGF0aCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgaWYgKHJlZnMub3BlbmFpU3RyaWN0TW9kZSAmJlxuICAgICAgICAgICAgICAgIHByb3BEZWYuaXNPcHRpb25hbCgpICYmXG4gICAgICAgICAgICAgICAgIXByb3BEZWYuaXNOdWxsYWJsZSgpICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHByb3BEZWYuX2RlZj8uZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7cHJvcGVydHlQYXRoLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VkRGVmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHByb3BEZWYuaXNPcHRpb25hbCgpICYmICFyZWZzLm9wZW5haVN0cmljdE1vZGUgPyBhY2MucmVxdWlyZWQgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7IHByb3BlcnRpZXM6IHt9LCByZXF1aXJlZDogW10gfSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpLFxuICAgIH07XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlT3B0aW9uYWxEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgaWYgKHJlZnMuY3VycmVudFBhdGgudG9TdHJpbmcoKSA9PT0gcmVmcy5wcm9wZXJ0eVBhdGg/LnRvU3RyaW5nKCkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzEnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWEgP1xuICAgICAgICB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ2lucHV0Jykge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcwJ10sXG4gICAgfSk7XG4gICAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsIGEgPyAnMScgOiAnMCddLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnbWluSXRlbXMnLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4U2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21heEl0ZW1zJywgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgICAgICBhZGRpdGlvbmFsSXRlbXM6IHBhcnNlRGVmKGRlZi5yZXN0Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxJdGVtcyddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBpdGVtczogZGVmLml0ZW1zXG4gICAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsIGAke2l9YF0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10dXBsZS5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5kZWZpbmVkRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZGVmaW5lZC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmtub3duLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVJlYWRvbmx5RGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FueS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQm9vbGVhbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvYm9vbGVhbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEYXRlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTWFwRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9tYXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5hdGl2ZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL25hdGl2ZUVudW0ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdW1iZXJEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bWJlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUGlwZWxpbmVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3BpcGVsaW5lLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9zZXQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvc3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5kZWZpbmVkLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmlvbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVua25vd25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3Vua25vd24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5tanNcIjtcbmltcG9ydCB7IGlnbm9yZU92ZXJyaWRlIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSByZWZzLm92ZXJyaWRlPy4oZGVmLCByZWZzLCBzZWVuSXRlbSwgZm9yY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBpZ25vcmVPdmVycmlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcbiAgICAgICAgaWYgKHNlZW5TY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCckcmVmJyBpbiBzZWVuU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5zZWVuUmVmcy5hZGQoc2VlblNjaGVtYS4kcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGRlZiwgcGF0aDogcmVmcy5jdXJyZW50UGF0aCwganNvblNjaGVtYTogdW5kZWZpbmVkIH07XG4gICAgcmVmcy5zZWVuLnNldChkZWYsIG5ld0l0ZW0pO1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBzZWxlY3RQYXJzZXIoZGVmLCBkZWYudHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgYWRkTWV0YShkZWYsIHJlZnMsIGpzb25TY2hlbWEpO1xuICAgIH1cbiAgICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hO1xuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuY29uc3QgZ2V0JHJlZiA9IChpdGVtLCByZWZzKSA9PiB7XG4gICAgc3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuICAgICAgICBjYXNlICdyb290JzpcbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKCcvJykgfTtcbiAgICAgICAgLy8gdGhpcyBjYXNlIGlzIG5lZWRlZCBhcyBPcGVuQUkgc3RyaWN0IG1vZGUgZG9lc24ndCBzdXBwb3J0IHRvcC1sZXZlbCBgJHJlZmBzLCBpLmUuXG4gICAgICAgIC8vIHRoZSB0b3AtbGV2ZWwgc2NoZW1hICptdXN0KiBiZSBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjogey4uLn19YCBidXQgaWYgd2UgZXZlclxuICAgICAgICAvLyBuZWVkIHRvIGRlZmluZSBhIGAkcmVmYCwgcmVsYXRpdmUgYCRyZWZgcyBhcmVuJ3Qgc3VwcG9ydGVkLCBzbyB3ZSBuZWVkIHRvIGV4dHJhY3RcbiAgICAgICAgLy8gdGhlIHNjaGVtYSB0byBgIy9kZWZpbml0aW9ucy9gIGFuZCByZWZlcmVuY2UgdGhhdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZS5nLiBpZiB3ZSBuZWVkIHRvIHJlZmVyZW5jZSBhIHNjaGVtYSBhdFxuICAgICAgICAvLyBgW1wiI1wiLFwiZGVmaW5pdGlvbnNcIixcImNvbnRhY3RQZXJzb25cIixcInByb3BlcnRpZXNcIixcInBlcnNvbjFcIixcInByb3BlcnRpZXNcIixcIm5hbWVcIl1gXG4gICAgICAgIC8vIHRoZW4gd2UnbGwgZXh0cmFjdCBpdCBvdXQgdG8gYGNvbnRhY3RQZXJzb25fcHJvcGVydGllc19wZXJzb24xX3Byb3BlcnRpZXNfbmFtZWBcbiAgICAgICAgY2FzZSAnZXh0cmFjdC10by1yb290JzpcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLnBhdGguc2xpY2UocmVmcy5iYXNlUGF0aC5sZW5ndGggKyAxKS5qb2luKCdfJyk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGV4dHJhY3QgdGhlIHJvb3Qgc2NoZW1hIGluIHRoaXMgY2FzZSwgYXMgaXQncyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBiZWVuIGFkZGVkIHRvIHRoZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHJlZnMubmFtZSAmJiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uc1tuYW1lXSA9IGl0ZW0uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSB9O1xuICAgICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgY2FzZSAnc2Vlbic6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbignLycpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdzZWVuJyA/IHt9IDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGdldFJlbGF0aXZlUGF0aCA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oJy8nKTtcbn07XG5jb25zdCBzZWxlY3RQYXJzZXIgPSAoZGVmLCB0eXBlTmFtZSwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSA9PiB7XG4gICAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGF0ZTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuaW9uOlxuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VVbmlvbkRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9wdGlvbmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU1hcERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuZ2V0dGVyKCkuX2RlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2U6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXI6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOZXZlckRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5rbm93bkRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQnJhbmRlZERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVJlYWRvbmx5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQaXBlbGluZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZDpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoKF8pID0+IHVuZGVmaW5lZCkodHlwZU5hbWUpO1xuICAgIH1cbn07XG5jb25zdCBhZGRNZXRhID0gKGRlZiwgcmVmcywganNvblNjaGVtYSkgPT4ge1xuICAgIGlmIChkZWYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAganNvblNjaGVtYS5kZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHJlZnMubWFya2Rvd25EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAganNvblNjaGVtYS5tYXJrZG93bkRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYsIGlzRW1wdHlPYmogfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuY29uc3Qgem9kVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgPyBvcHRpb25zXG4gICAgICAgIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IG9wdGlvbnM/Lm5hbWU7XG4gICAgY29uc3QgbWFpbiA9IHBhcnNlRGVmKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWQgPyByZWZzIDogKHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICB9KSwgZmFsc2UpID8/IHt9O1xuICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID9cbiAgICAgICAgb3B0aW9ucy5uYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihyZWZzLmRlZmluaXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHt9O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWREZWZpbml0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gdGhlIGNhbGwgdG8gYHBhcnNlRGVmKClgIGhlcmUgbWlnaHQgaXRzZWxmIGFkZCBtb3JlIGVudHJpZXMgdG8gYC5kZWZpbml0aW9uc2BcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBjb250aW51YWxseSBldmFsdWF0ZSBkZWZpbml0aW9ucyB1bnRpbCB3ZSd2ZSByZXNvbHZlZCBhbGwgb2YgdGhlbVxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBoYXZlIGEgZ2VuZXJvdXMgaXRlcmF0aW9uIGxpbWl0IGhlcmUgdG8gYXZvaWQgYmxvd2luZyB1cCB0aGUgc3RhY2sgaWYgdGhlcmVcbiAgICAgICAgLy8gYXJlIGFueSBidWdzIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlc3VsdCBpbiB1cyBpdGVyYXRpbmcgaW5kZWZpbml0ZWx5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZmluaXRpb25zID0gT2JqZWN0LmVudHJpZXMocmVmcy5kZWZpbml0aW9ucykuZmlsdGVyKChba2V5XSkgPT4gIXByb2Nlc3NlZERlZmluaXRpb25zLmhhcyhrZXkpKTtcbiAgICAgICAgICAgIGlmIChuZXdEZWZpbml0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHNjaGVtYV0gb2YgbmV3RGVmaW5pdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VEZWYoem9kRGVmKHNjaGVtYSksIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBrZXldIH0sIHRydWUpID8/IHt9O1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZERlZmluaXRpb25zLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9ucztcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgZGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiBkZWZpbml0aW9ucyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbWFpblxuICAgICAgICA6IHJlZnMubmFtZVN0cmF0ZWd5ID09PSAnZHVwbGljYXRlLXJlZicgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgLi4uKGRlZmluaXRpb25zIHx8IHJlZnMuc2VlblJlZnMuc2l6ZSA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0dWFsbHkgZHVwbGljYXRlIHRoZSBzY2hlbWEgZGVmaW5pdGlvbiBpZiBpdCB3YXMgZXZlciByZWZlcmVuY2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBkdXBsaWNhdGlvbiBpcyBjb21wbGV0ZWx5IHBvaW50bGVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZWZzLnNlZW5SZWZzLnNpemUgPyB7IFtuYW1lXTogbWFpbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJHJlZjogWy4uLihyZWZzLiRyZWZTdHJhdGVneSA9PT0gJ3JlbGF0aXZlJyA/IFtdIDogcmVmcy5iYXNlUGF0aCksIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIFtuYW1lXTogbWFpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5Jykge1xuICAgICAgICBjb21iaW5lZC4kc2NoZW1hID0gJ2h0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hIyc7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZDtcbn07XG5leHBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZFRvSnNvblNjaGVtYS5tanMubWFwIiwiaW1wb3J0IHsgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0IH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0X3BhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgaXRlbSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50LnRleHQpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcnNlZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLCB7IG91dHB1dCB9KTtcbiAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzcG9uc2UsICdvdXRwdXRfdGV4dCcpKSB7XG4gICAgICAgIGFkZE91dHB1dFRleHQocGFyc2VkKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlZCwgJ291dHB1dF9wYXJzZWQnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHBhcnNlZC5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIG91dHB1dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcgJiYgY29udGVudC5wYXJzZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy50ZXh0Py5mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMudGV4dD8uZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IHRleHRfZm9ybWF0ID0gcGFyYW1zLnRleHQ/LmZvcm1hdDtcbiAgICAgICAgcmV0dXJuIHRleHRfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy50ZXh0Py5mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZnVuY3Rpb24gZ2V0SW5wdXRUb29sQnlOYW1lKGlucHV0X3Rvb2xzLCBuYW1lKSB7XG4gICAgcmV0dXJuIGlucHV0X3Rvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b29sLm5hbWUgPT09IG5hbWUpO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBpbnB1dFRvb2w/LnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkT3V0cHV0VGV4dChyc3ApIHtcbiAgICBjb25zdCB0ZXh0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHJzcC5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIHRleHRzLnB1c2goY29udGVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByc3Aub3V0cHV0X3RleHQgPSB0ZXh0cy5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlc1BhcnNlci5tanMubWFwIiwiaW1wb3J0IHsgbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0LCBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCwgbWFrZVBhcnNlYWJsZVRvb2wsIH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgYXMgX3pvZFRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9pbmRleC5tanNcIjtcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wgfSBmcm9tIFwiLi4vbGliL1Jlc3BvbnNlc1BhcnNlci5tanNcIjtcbmZ1bmN0aW9uIHpvZFRvSnNvblNjaGVtYShzY2hlbWEsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX3pvZFRvSnNvblNjaGVtYShzY2hlbWEsIHtcbiAgICAgICAgb3BlbmFpU3RyaWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBuYW1lU3RyYXRlZ3k6ICdkdXBsaWNhdGUtcmVmJyxcbiAgICAgICAgJHJlZlN0cmF0ZWd5OiAnZXh0cmFjdC10by1yb290JyxcbiAgICAgICAgbnVsbGFibGVTdHJhdGVneTogJ3Byb3BlcnR5JyxcbiAgICB9KTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgSlNPTlNjaGVtYWAgcmVzcG9uc2UgZm9ybWF0IG9iamVjdCBmcm9tXG4gKiB0aGUgZ2l2ZW4gWm9kIHNjaGVtYS5cbiAqXG4gKiBJZiB0aGlzIGlzIHBhc3NlZCB0byB0aGUgYC5wYXJzZSgpYCwgYC5zdHJlYW0oKWAgb3IgYC5ydW5Ub29scygpYFxuICogY2hhdCBjb21wbGV0aW9uIG1ldGhvZHMgdGhlbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSB3aWxsIGNvbnRhaW4gYVxuICogYC5wYXJzZWRgIHByb3BlcnR5IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBwYXJzaW5nIHRoZSBjb250ZW50IHdpdGhcbiAqIHRoZSBnaXZlbiBab2Qgb2JqZWN0LlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMucGFyc2Uoe1xuICogICAgbW9kZWw6ICdncHQtNG8tMjAyNC0wOC0wNicsXG4gKiAgICBtZXNzYWdlczogW1xuICogICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgbWF0aCB0dXRvci4nIH0sXG4gKiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnc29sdmUgOHggKyAzMSA9IDInIH0sXG4gKiAgICBdLFxuICogICAgcmVzcG9uc2VfZm9ybWF0OiB6b2RSZXNwb25zZUZvcm1hdChcbiAqICAgICAgei5vYmplY3Qoe1xuICogICAgICAgIHN0ZXBzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAqICAgICAgICAgIGV4cGxhbmF0aW9uOiB6LnN0cmluZygpLFxuICogICAgICAgICAgYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICAgIH0pKSxcbiAqICAgICAgICBmaW5hbF9hbnN3ZXI6IHouc3RyaW5nKCksXG4gKiAgICAgIH0pLFxuICogICAgICAnbWF0aF9hbnN3ZXInLFxuICogICAgKSxcbiAqICB9KTtcbiAqICBjb25zdCBtZXNzYWdlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlO1xuICogIGlmIChtZXNzYWdlPy5wYXJzZWQpIHtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkKTtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkLmZpbmFsX2Fuc3dlcik7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIGAuY3JlYXRlKClgIG1ldGhvZCBidXQgd2lsbCBub3RcbiAqIHJlc3VsdCBpbiBhbnkgYXV0b21hdGljIHBhcnNpbmcsIHlvdSdsbCBoYXZlIHRvIHBhcnNlIHRoZSByZXNwb25zZSB5b3Vyc2VsZi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlRm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHtcbiAgICAgICAgdHlwZTogJ2pzb25fc2NoZW1hJyxcbiAgICAgICAganNvbl9zY2hlbWE6IHtcbiAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgICAgICB9LFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFRleHRGb3JtYXQoem9kT2JqZWN0LCBuYW1lLCBwcm9wcykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBuYW1lLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2hhdCBjb21wbGV0aW9uIGBmdW5jdGlvbmAgdG9vbCB0aGF0IGNhbiBiZSBpbnZva2VkXG4gKiBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjaGF0IGNvbXBsZXRpb24gYC5ydW5Ub29scygpYCBtZXRob2Qgb3IgYXV0b21hdGljYWxseVxuICogcGFyc2VkIGJ5IGAucGFyc2UoKWAgLyBgLnN0cmVhbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZEZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE9cbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRvb2woe1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5kZXNjcmlwdGlvbiA/IHsgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24gfSA6IHVuZGVmaW5lZCksXG4gICAgICAgIH0sXG4gICAgfSwge1xuICAgICAgICBjYWxsYmFjazogb3B0aW9ucy5mdW5jdGlvbixcbiAgICAgICAgcGFyc2VyOiAoYXJncykgPT4gb3B0aW9ucy5wYXJhbWV0ZXJzLnBhcnNlKEpTT04ucGFyc2UoYXJncykpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlc0Z1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgLi4uKG9wdGlvbnMuZGVzY3JpcHRpb24gPyB7IGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uIH0gOiB1bmRlZmluZWQpLFxuICAgIH0sIHtcbiAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuZnVuY3Rpb24sXG4gICAgICAgIHBhcnNlcjogKGFyZ3MpID0+IG9wdGlvbnMucGFyYW1ldGVycy5wYXJzZShKU09OLnBhcnNlKGFyZ3MpKSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZC5tanMubWFwIiwiLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgZXJyb3JzIHRocm93biBieSB0aGUgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50c0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBTeXN0ZW0gZXJyb3IgdGhyb3duIHdoZW4gdGhlIGxpYnJhcnkgZW5jb3VudGVycyBhbiBlcnJvciB0aGF0IGlzIG5vdCBjYXVzZWQgYnkgdGhlIHVzZXInc1xuICogbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbUVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgaXMgZXhjZWVkZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgbW9kZWwgYmVoYXZpb3IgaXMgdW5leHBlY3RlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsQmVoYXZpb3JFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIGVycm9yIGlzIGNhdXNlZCBieSB0aGUgbGlicmFyeSB1c2VyJ3MgbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSBndWFyZHJhaWwgZXhlY3V0aW9uIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG4gICAgZXJyb3I7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3IsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIGNhbGwgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQ2FsbEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGFuIGlucHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIHRyaXB3aXJlIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLm1qcy5tYXAiLCIvKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYSBab2RPYmplY3Qgd2l0aG91dCBuZWVkaW5nIHRvIGhhdmUgWm9kIGF0IHJ1bnRpbWUgc2luY2UgaXQncyBhblxuICogb3B0aW9uYWwgZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdfZGVmJyBpbiBpbnB1dCAmJlxuICAgICAgICB0eXBlb2YgaW5wdXQuX2RlZiA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5wdXQuX2RlZiAhPT0gbnVsbCAmJlxuICAgICAgICAndHlwZU5hbWUnIGluIGlucHV0Ll9kZWYgJiZcbiAgICAgICAgaW5wdXQuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE9iamVjdCcpO1xufVxuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGlucHV0IGlzIGFuIG9iamVjdCB3aXRoIGFuIGBpbnB1dGAgcHJvcGVydHkuXG4gKiBAcGFyYW0gaW5wdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FnZW50VG9vbElucHV0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdpbnB1dCcgaW4gaW5wdXQgJiZcbiAgICAgICAgdHlwZW9mIGlucHV0LmlucHV0ID09PSAnc3RyaW5nJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlR3VhcmRzLm1qcy5tYXAiLCJpbXBvcnQgeyB6b2RSZXNwb25zZXNGdW5jdGlvbiwgem9kVGV4dEZvcm1hdCB9IGZyb20gJ29wZW5haS9oZWxwZXJzL3pvZCc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi90eXBlR3VhcmRzLm1qc1wiO1xuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGEgZnVuY3Rpb24gdG9vbCBuYW1lIGJ5IHJlcGxhY2luZyBzcGFjZXMgd2l0aCB1bmRlcnNjb3JlcyBhbmRcbiAqIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAqIEByZXR1cm5zIFRoZSBmdW5jdGlvbiB0b29sIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0Z1bmN0aW9uVG9vbE5hbWUobmFtZSkge1xuICAgIC8vIFJlcGxhY2Ugc3BhY2VzIHdpdGggdW5kZXJzY29yZXNcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9cXHMvZywgJ18nKTtcbiAgICAvLyBSZXBsYWNlIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW15hLXpBLVowLTldL2csICdfJyk7XG4gICAgLy8gRW5zdXJlIHRoZSBuYW1lIGlzIG5vdCBlbXB0eVxuICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rvb2wgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWU7XG59XG4vKipcbiAqIEdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbSBhbiBpbnB1dCB0eXBlLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIFpvZE9iamVjdCwgd2Ugd2lsbCBjb252ZXJ0XG4gKiBpdCBpbnRvIGEgSlNPTiBTY2hlbWEgYW5kIHVzZSBab2QgYXMgcGFyc2VyLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIEpTT04gc2NoZW1hLCB3ZSB1c2UgdGhlXG4gKiBKU09OLnBhcnNlIGZ1bmN0aW9uIHRvIGdldCB0aGUgcGFyc2VyLlxuICogQHBhcmFtIGlucHV0VHlwZSAtIFRoZSBpbnB1dCB0eXBlIHRvIGdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gKiBAcmV0dXJucyBUaGUgc2NoZW1hIGFuZCBwYXJzZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGlucHV0VHlwZSwgbmFtZSkge1xuICAgIGNvbnN0IHBhcnNlciA9IChpbnB1dCkgPT4gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgaWYgKGlzWm9kT2JqZWN0KGlucHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRnVuY3Rpb24gPSB6b2RSZXNwb25zZXNGdW5jdGlvbih7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogaW5wdXRUeXBlLFxuICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHsgfSwgLy8gZW1wdHkgZnVuY3Rpb24gaGVyZSB0byBzYXRpc2Z5IHRoZSBPcGVuQUkgaGVscGVyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBmb3JtYXR0ZWRGdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcGFyc2VyOiBmb3JtYXR0ZWRGdW5jdGlvbi4kcGFyc2VSYXcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dFR5cGUgPT09ICdvYmplY3QnICYmIGlucHV0VHlwZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBpbnB1dFR5cGUsXG4gICAgICAgICAgICBwYXJzZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0lucHV0IHR5cGUgaXMgbm90IGEgWm9kT2JqZWN0IG9yIGEgdmFsaWQgSlNPTiBzY2hlbWEnKTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGFnZW50IG91dHB1dCB0eXBlIHByb3ZpZGVkIHRvIGEgc2VyaWFsaXphYmxlIHZlcnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShvdXRwdXRUeXBlKSB7XG4gICAgaWYgKG91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH1cbiAgICBpZiAoaXNab2RPYmplY3Qob3V0cHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gem9kVGV4dEZvcm1hdChvdXRwdXRUeXBlLCAnb3V0cHV0Jyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBvdXRwdXQudHlwZSxcbiAgICAgICAgICAgIG5hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgc3RyaWN0OiBvdXRwdXQuc3RyaWN0IHx8IGZhbHNlLFxuICAgICAgICAgICAgc2NoZW1hOiBvdXRwdXQuc2NoZW1hLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0VHlwZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xzLm1qcy5tYXAiLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbCkpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArXG4gICAgICBKU09OLnN0cmluZ2lmeSh2YWwpXG4gICk7XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhcbiAgICBzdHJcbiAgKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnd2Vla3MnOlxuICAgIGNhc2UgJ3dlZWsnOlxuICAgIGNhc2UgJ3cnOlxuICAgICAgcmV0dXJuIG4gKiB3O1xuICAgIGNhc2UgJ2RheXMnOlxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gbiAqIGQ7XG4gICAgY2FzZSAnaG91cnMnOlxuICAgIGNhc2UgJ2hvdXInOlxuICAgIGNhc2UgJ2hycyc6XG4gICAgY2FzZSAnaHInOlxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgJ21pbnV0ZXMnOlxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgY2FzZSAnbWlucyc6XG4gICAgY2FzZSAnbWluJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3NlY3MnOlxuICAgIGNhc2UgJ3NlYyc6XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gbiAqIHM7XG4gICAgY2FzZSAnbWlsbGlzZWNvbmRzJzpcbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgY2FzZSAnbXNlY3MnOlxuICAgIGNhc2UgJ21zZWMnOlxuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10U2hvcnQobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIH1cbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdExvbmcobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBkLCAnZGF5Jyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgaCwgJ2hvdXInKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBtLCAnbWludXRlJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgcywgJ3NlY29uZCcpO1xuICB9XG4gIHJldHVybiBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbXNBYnMsIG4sIG5hbWUpIHtcbiAgdmFyIGlzUGx1cmFsID0gbXNBYnMgPj0gbiAqIDEuNTtcbiAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBuKSArICcgJyArIG5hbWUgKyAoaXNQbHVyYWwgPyAncycgOiAnJyk7XG59XG4iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblx0XHRsZXQgbmFtZXNwYWNlc0NhY2hlO1xuXHRcdGxldCBlbmFibGVkQ2FjaGU7XG5cblx0XHRmdW5jdGlvbiBkZWJ1ZyguLi5hcmdzKSB7XG5cdFx0XHQvLyBEaXNhYmxlZD9cblx0XHRcdGlmICghZGVidWcuZW5hYmxlZCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHNlbGYgPSBkZWJ1ZztcblxuXHRcdFx0Ly8gU2V0IGBkaWZmYCB0aW1lc3RhbXBcblx0XHRcdGNvbnN0IGN1cnIgPSBOdW1iZXIobmV3IERhdGUoKSk7XG5cdFx0XHRjb25zdCBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG5cdFx0XHRzZWxmLmRpZmYgPSBtcztcblx0XHRcdHNlbGYucHJldiA9IHByZXZUaW1lO1xuXHRcdFx0c2VsZi5jdXJyID0gY3Vycjtcblx0XHRcdHByZXZUaW1lID0gY3VycjtcblxuXHRcdFx0YXJnc1swXSA9IGNyZWF0ZURlYnVnLmNvZXJjZShhcmdzWzBdKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdICE9PSAnc3RyaW5nJykge1xuXHRcdFx0XHQvLyBBbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlT1xuXHRcdFx0XHRhcmdzLnVuc2hpZnQoJyVPJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFwcGx5IGFueSBgZm9ybWF0dGVyc2AgdHJhbnNmb3JtYXRpb25zXG5cdFx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdFx0YXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIChtYXRjaCwgZm9ybWF0KSA9PiB7XG5cdFx0XHRcdC8vIElmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcblx0XHRcdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRcdFx0cmV0dXJuICclJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG5cdFx0XHRcdGlmICh0eXBlb2YgZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmFsID0gYXJnc1tpbmRleF07XG5cdFx0XHRcdFx0bWF0Y2ggPSBmb3JtYXR0ZXIuY2FsbChzZWxmLCB2YWwpO1xuXG5cdFx0XHRcdFx0Ly8gTm93IHdlIG5lZWQgdG8gcmVtb3ZlIGBhcmdzW2luZGV4XWAgc2luY2UgaXQncyBpbmxpbmVkIGluIHRoZSBgZm9ybWF0YFxuXHRcdFx0XHRcdGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtYXRjaDtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBBcHBseSBlbnYtc3BlY2lmaWMgZm9ybWF0dGluZyAoY29sb3JzLCBldGMuKVxuXHRcdFx0Y3JlYXRlRGVidWcuZm9ybWF0QXJncy5jYWxsKHNlbGYsIGFyZ3MpO1xuXG5cdFx0XHRjb25zdCBsb2dGbiA9IHNlbGYubG9nIHx8IGNyZWF0ZURlYnVnLmxvZztcblx0XHRcdGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH1cblxuXHRcdGRlYnVnLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblx0XHRkZWJ1Zy51c2VDb2xvcnMgPSBjcmVhdGVEZWJ1Zy51c2VDb2xvcnMoKTtcblx0XHRkZWJ1Zy5jb2xvciA9IGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yKG5hbWVzcGFjZSk7XG5cdFx0ZGVidWcuZXh0ZW5kID0gZXh0ZW5kO1xuXHRcdGRlYnVnLmRlc3Ryb3kgPSBjcmVhdGVEZWJ1Zy5kZXN0cm95OyAvLyBYWFggVGVtcG9yYXJ5LiBXaWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWJ1ZywgJ2VuYWJsZWQnLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcblx0XHRcdGdldDogKCkgPT4ge1xuXHRcdFx0XHRpZiAoZW5hYmxlT3ZlcnJpZGUgIT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gZW5hYmxlT3ZlcnJpZGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5hbWVzcGFjZXNDYWNoZSAhPT0gY3JlYXRlRGVidWcubmFtZXNwYWNlcykge1xuXHRcdFx0XHRcdG5hbWVzcGFjZXNDYWNoZSA9IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXM7XG5cdFx0XHRcdFx0ZW5hYmxlZENhY2hlID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVuYWJsZWRDYWNoZTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cdFx0Y3JlYXRlRGVidWcubmFtZXNwYWNlcyA9IG5hbWVzcGFjZXM7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgnICcsICcsJylcblx0XHRcdC5zcGxpdCgnLCcpXG5cdFx0XHQuZmlsdGVyKEJvb2xlYW4pO1xuXG5cdFx0Zm9yIChjb25zdCBucyBvZiBzcGxpdCkge1xuXHRcdFx0aWYgKG5zWzBdID09PSAnLScpIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcuc2tpcHMucHVzaChucy5zbGljZSgxKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5zKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBzdHJpbmcgbWF0Y2hlcyBhIG5hbWVzcGFjZSB0ZW1wbGF0ZSwgaG9ub3Jpbmdcblx0ICogYXN0ZXJpc2tzIGFzIHdpbGRjYXJkcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIG1hdGNoZXNUZW1wbGF0ZShzZWFyY2gsIHRlbXBsYXRlKSB7XG5cdFx0bGV0IHNlYXJjaEluZGV4ID0gMDtcblx0XHRsZXQgdGVtcGxhdGVJbmRleCA9IDA7XG5cdFx0bGV0IHN0YXJJbmRleCA9IC0xO1xuXHRcdGxldCBtYXRjaEluZGV4ID0gMDtcblxuXHRcdHdoaWxlIChzZWFyY2hJbmRleCA8IHNlYXJjaC5sZW5ndGgpIHtcblx0XHRcdGlmICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gc2VhcmNoW3NlYXJjaEluZGV4XSB8fCB0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSkge1xuXHRcdFx0XHQvLyBNYXRjaCBjaGFyYWN0ZXIgb3IgcHJvY2VlZCB3aXRoIHdpbGRjYXJkXG5cdFx0XHRcdGlmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSB7XG5cdFx0XHRcdFx0c3RhckluZGV4ID0gdGVtcGxhdGVJbmRleDtcblx0XHRcdFx0XHRtYXRjaEluZGV4ID0gc2VhcmNoSW5kZXg7XG5cdFx0XHRcdFx0dGVtcGxhdGVJbmRleCsrOyAvLyBTa2lwIHRoZSAnKidcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZWFyY2hJbmRleCsrO1xuXHRcdFx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzdGFySW5kZXggIT09IC0xKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmVnYXRlZC1jb25kaXRpb25cblx0XHRcdFx0Ly8gQmFja3RyYWNrIHRvIHRoZSBsYXN0ICcqJyBhbmQgdHJ5IHRvIG1hdGNoIG1vcmUgY2hhcmFjdGVyc1xuXHRcdFx0XHR0ZW1wbGF0ZUluZGV4ID0gc3RhckluZGV4ICsgMTtcblx0XHRcdFx0bWF0Y2hJbmRleCsrO1xuXHRcdFx0XHRzZWFyY2hJbmRleCA9IG1hdGNoSW5kZXg7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7IC8vIE5vIG1hdGNoXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIHRyYWlsaW5nICcqJyBpbiB0ZW1wbGF0ZVxuXHRcdHdoaWxlICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmIHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpIHtcblx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gdGVtcGxhdGVJbmRleCA9PT0gdGVtcGxhdGUubGVuZ3RoO1xuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcyxcblx0XHRcdC4uLmNyZWF0ZURlYnVnLnNraXBzLm1hcChuYW1lc3BhY2UgPT4gJy0nICsgbmFtZXNwYWNlKVxuXHRcdF0uam9pbignLCcpO1xuXHRcdGNyZWF0ZURlYnVnLmVuYWJsZSgnJyk7XG5cdFx0cmV0dXJuIG5hbWVzcGFjZXM7XG5cdH1cblxuXHQvKipcblx0KiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG1vZGUgbmFtZSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG5cdFx0Zm9yIChjb25zdCBza2lwIG9mIGNyZWF0ZURlYnVnLnNraXBzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIHNraXApKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IG5zIG9mIGNyZWF0ZURlYnVnLm5hbWVzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIG5zKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0KiBDb2VyY2UgYHZhbGAuXG5cdCpcblx0KiBAcGFyYW0ge01peGVkfSB2YWxcblx0KiBAcmV0dXJuIHtNaXhlZH1cblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuXHRcdGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0cmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxuXG5cdC8qKlxuXHQqIFhYWCBETyBOT1QgVVNFLiBUaGlzIGlzIGEgdGVtcG9yYXJ5IHN0dWIgZnVuY3Rpb24uXG5cdCogWFhYIEl0IFdJTEwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXHQqL1xuXHRmdW5jdGlvbiBkZXN0cm95KCkge1xuXHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHR9XG5cblx0Y3JlYXRlRGVidWcuZW5hYmxlKGNyZWF0ZURlYnVnLmxvYWQoKSk7XG5cblx0cmV0dXJuIGNyZWF0ZURlYnVnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldHVwO1xuIiwiLyogZXNsaW50LWVudiBicm93c2VyICovXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgd2ViIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgYGRlYnVnKClgLlxuICovXG5cbmV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG5leHBvcnRzLnNhdmUgPSBzYXZlO1xuZXhwb3J0cy5sb2FkID0gbG9hZDtcbmV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO1xuZXhwb3J0cy5zdG9yYWdlID0gbG9jYWxzdG9yYWdlKCk7XG5leHBvcnRzLmRlc3Ryb3kgPSAoKCkgPT4ge1xuXHRsZXQgd2FybmVkID0gZmFsc2U7XG5cblx0cmV0dXJuICgpID0+IHtcblx0XHRpZiAoIXdhcm5lZCkge1xuXHRcdFx0d2FybmVkID0gdHJ1ZTtcblx0XHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHRcdH1cblx0fTtcbn0pKCk7XG5cbi8qKlxuICogQ29sb3JzLlxuICovXG5cbmV4cG9ydHMuY29sb3JzID0gW1xuXHQnIzAwMDBDQycsXG5cdCcjMDAwMEZGJyxcblx0JyMwMDMzQ0MnLFxuXHQnIzAwMzNGRicsXG5cdCcjMDA2NkNDJyxcblx0JyMwMDY2RkYnLFxuXHQnIzAwOTlDQycsXG5cdCcjMDA5OUZGJyxcblx0JyMwMENDMDAnLFxuXHQnIzAwQ0MzMycsXG5cdCcjMDBDQzY2Jyxcblx0JyMwMENDOTknLFxuXHQnIzAwQ0NDQycsXG5cdCcjMDBDQ0ZGJyxcblx0JyMzMzAwQ0MnLFxuXHQnIzMzMDBGRicsXG5cdCcjMzMzM0NDJyxcblx0JyMzMzMzRkYnLFxuXHQnIzMzNjZDQycsXG5cdCcjMzM2NkZGJyxcblx0JyMzMzk5Q0MnLFxuXHQnIzMzOTlGRicsXG5cdCcjMzNDQzAwJyxcblx0JyMzM0NDMzMnLFxuXHQnIzMzQ0M2NicsXG5cdCcjMzNDQzk5Jyxcblx0JyMzM0NDQ0MnLFxuXHQnIzMzQ0NGRicsXG5cdCcjNjYwMENDJyxcblx0JyM2NjAwRkYnLFxuXHQnIzY2MzNDQycsXG5cdCcjNjYzM0ZGJyxcblx0JyM2NkNDMDAnLFxuXHQnIzY2Q0MzMycsXG5cdCcjOTkwMENDJyxcblx0JyM5OTAwRkYnLFxuXHQnIzk5MzNDQycsXG5cdCcjOTkzM0ZGJyxcblx0JyM5OUNDMDAnLFxuXHQnIzk5Q0MzMycsXG5cdCcjQ0MwMDAwJyxcblx0JyNDQzAwMzMnLFxuXHQnI0NDMDA2NicsXG5cdCcjQ0MwMDk5Jyxcblx0JyNDQzAwQ0MnLFxuXHQnI0NDMDBGRicsXG5cdCcjQ0MzMzAwJyxcblx0JyNDQzMzMzMnLFxuXHQnI0NDMzM2NicsXG5cdCcjQ0MzMzk5Jyxcblx0JyNDQzMzQ0MnLFxuXHQnI0NDMzNGRicsXG5cdCcjQ0M2NjAwJyxcblx0JyNDQzY2MzMnLFxuXHQnI0NDOTkwMCcsXG5cdCcjQ0M5OTMzJyxcblx0JyNDQ0NDMDAnLFxuXHQnI0NDQ0MzMycsXG5cdCcjRkYwMDAwJyxcblx0JyNGRjAwMzMnLFxuXHQnI0ZGMDA2NicsXG5cdCcjRkYwMDk5Jyxcblx0JyNGRjAwQ0MnLFxuXHQnI0ZGMDBGRicsXG5cdCcjRkYzMzAwJyxcblx0JyNGRjMzMzMnLFxuXHQnI0ZGMzM2NicsXG5cdCcjRkYzMzk5Jyxcblx0JyNGRjMzQ0MnLFxuXHQnI0ZGMzNGRicsXG5cdCcjRkY2NjAwJyxcblx0JyNGRjY2MzMnLFxuXHQnI0ZGOTkwMCcsXG5cdCcjRkY5OTMzJyxcblx0JyNGRkNDMDAnLFxuXHQnI0ZGQ0MzMydcbl07XG5cbi8qKlxuICogQ3VycmVudGx5IG9ubHkgV2ViS2l0LWJhc2VkIFdlYiBJbnNwZWN0b3JzLCBGaXJlZm94ID49IHYzMSxcbiAqIGFuZCB0aGUgRmlyZWJ1ZyBleHRlbnNpb24gKGFueSBGaXJlZm94IHZlcnNpb24pIGFyZSBrbm93blxuICogdG8gc3VwcG9ydCBcIiVjXCIgQ1NTIGN1c3RvbWl6YXRpb25zLlxuICpcbiAqIFRPRE86IGFkZCBhIGBsb2NhbFN0b3JhZ2VgIHZhcmlhYmxlIHRvIGV4cGxpY2l0bHkgZW5hYmxlL2Rpc2FibGUgY29sb3JzXG4gKi9cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmZ1bmN0aW9uIHVzZUNvbG9ycygpIHtcblx0Ly8gTkI6IEluIGFuIEVsZWN0cm9uIHByZWxvYWQgc2NyaXB0LCBkb2N1bWVudCB3aWxsIGJlIGRlZmluZWQgYnV0IG5vdCBmdWxseVxuXHQvLyBpbml0aWFsaXplZC4gU2luY2Ugd2Uga25vdyB3ZSdyZSBpbiBDaHJvbWUsIHdlJ2xsIGp1c3QgZGV0ZWN0IHRoaXMgY2FzZVxuXHQvLyBleHBsaWNpdGx5XG5cdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucHJvY2VzcyAmJiAod2luZG93LnByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJyB8fCB3aW5kb3cucHJvY2Vzcy5fX253anMpKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyBJbnRlcm5ldCBFeHBsb3JlciBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydCBjb2xvcnMuXG5cdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvKGVkZ2V8dHJpZGVudClcXC8oXFxkKykvKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGxldCBtO1xuXG5cdC8vIElzIHdlYmtpdD8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY0NTk2MDYvMzc2NzczXG5cdC8vIGRvY3VtZW50IGlzIHVuZGVmaW5lZCBpbiByZWFjdC1uYXRpdmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvcHVsbC8xNjMyXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXNzaWduXG5cdHJldHVybiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5XZWJraXRBcHBlYXJhbmNlKSB8fFxuXHRcdC8vIElzIGZpcmVidWc/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM5ODEyMC8zNzY3NzNcblx0XHQodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLmZpcmVidWcgfHwgKHdpbmRvdy5jb25zb2xlLmV4Y2VwdGlvbiAmJiB3aW5kb3cuY29uc29sZS50YWJsZSkpKSB8fFxuXHRcdC8vIElzIGZpcmVmb3ggPj0gdjMxP1xuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvVG9vbHMvV2ViX0NvbnNvbGUjU3R5bGluZ19tZXNzYWdlc1xuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIChtID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykpICYmIHBhcnNlSW50KG1bMV0sIDEwKSA+PSAzMSkgfHxcblx0XHQvLyBEb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcblx0YXJnc1swXSA9ICh0aGlzLnVzZUNvbG9ycyA/ICclYycgOiAnJykgK1xuXHRcdHRoaXMubmFtZXNwYWNlICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnICVjJyA6ICcgJykgK1xuXHRcdGFyZ3NbMF0gK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICclYyAnIDogJyAnKSArXG5cdFx0JysnICsgbW9kdWxlLmV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuXHRpZiAoIXRoaXMudXNlQ29sb3JzKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpO1xuXG5cdC8vIFRoZSBmaW5hbCBcIiVjXCIgaXMgc29tZXdoYXQgdHJpY2t5LCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG90aGVyXG5cdC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cblx0Ly8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cdGxldCBpbmRleCA9IDA7XG5cdGxldCBsYXN0QyA9IDA7XG5cdGFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBtYXRjaCA9PiB7XG5cdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGluZGV4Kys7XG5cdFx0aWYgKG1hdGNoID09PSAnJWMnKSB7XG5cdFx0XHQvLyBXZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcblx0XHRcdC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG5cdFx0XHRsYXN0QyA9IGluZGV4O1xuXHRcdH1cblx0fSk7XG5cblx0YXJncy5zcGxpY2UobGFzdEMsIDAsIGMpO1xufVxuXG4vKipcbiAqIEludm9rZXMgYGNvbnNvbGUuZGVidWcoKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKiBJZiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGF2YWlsYWJsZSwgZmFsbHMgYmFja1xuICogdG8gYGNvbnNvbGUubG9nYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmxvZyA9IGNvbnNvbGUuZGVidWcgfHwgY29uc29sZS5sb2cgfHwgKCgpID0+IHt9KTtcblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHR0cnkge1xuXHRcdGlmIChuYW1lc3BhY2VzKSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsb2FkKCkge1xuXHRsZXQgcjtcblx0dHJ5IHtcblx0XHRyID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG5cblx0Ly8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuXHRpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcblx0XHRyID0gcHJvY2Vzcy5lbnYuREVCVUc7XG5cdH1cblxuXHRyZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzYWZhcmkgdGhyb3dzXG4gKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZVxuICogYW5kIHlvdSBhdHRlbXB0IHRvIGFjY2VzcyBpdC5cbiAqXG4gKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG5cdHRyeSB7XG5cdFx0Ly8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuXHRcdC8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xuXG5jb25zdCB7Zm9ybWF0dGVyc30gPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVycm9yLm1lc3NhZ2U7XG5cdH1cbn07XG4iLCJpbXBvcnQgeyBsb2FkRW52IGFzIF9sb2FkRW52IH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBMb2FkcyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSB0aGUgcHJvY2VzcyBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9hZEVudigpIHtcbiAgICByZXR1cm4gX2xvYWRFbnYoKTtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIGEgZmxhZyBpcyBlbmFibGVkIGluIHRoZSBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcGFyYW0gZmxhZ05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZmxhZyB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmxhZyBpcyBlbmFibGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gaXNFbmFibGVkKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZW52ID0gbG9hZEVudigpO1xuICAgIHJldHVybiAodHlwZW9mIGVudiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgKGVudltmbGFnTmFtZV0gPT09ICd0cnVlJyB8fCBlbnZbZmxhZ05hbWVdID09PSAnMScpKTtcbn1cbi8qKlxuICogR2xvYmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRyYWNpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCB0cmFjaW5nID0ge1xuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ESVNBQkxFX1RSQUNJTkcnKTtcbiAgICB9LFxufTtcbi8qKlxuICogR2xvYmFsIGNvbmZpZ3VyYXRpb24gZm9yIGxvZ2dpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBsb2dnaW5nID0ge1xuICAgIGdldCBkb250TG9nTW9kZWxEYXRhKCkge1xuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RPTlRfTE9HX01PREVMX0RBVEEnKTtcbiAgICB9LFxuICAgIGdldCBkb250TG9nVG9vbERhdGEoKSB7XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRE9OVF9MT0dfVE9PTF9EQVRBJyk7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcubWpzLm1hcCIsImltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQgeyBsb2dnaW5nIH0gZnJvbSBcIi4vY29uZmlnLm1qc1wiO1xuLyoqXG4gKiBCeSBkZWZhdWx0IHdlIGRvbid0IGxvZyBMTE0gaW5wdXRzL291dHB1dHMsIHRvIHByZXZlbnQgZXhwb3Npbmcgc2Vuc2l0aXZlIGRhdGEuIFNldCB0aGlzIGZsYWdcbiAqIHRvIGVuYWJsZSBsb2dnaW5nIHRoZW0uXG4gKi9cbmNvbnN0IGRvbnRMb2dNb2RlbERhdGEgPSBsb2dnaW5nLmRvbnRMb2dNb2RlbERhdGE7XG4vKipcbiAqIEJ5IGRlZmF1bHQgd2UgZG9uJ3QgbG9nIHRvb2wgaW5wdXRzL291dHB1dHMsIHRvIHByZXZlbnQgZXhwb3Npbmcgc2Vuc2l0aXZlIGRhdGEuIFNldCB0aGlzIGZsYWdcbiAqIHRvIGVuYWJsZSBsb2dnaW5nIHRoZW0uXG4gKi9cbmNvbnN0IGRvbnRMb2dUb29sRGF0YSA9IGxvZ2dpbmcuZG9udExvZ1Rvb2xEYXRhO1xuLyoqXG4gKiBHZXQgYSBsb2dnZXIgZm9yIGEgZ2l2ZW4gcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0gbmFtZXNwYWNlIC0gdGhlIG5hbWVzcGFjZSB0byB1c2UgZm9yIHRoZSBsb2dnZXIuXG4gKiBAcmV0dXJucyBBIGxvZ2dlciBvYmplY3Qgd2l0aCBgZGVidWdgIGFuZCBgZXJyb3JgIG1ldGhvZHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dnZXIobmFtZXNwYWNlID0gJ29wZW5haS1hZ2VudHMnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBkZWJ1ZzogZGVidWcobmFtZXNwYWNlKSxcbiAgICAgICAgZXJyb3I6IGNvbnNvbGUuZXJyb3IsXG4gICAgICAgIHdhcm46IGNvbnNvbGUud2FybixcbiAgICAgICAgZG9udExvZ01vZGVsRGF0YSxcbiAgICAgICAgZG9udExvZ1Rvb2xEYXRhLFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdvcGVuYWktYWdlbnRzOmNvcmUnKTtcbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvZ2dlci5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHRvU21hcnRTdHJpbmcodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1tvYmplY3Qgd2l0aCBjaXJjdWxhciByZWZlcmVuY2VzXSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zbWFydFN0cmluZy5tanMubWFwIiwiaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbmltcG9ydCB7IHRvRnVuY3Rpb25Ub29sTmFtZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi91dGlscy90eXBlR3VhcmRzLm1qc1wiO1xuaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHRvU21hcnRTdHJpbmcgfSBmcm9tIFwiLi91dGlscy9zbWFydFN0cmluZy5tanNcIjtcbi8qKlxuICogRXhwb3NlcyBhIGNvbXB1dGVyIHRvIHRoZSBhZ2VudCBhcyBhIHRvb2wgdG8gYmUgY2FsbGVkXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGUgY29tcHV0ZXIgdG9vbCBsaWtlIHNwZWNpZnlpbmcgdGhlIGxvY2F0aW9uIG9mIHlvdXIgYWdlbnRcbiAqIEByZXR1cm5zIGEgY29tcHV0ZXIgdG9vbCBkZWZpbml0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlclRvb2wob3B0aW9ucykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdjb21wdXRlcicsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSA/PyAnY29tcHV0ZXJfdXNlX3ByZXZpZXcnLFxuICAgICAgICBjb21wdXRlcjogb3B0aW9ucy5jb21wdXRlcixcbiAgICB9O1xufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgcnVubmluZyB0aGUgdG9vbC5cbiAqXG4gKiBBbHdheXMgcmV0dXJucyBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6IDxlcnJvciBkZXRhaWxzPmBcbiAqXG4gKiBAcGFyYW0gY29udGV4dCBBbiBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBSdW5Db250ZXh0XG4gKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIHRoYXQgb2NjdXJyZWRcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRvb2xFcnJvckZ1bmN0aW9uKGNvbnRleHQsIGVycm9yKSB7XG4gICAgY29uc3QgZGV0YWlscyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci50b1N0cmluZygpIDogU3RyaW5nKGVycm9yKTtcbiAgICByZXR1cm4gYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJ1bm5pbmcgdGhlIHRvb2wuIFBsZWFzZSB0cnkgYWdhaW4uIEVycm9yOiAke2RldGFpbHN9YDtcbn1cbi8qKlxuICogRXhwb3NlcyBhIGZ1bmN0aW9uIHRvIHRoZSBhZ2VudCBhcyBhIHRvb2wgdG8gYmUgY2FsbGVkXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgZm9yIHRoZSB0b29sXG4gKiBAcmV0dXJucyBBIG5ldyB0b29sXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgICAgID8gdG9GdW5jdGlvblRvb2xOYW1lKG9wdGlvbnMubmFtZSlcbiAgICAgICAgOiB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5leGVjdXRlLm5hbWUpO1xuICAgIGNvbnN0IHRvb2xFcnJvckZ1bmN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZXJyb3JGdW5jdGlvbiA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb25cbiAgICAgICAgOiBvcHRpb25zLmVycm9yRnVuY3Rpb247XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vbCBuYW1lIGNhbm5vdCBiZSBlbXB0eS4gRWl0aGVyIG5hbWUgeW91ciBmdW5jdGlvbiBvciBwcm92aWRlIGEgbmFtZSBpbiB0aGUgb3B0aW9ucy4nKTtcbiAgICB9XG4gICAgY29uc3Qgc3RyaWN0TW9kZSA9IG9wdGlvbnMuc3RyaWN0ID8/IHRydWU7XG4gICAgaWYgKCFzdHJpY3RNb2RlICYmIGlzWm9kT2JqZWN0KG9wdGlvbnMucGFyYW1ldGVycykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignU3RyaWN0IG1vZGUgaXMgcmVxdWlyZWQgZm9yIFpvZCBwYXJhbWV0ZXJzJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgcGFyc2VyLCBzY2hlbWE6IHBhcmFtZXRlcnMgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUob3B0aW9ucy5wYXJhbWV0ZXJzLCBuYW1lKTtcbiAgICBhc3luYyBmdW5jdGlvbiBfaW52b2tlKHJ1bkNvbnRleHQsIGlucHV0KSB7XG4gICAgICAgIGNvbnN0IFtlcnJvciwgcGFyc2VkXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihpbnB1dCkpO1xuICAgICAgICBpZiAoZXJyb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfTogJHtpbnB1dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZva2luZyB0b29sICR7bmFtZX0gd2l0aCBpbnB1dCAke2lucHV0fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wdGlvbnMuZXhlY3V0ZShwYXJzZWQsIHJ1bkNvbnRleHQpO1xuICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFRvb2wgJHtuYW1lfSBjb21wbGV0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IHJldHVybmVkOiAke3N0cmluZ1Jlc3VsdH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2UocnVuQ29udGV4dCwgaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKHRvb2xFcnJvckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBydW5uaW5nIHRvb2wgKG5vbi1mYXRhbCknLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9vbEVycm9yRnVuY3Rpb24ocnVuQ29udGV4dCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24sXG4gICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgIHN0cmljdDogc3RyaWN0TW9kZSxcbiAgICAgICAgaW52b2tlLFxuICAgICAgICBuZWVkc0FwcHJvdmFsLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sLm1qcy5tYXAiLCJleHBvcnQgdmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKF8pID0+IHsgfTtcbiAgICBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbiAgICB1dGlsLmFzc2VydElzID0gYXNzZXJ0SXM7XG4gICAgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0TmV2ZXIgPSBhc3NlcnROZXZlcjtcbiAgICB1dGlsLmFycmF5VG9FbnVtID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIG9ialtpdGVtXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICAgIHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEtleXMgPSB1dGlsLm9iamVjdEtleXMob2JqKS5maWx0ZXIoKGspID0+IHR5cGVvZiBvYmpbb2JqW2tdXSAhPT0gXCJudW1iZXJcIik7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBvZiB2YWxpZEtleXMpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyhmaWx0ZXJlZCk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdFZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0S2V5cyhvYmopLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ialtlXTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdEtleXMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09IFwiZnVuY3Rpb25cIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgPyAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6IChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgIHV0aWwuZmluZCA9IChhcnIsIGNoZWNrZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgICAgICAgICAgaWYgKGNoZWNrZXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHV0aWwuaXNJbnRlZ2VyID0gdHlwZW9mIE51bWJlci5pc0ludGVnZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/ICh2YWwpID0+IE51bWJlci5pc0ludGVnZXIodmFsKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0Zpbml0ZSh2YWwpICYmIE1hdGguZmxvb3IodmFsKSA9PT0gdmFsO1xuICAgIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKS5qb2luKHNlcGFyYXRvcik7XG4gICAgfVxuICAgIHV0aWwuam9pblZhbHVlcyA9IGpvaW5WYWx1ZXM7XG4gICAgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIgPSAoXywgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG59KSh1dGlsIHx8ICh1dGlsID0ge30pKTtcbmV4cG9ydCB2YXIgb2JqZWN0VXRpbDtcbihmdW5jdGlvbiAob2JqZWN0VXRpbCkge1xuICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXMgPSAoZmlyc3QsIHNlY29uZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmlyc3QsXG4gICAgICAgICAgICAuLi5zZWNvbmQsIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgICAgIH07XG4gICAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmV4cG9ydCBjb25zdCBnZXRQYXJzZWRUeXBlID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZDtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3RyaW5nO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gWm9kUGFyc2VkVHlwZS5uYW4gOiBab2RQYXJzZWRUeXBlLm51bWJlcjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJvb2xlYW47XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJpZ2ludDtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3ltYm9sO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5udWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5tYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVua25vd247XG4gICAgfVxufTtcbiIsImltcG9ydCB7IHV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmV4cG9ydCBjb25zdCBab2RJc3N1ZUNvZGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcImludmFsaWRfdHlwZVwiLFxuICAgIFwiaW52YWxpZF9saXRlcmFsXCIsXG4gICAgXCJjdXN0b21cIixcbiAgICBcImludmFsaWRfdW5pb25cIixcbiAgICBcImludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvclwiLFxuICAgIFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIsXG4gICAgXCJ1bnJlY29nbml6ZWRfa2V5c1wiLFxuICAgIFwiaW52YWxpZF9hcmd1bWVudHNcIixcbiAgICBcImludmFsaWRfcmV0dXJuX3R5cGVcIixcbiAgICBcImludmFsaWRfZGF0ZVwiLFxuICAgIFwiaW52YWxpZF9zdHJpbmdcIixcbiAgICBcInRvb19zbWFsbFwiLFxuICAgIFwidG9vX2JpZ1wiLFxuICAgIFwiaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXNcIixcbiAgICBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICAgIFwibm90X2Zpbml0ZVwiLFxuXSk7XG5leHBvcnQgY29uc3QgcXVvdGVsZXNzSnNvbiA9IChvYmopID0+IHtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICByZXR1cm4ganNvbi5yZXBsYWNlKC9cIihbXlwiXSspXCI6L2csIFwiJDE6XCIpO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBnZXQgZXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXM7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlzc3Vlcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IFtdO1xuICAgICAgICB0aGlzLmFkZElzc3VlID0gKHN1YikgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIHN1Yl07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkSXNzdWVzID0gKHN1YnMgPSBbXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIC4uLnN1YnNdO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhY3R1YWxQcm90byA9IG5ldy50YXJnZXQucHJvdG90eXBlO1xuICAgICAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFuL2JhblxuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGFjdHVhbFByb3RvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19wcm90b19fID0gYWN0dWFsUHJvdG87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gXCJab2RFcnJvclwiO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlcztcbiAgICB9XG4gICAgZm9ybWF0KF9tYXBwZXIpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyID0gX21hcHBlciB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3JldHVybl90eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLnJldHVyblR5cGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUuYXJndW1lbnRzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5wYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXNzdWUucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gaXNzdWUucGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAodHlwZW9mIGVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBlcnJvckFycmF5OiBhbnkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVycm9yQXJyYXkuX2Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCBlcnJvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvY2Vzc0Vycm9yKHRoaXMpO1xuICAgICAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnQodmFsdWUpIHtcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBab2RFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGEgWm9kRXJyb3I6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGZsYXR0ZW4obWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0ge307XG4gICAgICAgIGNvbnN0IGZvcm1FcnJvcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgdGhpcy5pc3N1ZXMpIHtcbiAgICAgICAgICAgIGlmIChzdWIucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dID0gZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dIHx8IFtdO1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXS5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1FcnJvcnMucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZm9ybUVycm9ycywgZmllbGRFcnJvcnMgfTtcbiAgICB9XG4gICAgZ2V0IGZvcm1FcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXR0ZW4oKTtcbiAgICB9XG59XG5ab2RFcnJvci5jcmVhdGUgPSAoaXNzdWVzKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoaXNzdWVzKTtcbiAgICByZXR1cm4gZXJyb3I7XG59O1xuIiwiaW1wb3J0IHsgWm9kSXNzdWVDb2RlIH0gZnJvbSBcIi4uL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlIH0gZnJvbSBcIi4uL2hlbHBlcnMvdXRpbC5qc1wiO1xuY29uc3QgZXJyb3JNYXAgPSAoaXNzdWUsIF9jdHgpID0+IHtcbiAgICBsZXQgbWVzc2FnZTtcbiAgICBzd2l0Y2ggKGlzc3VlLmNvZGUpIHtcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnJlY2VpdmVkID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlJlcXVpcmVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEV4cGVjdGVkICR7aXNzdWUuZXhwZWN0ZWR9LCByZWNlaXZlZCAke2lzc3VlLnJlY2VpdmVkfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGxpdGVyYWwgdmFsdWUsIGV4cGVjdGVkICR7SlNPTi5zdHJpbmdpZnkoaXNzdWUuZXhwZWN0ZWQsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyKX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBVbnJlY29nbml6ZWQga2V5KHMpIGluIG9iamVjdDogJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUua2V5cywgXCIsIFwiKX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb246XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBkaXNjcmltaW5hdG9yIHZhbHVlLiBFeHBlY3RlZCAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5vcHRpb25zKX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBlbnVtIHZhbHVlLiBFeHBlY3RlZCAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5vcHRpb25zKX0sIHJlY2VpdmVkICcke2lzc3VlLnJlY2VpdmVkfSdgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfYXJndW1lbnRzOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIGFyZ3VtZW50c2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBmdW5jdGlvbiByZXR1cm4gdHlwZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9kYXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRhdGVgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nOlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZS52YWxpZGF0aW9uID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5jbHVkZXNcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBpbmNsdWRlIFwiJHtpc3N1ZS52YWxpZGF0aW9uLmluY2x1ZGVzfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZS52YWxpZGF0aW9uLnBvc2l0aW9uID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gYXQgb25lIG9yIG1vcmUgcG9zaXRpb25zIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAke2lzc3VlLnZhbGlkYXRpb24ucG9zaXRpb259YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChcInN0YXJ0c1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBzdGFydCB3aXRoIFwiJHtpc3N1ZS52YWxpZGF0aW9uLnN0YXJ0c1dpdGh9XCJgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChcImVuZHNXaXRoXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3QgZW5kIHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uZW5kc1dpdGh9XCJgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihpc3N1ZS52YWxpZGF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS52YWxpZGF0aW9uICE9PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgJHtpc3N1ZS52YWxpZGF0aW9ufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudG9vX3NtYWxsOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gXCJleGFjdGx5XCIgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbGVhc3RgIDogYG1vcmUgdGhhbmB9ICR7aXNzdWUubWluaW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gXCJleGFjdGx5XCIgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbGVhc3RgIDogYG92ZXJgfSAke2lzc3VlLm1pbmltdW19IGNoYXJhY3RlcihzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5IGVxdWFsIHRvIGAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGAgOiBgZ3JlYXRlciB0aGFuIGB9JHtpc3N1ZS5taW5pbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke25ldyBEYXRlKE51bWJlcihpc3N1ZS5taW5pbXVtKSl9YDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudG9vX2JpZzpcbiAgICAgICAgICAgIGlmIChpc3N1ZS50eXBlID09PSBcImFycmF5XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBBcnJheSBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBtb3N0YCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19IGVsZW1lbnQocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFN0cmluZyBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBtb3N0YCA6IGB1bmRlcmB9ICR7aXNzdWUubWF4aW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2AgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImJpZ2ludFwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQmlnSW50IG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBsZXNzIHRoYW4gb3IgZXF1YWwgdG9gIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBzbWFsbGVyIHRoYW4gb3IgZXF1YWwgdG9gIDogYHNtYWxsZXIgdGhhbmB9ICR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1heGltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5jdXN0b206XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnRlcnNlY3Rpb24gcmVzdWx0cyBjb3VsZCBub3QgYmUgbWVyZ2VkYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2Y6XG4gICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgJHtpc3N1ZS5tdWx0aXBsZU9mfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X2Zpbml0ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIk51bWJlciBtdXN0IGJlIGZpbml0ZVwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBtZXNzYWdlID0gX2N0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IGVycm9yTWFwO1xuIiwiaW1wb3J0IGRlZmF1bHRFcnJvck1hcCBmcm9tIFwiLi9sb2NhbGVzL2VuLmpzXCI7XG5sZXQgb3ZlcnJpZGVFcnJvck1hcCA9IGRlZmF1bHRFcnJvck1hcDtcbmV4cG9ydCB7IGRlZmF1bHRFcnJvck1hcCB9O1xuZXhwb3J0IGZ1bmN0aW9uIHNldEVycm9yTWFwKG1hcCkge1xuICAgIG92ZXJyaWRlRXJyb3JNYXAgPSBtYXA7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RXJyb3JNYXAoKSB7XG4gICAgcmV0dXJuIG92ZXJyaWRlRXJyb3JNYXA7XG59XG4iLCJpbXBvcnQgeyBnZXRFcnJvck1hcCB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCBkZWZhdWx0RXJyb3JNYXAgZnJvbSBcIi4uL2xvY2FsZXMvZW4uanNcIjtcbmV4cG9ydCBjb25zdCBtYWtlSXNzdWUgPSAocGFyYW1zKSA9PiB7XG4gICAgY29uc3QgeyBkYXRhLCBwYXRoLCBlcnJvck1hcHMsIGlzc3VlRGF0YSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGZ1bGxQYXRoID0gWy4uLnBhdGgsIC4uLihpc3N1ZURhdGEucGF0aCB8fCBbXSldO1xuICAgIGNvbnN0IGZ1bGxJc3N1ZSA9IHtcbiAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICB9O1xuICAgIGlmIChpc3N1ZURhdGEubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGlzc3VlRGF0YS5tZXNzYWdlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgZXJyb3JNZXNzYWdlID0gXCJcIjtcbiAgICBjb25zdCBtYXBzID0gZXJyb3JNYXBzXG4gICAgICAgIC5maWx0ZXIoKG0pID0+ICEhbSlcbiAgICAgICAgLnNsaWNlKClcbiAgICAgICAgLnJldmVyc2UoKTtcbiAgICBmb3IgKGNvbnN0IG1hcCBvZiBtYXBzKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IG1hcChmdWxsSXNzdWUsIHsgZGF0YSwgZGVmYXVsdEVycm9yOiBlcnJvck1lc3NhZ2UgfSkubWVzc2FnZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICAgICAgbWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IEVNUFRZX1BBVEggPSBbXTtcbmV4cG9ydCBmdW5jdGlvbiBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIGlzc3VlRGF0YSkge1xuICAgIGNvbnN0IG92ZXJyaWRlTWFwID0gZ2V0RXJyb3JNYXAoKTtcbiAgICBjb25zdCBpc3N1ZSA9IG1ha2VJc3N1ZSh7XG4gICAgICAgIGlzc3VlRGF0YTogaXNzdWVEYXRhLFxuICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgIGVycm9yTWFwczogW1xuICAgICAgICAgICAgY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIC8vIGNvbnRleHR1YWwgZXJyb3IgbWFwIGlzIGZpcnN0IHByaW9yaXR5XG4gICAgICAgICAgICBjdHguc2NoZW1hRXJyb3JNYXAsIC8vIHRoZW4gc2NoZW1hLWJvdW5kIG1hcCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgIG92ZXJyaWRlTWFwLCAvLyB0aGVuIGdsb2JhbCBvdmVycmlkZSBtYXBcbiAgICAgICAgICAgIG92ZXJyaWRlTWFwID09PSBkZWZhdWx0RXJyb3JNYXAgPyB1bmRlZmluZWQgOiBkZWZhdWx0RXJyb3JNYXAsIC8vIHRoZW4gZ2xvYmFsIGRlZmF1bHQgbWFwXG4gICAgICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgIH0pO1xuICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goaXNzdWUpO1xufVxuZXhwb3J0IGNsYXNzIFBhcnNlU3RhdHVzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwidmFsaWRcIjtcbiAgICB9XG4gICAgZGlydHkoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBcInZhbGlkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJkaXJ0eVwiO1xuICAgIH1cbiAgICBhYm9ydCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiYWJvcnRlZFwiO1xuICAgIH1cbiAgICBzdGF0aWMgbWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpIHtcbiAgICAgICAgY29uc3QgYXJyYXlWYWx1ZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmIChzLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgYXJyYXlWYWx1ZS5wdXNoKHMudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogYXJyYXlWYWx1ZSB9O1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgbWVyZ2VPYmplY3RBc3luYyhzdGF0dXMsIHBhaXJzKSB7XG4gICAgICAgIGNvbnN0IHN5bmNQYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgIH1cbiAgICBzdGF0aWMgbWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICAgICAgY29uc3QgZmluYWxPYmplY3QgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICBjb25zdCB7IGtleSwgdmFsdWUgfSA9IHBhaXI7XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAodmFsdWUuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBpZiAodmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBpZiAoa2V5LnZhbHVlICE9PSBcIl9fcHJvdG9fX1wiICYmICh0eXBlb2YgdmFsdWUudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgfHwgcGFpci5hbHdheXNTZXQpKSB7XG4gICAgICAgICAgICAgICAgZmluYWxPYmplY3Rba2V5LnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxPYmplY3QgfTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgSU5WQUxJRCA9IE9iamVjdC5mcmVlemUoe1xuICAgIHN0YXR1czogXCJhYm9ydGVkXCIsXG59KTtcbmV4cG9ydCBjb25zdCBESVJUWSA9ICh2YWx1ZSkgPT4gKHsgc3RhdHVzOiBcImRpcnR5XCIsIHZhbHVlIH0pO1xuZXhwb3J0IGNvbnN0IE9LID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWUgfSk7XG5leHBvcnQgY29uc3QgaXNBYm9ydGVkID0gKHgpID0+IHguc3RhdHVzID09PSBcImFib3J0ZWRcIjtcbmV4cG9ydCBjb25zdCBpc0RpcnR5ID0gKHgpID0+IHguc3RhdHVzID09PSBcImRpcnR5XCI7XG5leHBvcnQgY29uc3QgaXNWYWxpZCA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJ2YWxpZFwiO1xuZXhwb3J0IGNvbnN0IGlzQXN5bmMgPSAoeCkgPT4gdHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIgJiYgeCBpbnN0YW5jZW9mIFByb21pc2U7XG4iLCJleHBvcnQgdmFyIGVycm9yVXRpbDtcbihmdW5jdGlvbiAoZXJyb3JVdGlsKSB7XG4gICAgZXJyb3JVdGlsLmVyclRvT2JqID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlIH0gOiBtZXNzYWdlIHx8IHt9O1xuICAgIC8vIGJpb21lLWlnbm9yZSBsaW50OlxuICAgIGVycm9yVXRpbC50b1N0cmluZyA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBtZXNzYWdlPy5tZXNzYWdlO1xufSkoZXJyb3JVdGlsIHx8IChlcnJvclV0aWwgPSB7fSkpO1xuIiwiaW1wb3J0IHsgWm9kRXJyb3IsIFpvZElzc3VlQ29kZSwgfSBmcm9tIFwiLi9ab2RFcnJvci5qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdEVycm9yTWFwLCBnZXRFcnJvck1hcCB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgZXJyb3JVdGlsIH0gZnJvbSBcIi4vaGVscGVycy9lcnJvclV0aWwuanNcIjtcbmltcG9ydCB7IERJUlRZLCBJTlZBTElELCBPSywgUGFyc2VTdGF0dXMsIGFkZElzc3VlVG9Db250ZXh0LCBpc0Fib3J0ZWQsIGlzQXN5bmMsIGlzRGlydHksIGlzVmFsaWQsIG1ha2VJc3N1ZSwgfSBmcm9tIFwiLi9oZWxwZXJzL3BhcnNlVXRpbC5qc1wiO1xuaW1wb3J0IHsgdXRpbCwgWm9kUGFyc2VkVHlwZSwgZ2V0UGFyc2VkVHlwZSB9IGZyb20gXCIuL2hlbHBlcnMvdXRpbC5qc1wiO1xuY2xhc3MgUGFyc2VJbnB1dExhenlQYXRoIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIHZhbHVlLCBwYXRoLCBrZXkpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVkUGF0aCA9IFtdO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5kYXRhID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX3BhdGggPSBwYXRoO1xuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlZFBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl9rZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIC4uLnRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgdGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUGF0aDtcbiAgICB9XG59XG5jb25zdCBoYW5kbGVSZXN1bHQgPSAoY3R4LCByZXN1bHQpID0+IHtcbiAgICBpZiAoaXNWYWxpZChyZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdC52YWx1ZSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFjdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZhbGlkYXRpb24gZmFpbGVkIGJ1dCBubyBpc3N1ZXMgZGV0ZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihjdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn07XG5mdW5jdGlvbiBwcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zKVxuICAgICAgICByZXR1cm4ge307XG4gICAgY29uc3QgeyBlcnJvck1hcCwgaW52YWxpZF90eXBlX2Vycm9yLCByZXF1aXJlZF9lcnJvciwgZGVzY3JpcHRpb24gfSA9IHBhcmFtcztcbiAgICBpZiAoZXJyb3JNYXAgJiYgKGludmFsaWRfdHlwZV9lcnJvciB8fCByZXF1aXJlZF9lcnJvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCB1c2UgXCJpbnZhbGlkX3R5cGVfZXJyb3JcIiBvciBcInJlcXVpcmVkX2Vycm9yXCIgaW4gY29uanVuY3Rpb24gd2l0aCBjdXN0b20gZXJyb3IgbWFwLmApO1xuICAgIH1cbiAgICBpZiAoZXJyb3JNYXApXG4gICAgICAgIHJldHVybiB7IGVycm9yTWFwOiBlcnJvck1hcCwgZGVzY3JpcHRpb24gfTtcbiAgICBjb25zdCBjdXN0b21NYXAgPSAoaXNzLCBjdHgpID0+IHtcbiAgICAgICAgY29uc3QgeyBtZXNzYWdlIH0gPSBwYXJhbXM7XG4gICAgICAgIGlmIChpc3MuY29kZSA9PT0gXCJpbnZhbGlkX2VudW1fdmFsdWVcIikge1xuICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjdHguZGF0YSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyByZXF1aXJlZF9lcnJvciA/PyBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzcy5jb2RlICE9PSBcImludmFsaWRfdHlwZVwiKVxuICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGludmFsaWRfdHlwZV9lcnJvciA/PyBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgfTtcbiAgICByZXR1cm4geyBlcnJvck1hcDogY3VzdG9tTWFwLCBkZXNjcmlwdGlvbiB9O1xufVxuZXhwb3J0IGNsYXNzIFpvZFR5cGUge1xuICAgIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgX2dldFR5cGUoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIF9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KSB7XG4gICAgICAgIHJldHVybiAoY3R4IHx8IHtcbiAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogbmV3IFBhcnNlU3RhdHVzKCksXG4gICAgICAgICAgICBjdHg6IHtcbiAgICAgICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpLFxuICAgICAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9wYXJzZVN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICBpZiAoaXNBc3luYyhyZXN1bHQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeW5jaHJvbm91cyBwYXJzZSBlbmNvdW50ZXJlZCBwcm9taXNlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBfcGFyc2VBc3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICB9XG4gICAgcGFyc2UoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2FmZVBhcnNlKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBzYWZlUGFyc2UoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgYXN5bmM6IHBhcmFtcz8uYXN5bmMgPz8gZmFsc2UsXG4gICAgICAgICAgICAgICAgY29udGV4dHVhbEVycm9yTWFwOiBwYXJhbXM/LmVycm9yTWFwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IHBhcmFtcz8ucGF0aCB8fCBbXSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShkYXRhKSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgICAgICByZXR1cm4gaGFuZGxlUmVzdWx0KGN0eCwgcmVzdWx0KTtcbiAgICB9XG4gICAgXCJ+dmFsaWRhdGVcIihkYXRhKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgYXN5bmM6ICEhdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBbXSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShkYXRhKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IFtdLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogY3R4LmNvbW1vbi5pc3N1ZXMsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycj8ubWVzc2FnZT8udG9Mb3dlckNhc2UoKT8uaW5jbHVkZXMoXCJlbmNvdW50ZXJlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcGFyc2VBc3luYyh7IGRhdGEsIHBhdGg6IFtdLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChyZXN1bHQpID0+IGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIGlzc3VlczogY3R4LmNvbW1vbi5pc3N1ZXMsXG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgYXN5bmMgc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgY29udGV4dHVhbEVycm9yTWFwOiBwYXJhbXM/LmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IHBhcmFtcz8ucGF0aCB8fCBbXSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShkYXRhKSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbWF5YmVBc3luY1Jlc3VsdCA9IHRoaXMuX3BhcnNlKHsgZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAoaXNBc3luYyhtYXliZUFzeW5jUmVzdWx0KSA/IG1heWJlQXN5bmNSZXN1bHQgOiBQcm9taXNlLnJlc29sdmUobWF5YmVBc3luY1Jlc3VsdCkpO1xuICAgICAgICByZXR1cm4gaGFuZGxlUmVzdWx0KGN0eCwgcmVzdWx0KTtcbiAgICB9XG4gICAgcmVmaW5lKGNoZWNrLCBtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGdldElzc3VlUHJvcGVydGllcyA9ICh2YWwpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgbWVzc2FnZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZSh2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2hlY2sodmFsKTtcbiAgICAgICAgICAgIGNvbnN0IHNldEVycm9yID0gKCkgPT4gY3R4LmFkZElzc3VlKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuY3VzdG9tLFxuICAgICAgICAgICAgICAgIC4uLmdldElzc3VlUHJvcGVydGllcyh2YWwpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVmaW5lbWVudChjaGVjaywgcmVmaW5lbWVudERhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNoZWNrKHZhbCkpIHtcbiAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUodHlwZW9mIHJlZmluZW1lbnREYXRhID09PSBcImZ1bmN0aW9uXCIgPyByZWZpbmVtZW50RGF0YSh2YWwsIGN0eCkgOiByZWZpbmVtZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcmVmaW5lbWVudChyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJyZWZpbmVtZW50XCIsIHJlZmluZW1lbnQgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN1cGVyUmVmaW5lKHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQocmVmaW5lbWVudCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGRlZikge1xuICAgICAgICAvKiogQWxpYXMgb2Ygc2FmZVBhcnNlQXN5bmMgKi9cbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNhZmVQYXJzZUFzeW5jO1xuICAgICAgICB0aGlzLl9kZWYgPSBkZWY7XG4gICAgICAgIHRoaXMucGFyc2UgPSB0aGlzLnBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2FmZVBhcnNlID0gdGhpcy5zYWZlUGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJzZUFzeW5jID0gdGhpcy5wYXJzZUFzeW5jLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2FmZVBhcnNlQXN5bmMgPSB0aGlzLnNhZmVQYXJzZUFzeW5jLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zcGEuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmUgPSB0aGlzLnJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZW1lbnQgPSB0aGlzLnJlZmluZW1lbnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdXBlclJlZmluZSA9IHRoaXMuc3VwZXJSZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vcHRpb25hbCA9IHRoaXMub3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5udWxsYWJsZSA9IHRoaXMubnVsbGFibGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5udWxsaXNoID0gdGhpcy5udWxsaXNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXkgPSB0aGlzLmFycmF5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IHRoaXMucHJvbWlzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9yID0gdGhpcy5vci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFuZCA9IHRoaXMuYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gdGhpcy50cmFuc2Zvcm0uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5icmFuZCA9IHRoaXMuYnJhbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gdGhpcy5kZWZhdWx0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2F0Y2ggPSB0aGlzLmNhdGNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVzY3JpYmUgPSB0aGlzLmRlc2NyaWJlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGlwZSA9IHRoaXMucGlwZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gdGhpcy5yZWFkb25seS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzTnVsbGFibGUgPSB0aGlzLmlzTnVsbGFibGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc09wdGlvbmFsID0gdGhpcy5pc09wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0gPSB7XG4gICAgICAgICAgICB2ZXJzaW9uOiAxLFxuICAgICAgICAgICAgdmVuZG9yOiBcInpvZFwiLFxuICAgICAgICAgICAgdmFsaWRhdGU6IChkYXRhKSA9PiB0aGlzW1wifnZhbGlkYXRlXCJdKGRhdGEpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBvcHRpb25hbCgpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBudWxsYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBudWxsaXNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5udWxsYWJsZSgpLm9wdGlvbmFsKCk7XG4gICAgfVxuICAgIGFycmF5KCkge1xuICAgICAgICByZXR1cm4gWm9kQXJyYXkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBwcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gWm9kUHJvbWlzZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgb3Iob3B0aW9uKSB7XG4gICAgICAgIHJldHVybiBab2RVbmlvbi5jcmVhdGUoW3RoaXMsIG9wdGlvbl0sIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIGFuZChpbmNvbWluZykge1xuICAgICAgICByZXR1cm4gWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSh0aGlzLCBpbmNvbWluZywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgdHJhbnNmb3JtKHRyYW5zZm9ybSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVmYXVsdChkZWYpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlRnVuYyA9IHR5cGVvZiBkZWYgPT09IFwiZnVuY3Rpb25cIiA/IGRlZiA6ICgpID0+IGRlZjtcbiAgICAgICAgcmV0dXJuIG5ldyBab2REZWZhdWx0KHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdFZhbHVlRnVuYyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGJyYW5kKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEJyYW5kZWQoe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkLFxuICAgICAgICAgICAgdHlwZTogdGhpcyxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoKGRlZikge1xuICAgICAgICBjb25zdCBjYXRjaFZhbHVlRnVuYyA9IHR5cGVvZiBkZWYgPT09IFwiZnVuY3Rpb25cIiA/IGRlZiA6ICgpID0+IGRlZjtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RDYXRjaCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBjYXRjaFZhbHVlOiBjYXRjaFZhbHVlRnVuYyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQ2F0Y2gsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXNjcmliZShkZXNjcmlwdGlvbikge1xuICAgICAgICBjb25zdCBUaGlzID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBUaGlzKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGlwZSh0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIFpvZFBpcGVsaW5lLmNyZWF0ZSh0aGlzLCB0YXJnZXQpO1xuICAgIH1cbiAgICByZWFkb25seSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFJlYWRvbmx5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgaXNPcHRpb25hbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2FmZVBhcnNlKHVuZGVmaW5lZCkuc3VjY2VzcztcbiAgICB9XG4gICAgaXNOdWxsYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2FmZVBhcnNlKG51bGwpLnN1Y2Nlc3M7XG4gICAgfVxufVxuY29uc3QgY3VpZFJlZ2V4ID0gL15jW15cXHMtXXs4LH0kL2k7XG5jb25zdCBjdWlkMlJlZ2V4ID0gL15bMC05YS16XSskLztcbmNvbnN0IHVsaWRSZWdleCA9IC9eWzAtOUEtSEpLTU5QLVRWLVpdezI2fSQvaTtcbi8vIGNvbnN0IHV1aWRSZWdleCA9XG4vLyAgIC9eKFthLWYwLTldezh9LVthLWYwLTldezR9LVsxLTVdW2EtZjAtOV17M30tW2EtZjAtOV17NH0tW2EtZjAtOV17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7XG5jb25zdCB1dWlkUmVnZXggPSAvXlswLTlhLWZBLUZdezh9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezEyfSQvaTtcbmNvbnN0IG5hbm9pZFJlZ2V4ID0gL15bYS16MC05Xy1dezIxfSQvaTtcbmNvbnN0IGp3dFJlZ2V4ID0gL15bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXSokLztcbmNvbnN0IGR1cmF0aW9uUmVnZXggPSAvXlstK10/UCg/ISQpKD86KD86Wy0rXT9cXGQrWSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtZJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzooPzpbLStdP1xcZCtXKXwoPzpbLStdP1xcZCtbLixdXFxkK1ckKSk/KD86KD86Wy0rXT9cXGQrRCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtEJCkpPyg/OlQoPz1bXFxkKy1dKSg/Oig/OlstK10/XFxkK0gpfCg/OlstK10/XFxkK1suLF1cXGQrSCQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86Wy0rXT9cXGQrKD86Wy4sXVxcZCspP1MpPyk/PyQvO1xuLy8gZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDYxODEvMTU1MDE1NVxuLy8gb2xkIHZlcnNpb246IHRvbyBzbG93LCBkaWRuJ3Qgc3VwcG9ydCB1bmljb2RlXG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKChbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpJC9pO1xuLy9vbGQgZW1haWwgcmVnZXhcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoW148PigpW1xcXS4sOzpcXHNAXCJdKyhcXC5bXjw+KClbXFxdLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKD8hLSkoW148PigpW1xcXS4sOzpcXHNAXCJdK1xcLikrW148PigpW1xcXS4sOzpcXHNAXCJdezEsfSlbXi08PigpW1xcXS4sOzpcXHNAXCJdJC9pO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL14oKFtePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSsoXFwuW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKykqKXwoXFxcIi4rXFxcIikpQCgoXFxbKCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFxdKXwoXFxbSVB2NjooKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpXFxdKXwoW0EtWmEtejAtOV0oW0EtWmEtejAtOS1dKltBLVphLXowLTldKSooXFwuW0EtWmEtel17Mix9KSspKSQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eW2EtekEtWjAtOVxcLlxcIVxcI1xcJFxcJVxcJlxcJ1xcKlxcK1xcL1xcPVxcP1xcXlxcX1xcYFxce1xcfFxcfVxcflxcLV0rQFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL14oPzpbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqfFwiKD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjFcXHgyMy1cXHg1YlxceDVkLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkqXCIpQCg/Oig/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT98XFxbKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT98W2EtejAtOS1dKlthLXowLTldOig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxLVxceDVhXFx4NTMtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSspXFxdKSQvaTtcbmNvbnN0IGVtYWlsUmVnZXggPSAvXig/IVxcLikoPyEuKlxcLlxcLikoW0EtWjAtOV8nK1xcLVxcLl0qKVtBLVowLTlfKy1dQChbQS1aMC05XVtBLVowLTlcXC1dKlxcLikrW0EtWl17Mix9JC9pO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eW2EtejAtOS4hIyQlJuKAmSorLz0/Xl9ge3x9fi1dK0BbYS16MC05LV0rKD86XFwuW2EtejAtOVxcLV0rKSokL2k7XG4vLyBmcm9tIGh0dHBzOi8vdGhla2V2aW5zY290dC5jb20vZW1vamlzLWluLWphdmFzY3JpcHQvI3dyaXRpbmctYS1yZWd1bGFyLWV4cHJlc3Npb25cbmNvbnN0IF9lbW9qaVJlZ2V4ID0gYF4oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskYDtcbmxldCBlbW9qaVJlZ2V4O1xuLy8gZmFzdGVyLCBzaW1wbGVyLCBzYWZlclxuY29uc3QgaXB2NFJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLztcbmNvbnN0IGlwdjRDaWRyUmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLygzWzAtMl18WzEyXT9bMC05XSkkLztcbi8vIGNvbnN0IGlwdjZSZWdleCA9XG4vLyAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLztcbmNvbnN0IGlwdjZSZWdleCA9IC9eKChbMC05YS1mQS1GXXsxLDR9Oil7Nyw3fVswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDd9OnwoWzAtOWEtZkEtRl17MSw0fTopezEsNn06WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsNX0oOlswLTlhLWZBLUZdezEsNH0pezEsMn18KFswLTlhLWZBLUZdezEsNH06KXsxLDR9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDN9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwzfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsMn0oOlswLTlhLWZBLUZdezEsNH0pezEsNX18WzAtOWEtZkEtRl17MSw0fTooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDZ9KXw6KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw3fXw6KXxmZTgwOig6WzAtOWEtZkEtRl17MCw0fSl7MCw0fSVbMC05YS16QS1aXXsxLH18OjooZmZmZig6MHsxLDR9KXswLDF9Oil7MCwxfSgoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH06KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pKSQvO1xuY29uc3QgaXB2NkNpZHJSZWdleCA9IC9eKChbMC05YS1mQS1GXXsxLDR9Oil7Nyw3fVswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDd9OnwoWzAtOWEtZkEtRl17MSw0fTopezEsNn06WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsNX0oOlswLTlhLWZBLUZdezEsNH0pezEsMn18KFswLTlhLWZBLUZdezEsNH06KXsxLDR9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDN9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwzfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsMn0oOlswLTlhLWZBLUZdezEsNH0pezEsNX18WzAtOWEtZkEtRl17MSw0fTooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDZ9KXw6KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw3fXw6KXxmZTgwOig6WzAtOWEtZkEtRl17MCw0fSl7MCw0fSVbMC05YS16QS1aXXsxLH18OjooZmZmZig6MHsxLDR9KXswLDF9Oil7MCwxfSgoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH06KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pKVxcLygxMlswLThdfDFbMDFdWzAtOV18WzEtOV0/WzAtOV0pJC87XG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83ODYwMzkyL2RldGVybWluZS1pZi1zdHJpbmctaXMtaW4tYmFzZTY0LXVzaW5nLWphdmFzY3JpcHRcbmNvbnN0IGJhc2U2NFJlZ2V4ID0gL14oWzAtOWEtekEtWisvXXs0fSkqKChbMC05YS16QS1aKy9dezJ9PT0pfChbMC05YS16QS1aKy9dezN9PSkpPyQvO1xuLy8gaHR0cHM6Ly9iYXNlNjQuZ3VydS9zdGFuZGFyZHMvYmFzZTY0dXJsXG5jb25zdCBiYXNlNjR1cmxSZWdleCA9IC9eKFswLTlhLXpBLVotX117NH0pKigoWzAtOWEtekEtWi1fXXsyfSg9PSk/KXwoWzAtOWEtekEtWi1fXXszfSg9KT8pKT8kLztcbi8vIHNpbXBsZVxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LVxcXFxkezJ9LVxcXFxkezJ9YDtcbi8vIG5vIGxlYXAgeWVhciB2YWxpZGF0aW9uXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tKCgwWzEzNTc4XXwxMHwxMiktMzF8KDBbMTMtOV18MVswLTJdKS0zMHwoMFsxLTldfDFbMC0yXSktKDBbMS05XXwxXFxcXGR8MlxcXFxkKSlgO1xuLy8gd2l0aCBsZWFwIHllYXIgdmFsaWRhdGlvblxuY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYCgoXFxcXGRcXFxcZFsyNDY4XVswNDhdfFxcXFxkXFxcXGRbMTM1NzldWzI2XXxcXFxcZFxcXFxkMFs0OF18WzAyNDY4XVswNDhdMDB8WzEzNTc5XVsyNl0wMCktMDItMjl8XFxcXGR7NH0tKCgwWzEzNTc4XXwxWzAyXSktKDBbMS05XXxbMTJdXFxcXGR8M1swMV0pfCgwWzQ2OV18MTEpLSgwWzEtOV18WzEyXVxcXFxkfDMwKXwoMDIpLSgwWzEtOV18MVxcXFxkfDJbMC04XSkpKWA7XG5jb25zdCBkYXRlUmVnZXggPSBuZXcgUmVnRXhwKGBeJHtkYXRlUmVnZXhTb3VyY2V9JGApO1xuZnVuY3Rpb24gdGltZVJlZ2V4U291cmNlKGFyZ3MpIHtcbiAgICBsZXQgc2Vjb25kc1JlZ2V4U291cmNlID0gYFswLTVdXFxcXGRgO1xuICAgIGlmIChhcmdzLnByZWNpc2lvbikge1xuICAgICAgICBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgJHtzZWNvbmRzUmVnZXhTb3VyY2V9XFxcXC5cXFxcZHske2FyZ3MucHJlY2lzaW9ufX1gO1xuICAgIH1cbiAgICBlbHNlIGlmIChhcmdzLnByZWNpc2lvbiA9PSBudWxsKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX0oXFxcXC5cXFxcZCspP2A7XG4gICAgfVxuICAgIGNvbnN0IHNlY29uZHNRdWFudGlmaWVyID0gYXJncy5wcmVjaXNpb24gPyBcIitcIiA6IFwiP1wiOyAvLyByZXF1aXJlIHNlY29uZHMgaWYgcHJlY2lzaW9uIGlzIG5vbnplcm9cbiAgICByZXR1cm4gYChbMDFdXFxcXGR8MlswLTNdKTpbMC01XVxcXFxkKDoke3NlY29uZHNSZWdleFNvdXJjZX0pJHtzZWNvbmRzUXVhbnRpZmllcn1gO1xufVxuZnVuY3Rpb24gdGltZVJlZ2V4KGFyZ3MpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfSRgKTtcbn1cbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzE0MzIzMVxuZXhwb3J0IGZ1bmN0aW9uIGRhdGV0aW1lUmVnZXgoYXJncykge1xuICAgIGxldCByZWdleCA9IGAke2RhdGVSZWdleFNvdXJjZX1UJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9YDtcbiAgICBjb25zdCBvcHRzID0gW107XG4gICAgb3B0cy5wdXNoKGFyZ3MubG9jYWwgPyBgWj9gIDogYFpgKTtcbiAgICBpZiAoYXJncy5vZmZzZXQpXG4gICAgICAgIG9wdHMucHVzaChgKFsrLV1cXFxcZHsyfTo/XFxcXGR7Mn0pYCk7XG4gICAgcmVnZXggPSBgJHtyZWdleH0oJHtvcHRzLmpvaW4oXCJ8XCIpfSlgO1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHtyZWdleH0kYCk7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSVAoaXAsIHZlcnNpb24pIHtcbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjRcIiB8fCAhdmVyc2lvbikgJiYgaXB2NFJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NlJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSldUKGp3dCwgYWxnKSB7XG4gICAgaWYgKCFqd3RSZWdleC50ZXN0KGp3dCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBbaGVhZGVyXSA9IGp3dC5zcGxpdChcIi5cIik7XG4gICAgICAgIC8vIENvbnZlcnQgYmFzZTY0dXJsIHRvIGJhc2U2NFxuICAgICAgICBjb25zdCBiYXNlNjQgPSBoZWFkZXJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csIFwiK1wiKVxuICAgICAgICAgICAgLnJlcGxhY2UoL18vZywgXCIvXCIpXG4gICAgICAgICAgICAucGFkRW5kKGhlYWRlci5sZW5ndGggKyAoKDQgLSAoaGVhZGVyLmxlbmd0aCAlIDQpKSAlIDQpLCBcIj1cIik7XG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBKU09OLnBhcnNlKGF0b2IoYmFzZTY0KSk7XG4gICAgICAgIGlmICh0eXBlb2YgZGVjb2RlZCAhPT0gXCJvYmplY3RcIiB8fCBkZWNvZGVkID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoXCJ0eXBcIiBpbiBkZWNvZGVkICYmIGRlY29kZWQ/LnR5cCAhPT0gXCJKV1RcIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFkZWNvZGVkLmFsZylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGFsZyAmJiBkZWNvZGVkLmFsZyAhPT0gYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNWYWxpZENpZHIoaXAsIHZlcnNpb24pIHtcbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjRcIiB8fCAhdmVyc2lvbikgJiYgaXB2NENpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZDaWRyUmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBjbGFzcyBab2RTdHJpbmcgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBTdHJpbmcoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc3RyaW5nLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImxlbmd0aFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGlucHV0LmRhdGEubGVuZ3RoIDwgY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb0JpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtYWlsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImVtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbW9qaVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4KSB7XG4gICAgICAgICAgICAgICAgICAgIGVtb2ppUmVnZXggPSBuZXcgUmVnRXhwKF9lbW9qaVJlZ2V4LCBcInVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZW1vamlSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1vamlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInV1aWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXVpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1dWlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJuYW5vaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghbmFub2lkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcIm5hbm9pZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImN1aWQyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWQyUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1bGlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVsaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidWxpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXJsXCIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgVVJMKGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgY2hlY2sucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gY2hlY2sucmVnZXgudGVzdChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRlc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJyZWdleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidHJpbVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJpbmNsdWRlc1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmluY2x1ZGVzKGNoZWNrLnZhbHVlLCBjaGVjay5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBpbmNsdWRlczogY2hlY2sudmFsdWUsIHBvc2l0aW9uOiBjaGVjay5wb3NpdGlvbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9Mb3dlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRvVXBwZXJDYXNlXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJzdGFydHNXaXRoXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuc3RhcnRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBzdGFydHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW5kc1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5lbmRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBlbmRzV2l0aDogY2hlY2sudmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGV0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGV0aW1lUmVnZXgoY2hlY2spO1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGVSZWdleDtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IHRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidGltZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZHVyYXRpb25cIikge1xuICAgICAgICAgICAgICAgIGlmICghZHVyYXRpb25SZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZHVyYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImlwXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRJUChpbnB1dC5kYXRhLCBjaGVjay52ZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImlwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJqd3RcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZEpXVChpbnB1dC5kYXRhLCBjaGVjay5hbGcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiand0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjaWRyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRDaWRyKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY2lkclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImJhc2U2NHVybFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFiYXNlNjR1cmxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9yZWdleChyZWdleCwgdmFsaWRhdGlvbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZpbmVtZW50KChkYXRhKSA9PiByZWdleC50ZXN0KGRhdGEpLCB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVtYWlsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJlbWFpbFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVybChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXJsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgZW1vamkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtb2ppXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXVpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXVpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIG5hbm9pZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwibmFub2lkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiY3VpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGN1aWQyKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkMlwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVsaWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInVsaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBiYXNlNjQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImJhc2U2NFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NHVybChtZXNzYWdlKSB7XG4gICAgICAgIC8vIGJhc2U2NHVybCBlbmNvZGluZyBpcyBhIG1vZGlmaWNhdGlvbiBvZiBiYXNlNjQgdGhhdCBjYW4gc2FmZWx5IGJlIHVzZWQgaW4gVVJMcyBhbmQgZmlsZW5hbWVzXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImJhc2U2NHVybFwiLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgand0KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJqd3RcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBpcChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiaXBcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBjaWRyKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjaWRyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zKSB9KTtcbiAgICB9XG4gICAgZGF0ZXRpbWUob3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvY2FsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICBvZmZzZXQ6IG9wdGlvbnM/Lm9mZnNldCA/PyBmYWxzZSxcbiAgICAgICAgICAgIGxvY2FsOiBvcHRpb25zPy5sb2NhbCA/PyBmYWxzZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRhdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImRhdGVcIiwgbWVzc2FnZSB9KTtcbiAgICB9XG4gICAgdGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IG51bGwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogb3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucz8ubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkdXJhdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZHVyYXRpb25cIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICByZWdleChyZWdleCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJyZWdleFwiLFxuICAgICAgICAgICAgcmVnZXg6IHJlZ2V4LFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW5jbHVkZXModmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiaW5jbHVkZXNcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBvcHRpb25zPy5wb3NpdGlvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0c1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwic3RhcnRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5kc1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZW5kc1dpdGhcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluTGVuZ3RoLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhMZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZW5ndGgobGVuLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImxlbmd0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IGxlbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gYC5taW4oMSlgXG4gICAgICovXG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgdHJpbSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgeyBraW5kOiBcInRyaW1cIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvTG93ZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9Mb3dlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvVXBwZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9VcHBlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBpc0RhdGV0aW1lKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGV0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEYXRlKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGVcIik7XG4gICAgfVxuICAgIGdldCBpc1RpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidGltZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZHVyYXRpb25cIik7XG4gICAgfVxuICAgIGdldCBpc0VtYWlsKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtYWlsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVUkwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidXJsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNFbW9qaSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJlbW9qaVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVVVJRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1dWlkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNOQU5PSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwibmFub2lkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQyKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWQyXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVTElEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInVsaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0lQKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImlwXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDSURSKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImNpZHJcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjRcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NHVybCgpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjR1cmxcIik7XG4gICAgfVxuICAgIGdldCBtaW5MZW5ndGgoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heExlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZFN0cmluZy5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM5NjY0ODQvd2h5LWRvZXMtbW9kdWx1cy1vcGVyYXRvci1yZXR1cm4tZnJhY3Rpb25hbC1udW1iZXItaW4tamF2YXNjcmlwdC8zMTcxMTAzNCMzMTcxMTAzNFxuZnVuY3Rpb24gZmxvYXRTYWZlUmVtYWluZGVyKHZhbCwgc3RlcCkge1xuICAgIGNvbnN0IHZhbERlY0NvdW50ID0gKHZhbC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3Qgc3RlcERlY0NvdW50ID0gKHN0ZXAudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IGRlY0NvdW50ID0gdmFsRGVjQ291bnQgPiBzdGVwRGVjQ291bnQgPyB2YWxEZWNDb3VudCA6IHN0ZXBEZWNDb3VudDtcbiAgICBjb25zdCB2YWxJbnQgPSBOdW1iZXIucGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICBjb25zdCBzdGVwSW50ID0gTnVtYmVyLnBhcnNlSW50KHN0ZXAudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIHJldHVybiAodmFsSW50ICUgc3RlcEludCkgLyAxMCAqKiBkZWNDb3VudDtcbn1cbmV4cG9ydCBjbGFzcyBab2ROdW1iZXIgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLmd0ZTtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLmx0ZTtcbiAgICAgICAgdGhpcy5zdGVwID0gdGhpcy5tdWx0aXBsZU9mO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBOdW1iZXIoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVtYmVyLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwiaW50XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWwuaXNJbnRlZ2VyKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJpbnRlZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlZDogXCJmbG9hdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmxvYXRTYWZlUmVtYWluZGVyKGlucHV0LmRhdGEsIGNoZWNrLnZhbHVlKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJmaW5pdGVcIikge1xuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfZmluaXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBndGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGd0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHRlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIHNldExpbWl0KGtpbmQsIHZhbHVlLCBpbmNsdXNpdmUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2ROdW1iZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbXG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLmNoZWNrcyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbnQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbnRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbXVsdGlwbGVPZih2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtdWx0aXBsZU9mXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaW5pdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJmaW5pdGVcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNhZmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSkuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuICAgIGdldCBpc0ludCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJpbnRcIiB8fCAoY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIgJiYgdXRpbC5pc0ludGVnZXIoY2gudmFsdWUpKSk7XG4gICAgfVxuICAgIGdldCBpc0Zpbml0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcImZpbml0ZVwiIHx8IGNoLmtpbmQgPT09IFwiaW50XCIgfHwgY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG1pbikgJiYgTnVtYmVyLmlzRmluaXRlKG1heCk7XG4gICAgfVxufVxuWm9kTnVtYmVyLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJpZ0ludCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IEJpZ0ludChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJpZ2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEludmFsaWRJbnB1dChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YSAlIGNoZWNrLnZhbHVlICE9PSBCaWdJbnQoMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZixcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlT2Y6IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBfZ2V0SW52YWxpZElucHV0KGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYmlnaW50LFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbnBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IG1pblZhbHVlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW47XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZEJpZ0ludC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJpZ0ludCxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RCb29sZWFuIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gQm9vbGVhbihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJvb2xlYW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYm9vbGVhbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RCb29sZWFuLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJvb2xlYW4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW4sXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGF0ZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IG5ldyBEYXRlKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5kYXRlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc05hTihpbnB1dC5kYXRhLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBQYXJzZVN0YXR1cygpO1xuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpIDwgY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmdldFRpbWUoKSA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoaW5wdXQuZGF0YS5nZXRUaW1lKCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5EYXRlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IG1pbkRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heERhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogbWF4RGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluRGF0ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluICE9IG51bGwgPyBuZXcgRGF0ZShtaW4pIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IG1heERhdGUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heCAhPSBudWxsID8gbmV3IERhdGUobWF4KSA6IG51bGw7XG4gICAgfVxufVxuWm9kRGF0ZS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REYXRlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFN5bWJvbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN5bWJvbCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zeW1ib2wsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kU3ltYm9sLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN5bWJvbCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuZGVmaW5lZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS51bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5kZWZpbmVkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuZGVmaW5lZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm51bGwsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kTnVsbC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEFueSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvLyB0byBwcmV2ZW50IGluc3RhbmNlcyBvZiBvdGhlciBjbGFzc2VzIGZyb20gZXh0ZW5kaW5nIFpvZEFueS4gdGhpcyBjYXVzZXMgaXNzdWVzIHdpdGggY2F0Y2hhbGwgaW4gWm9kT2JqZWN0LlxuICAgICAgICB0aGlzLl9hbnkgPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEFueS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBbnkoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RVbmtub3duIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHJlcXVpcmVkXG4gICAgICAgIHRoaXMuX3Vua25vd24gPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFVua25vd24uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5rbm93bih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2ROZXZlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5ldmVyLFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxufVxuWm9kTmV2ZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmV2ZXIoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5ldmVyLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFZvaWQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUudm9pZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RWb2lkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFZvaWQoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFZvaWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQXJyYXkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHgsIHN0YXR1cyB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjdHguZGF0YS5sZW5ndGggPiBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdG9vQmlnID8gWm9kSXNzdWVDb2RlLnRvb19iaWcgOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiAodG9vU21hbGwgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiAodG9vQmlnID8gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1pbkxlbmd0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5taW5MZW5ndGgudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbkxlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pbkxlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoID4gZGVmLm1heExlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heExlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlQXN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgICAgICB9KSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VTeW5jKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBtaW4obWluTGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiB7IHZhbHVlOiBtaW5MZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heExlbmd0aDogeyB2YWx1ZTogbWF4TGVuZ3RoLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBleGFjdExlbmd0aDogeyB2YWx1ZTogbGVuLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZEFycmF5LmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIG1pbkxlbmd0aDogbnVsbCxcbiAgICAgICAgbWF4TGVuZ3RoOiBudWxsLFxuICAgICAgICBleGFjdExlbmd0aDogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYSkge1xuICAgIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RPYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hLnNoYXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHNjaGVtYS5zaGFwZVtrZXldO1xuICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShmaWVsZFNjaGVtYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgICAgICAgIHR5cGU6IGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYS5lbGVtZW50KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZFR1cGxlKSB7XG4gICAgICAgIHJldHVybiBab2RUdXBsZS5jcmVhdGUoc2NoZW1hLml0ZW1zLm1hcCgoaXRlbSkgPT4gZGVlcFBhcnRpYWxpZnkoaXRlbSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE9iamVjdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgSW4gbW9zdCBjYXNlcywgdGhpcyBpcyBubyBsb25nZXIgbmVlZGVkIC0gdW5rbm93biBwcm9wZXJ0aWVzIGFyZSBub3cgc2lsZW50bHkgc3RyaXBwZWQuXG4gICAgICAgICAqIElmIHlvdSB3YW50IHRvIHBhc3MgdGhyb3VnaCB1bmtub3duIHByb3BlcnRpZXMsIHVzZSBgLnBhc3N0aHJvdWdoKClgIGluc3RlYWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5vbnN0cmljdCA9IHRoaXMucGFzc3Rocm91Z2g7XG4gICAgICAgIC8vIGV4dGVuZDxcbiAgICAgICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZSxcbiAgICAgICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgT3V0cHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgICAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgICAgIC8vICAgICAgID8gT3V0cHV0W2tdXG4gICAgICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgICAgIC8vICAgfT4sXG4gICAgICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgSW5wdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgICAgIC8vICAgICAgID8gSW5wdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PlxuICAgICAgICAvLyA+KFxuICAgICAgICAvLyAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICk6IFpvZE9iamVjdDxcbiAgICAgICAgLy8gICBleHRlbmRTaGFwZTxULCBBdWdtZW50YXRpb24+LFxuICAgICAgICAvLyAgIFVua25vd25LZXlzLFxuICAgICAgICAvLyAgIENhdGNoYWxsLFxuICAgICAgICAvLyAgIE5ld091dHB1dCxcbiAgICAgICAgLy8gICBOZXdJbnB1dFxuICAgICAgICAvLyA+IHtcbiAgICAgICAgLy8gICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIC8vICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgIC8vICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgLy8gICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgIC8vICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgLy8gICAgIH0pLFxuICAgICAgICAvLyAgIH0pIGFzIGFueTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIGAuZXh0ZW5kYCBpbnN0ZWFkXG4gICAgICAgICAqICAqL1xuICAgICAgICB0aGlzLmF1Z21lbnQgPSB0aGlzLmV4dGVuZDtcbiAgICB9XG4gICAgX2dldENhY2hlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlZCAhPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5fZGVmLnNoYXBlKCk7XG4gICAgICAgIGNvbnN0IGtleXMgPSB1dGlsLm9iamVjdEtleXMoc2hhcGUpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSB7IHNoYXBlLCBrZXlzIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCB7IHNoYXBlLCBrZXlzOiBzaGFwZUtleXMgfSA9IHRoaXMuX2dldENhY2hlZCgpO1xuICAgICAgICBjb25zdCBleHRyYUtleXMgPSBbXTtcbiAgICAgICAgaWYgKCEodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIgJiYgdGhpcy5fZGVmLnVua25vd25LZXlzID09PSBcInN0cmlwXCIpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjdHguZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghc2hhcGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlWYWxpZGF0b3IgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5OiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZToga2V5IH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGtleVZhbGlkYXRvci5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gdGhpcy5fZGVmLnVua25vd25LZXlzO1xuICAgICAgICAgICAgaWYgKHVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogY3R4LmRhdGFba2V5XSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmtub3duS2V5cyA9PT0gXCJzdHJpY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChleHRyYUtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGV4dHJhS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmlwXCIpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgWm9kT2JqZWN0IGVycm9yOiBpbnZhbGlkIHVua25vd25LZXlzIHZhbHVlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gcnVuIGNhdGNoYWxsIHZhbGlkYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNhdGNoYWxsID0gdGhpcy5fZGVmLmNhdGNoYWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhdGNoYWxsLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpIC8vLCBjdHguY2hpbGQoa2V5KSwgdmFsdWUsIGdldFBhcnNlZFR5cGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBwYWlyLmFsd2F5c1NldCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzeW5jUGFpcnM7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChzeW5jUGFpcnMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICB9XG4gICAgc3RyaWN0KG1lc3NhZ2UpIHtcbiAgICAgICAgZXJyb3JVdGlsLmVyclRvT2JqO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNYXA6IChpc3N1ZSwgY3R4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0RXJyb3IgPSB0aGlzLl9kZWYuZXJyb3JNYXA/Lihpc3N1ZSwgY3R4KS5tZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJ1bnJlY29nbml6ZWRfa2V5c1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKS5tZXNzYWdlID8/IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWZhdWx0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0cmlwKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGFzc3Rocm91Z2goKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInBhc3N0aHJvdWdoXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjb25zdCBBdWdtZW50RmFjdG9yeSA9XG4gICAgLy8gICA8RGVmIGV4dGVuZHMgWm9kT2JqZWN0RGVmPihkZWY6IERlZikgPT5cbiAgICAvLyAgIDxBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZT4oXG4gICAgLy8gICAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgLy8gICApOiBab2RPYmplY3Q8XG4gICAgLy8gICAgIGV4dGVuZFNoYXBlPFJldHVyblR5cGU8RGVmW1wic2hhcGVcIl0+LCBBdWdtZW50YXRpb24+LFxuICAgIC8vICAgICBEZWZbXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgICAgRGVmW1wiY2F0Y2hhbGxcIl1cbiAgICAvLyAgID4gPT4ge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgICAgLi4uZGVmLFxuICAgIC8vICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgIC8vICAgICAgICAgLi4uZGVmLnNoYXBlKCksXG4gICAgLy8gICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgLy8gICAgICAgfSksXG4gICAgLy8gICAgIH0pIGFzIGFueTtcbiAgICAvLyAgIH07XG4gICAgZXh0ZW5kKGF1Z21lbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW9yIHRvIHpvZEAxLjAuMTIgdGhlcmUgd2FzIGEgYnVnIGluIHRoZVxuICAgICAqIGluZmVycmVkIHR5cGUgb2YgbWVyZ2VkIG9iamVjdHMuIFBsZWFzZVxuICAgICAqIHVwZ3JhZGUgaWYgeW91IGFyZSBleHBlcmllbmNpbmcgaXNzdWVzLlxuICAgICAqL1xuICAgIG1lcmdlKG1lcmdpbmcpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLm1lcmdpbmcuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxuICAgIC8vIG1lcmdlPFxuICAgIC8vICAgSW5jb21pbmcgZXh0ZW5kcyBBbnlab2RPYmplY3QsXG4gICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBJbmNvbWluZ1tcInNoYXBlXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfb3V0cHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgIC8vICAgfSxcbiAgICAvLyAgIE5ld0lucHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9pbnB1dFwiXVxuICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9XG4gICAgLy8gPihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXSxcbiAgICAvLyAgIE5ld091dHB1dCxcbiAgICAvLyAgIE5ld0lucHV0XG4gICAgLy8gPiB7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgc2V0S2V5KGtleSwgc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1Z21lbnQoeyBba2V5XTogc2NoZW1hIH0pO1xuICAgIH1cbiAgICAvLyBtZXJnZTxJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdD4oXG4gICAgLy8gICBtZXJnaW5nOiBJbmNvbWluZ1xuICAgIC8vICk6IC8vWm9kT2JqZWN0PFQgJiBJbmNvbWluZ1tcIl9zaGFwZVwiXSwgVW5rbm93bktleXMsIENhdGNoYWxsPiA9IChtZXJnaW5nKSA9PiB7XG4gICAgLy8gWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXVxuICAgIC8vID4ge1xuICAgIC8vICAgLy8gY29uc3QgbWVyZ2VkU2hhcGUgPSBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKFxuICAgIC8vICAgLy8gICB0aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAvLyAgIC8vICAgbWVyZ2luZy5fZGVmLnNoYXBlKClcbiAgICAvLyAgIC8vICk7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgY2F0Y2hhbGwoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IGluZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGljayhtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyhtYXNrKSkge1xuICAgICAgICAgICAgaWYgKG1hc2tba2V5XSAmJiB0aGlzLnNoYXBlW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9taXQobWFzaykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmICghbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIGRlZXBQYXJ0aWFsKCkge1xuICAgICAgICByZXR1cm4gZGVlcFBhcnRpYWxpZnkodGhpcyk7XG4gICAgfVxuICAgIHBhcnRpYWwobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgaWYgKG1hc2sgJiYgIW1hc2tba2V5XSkge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYS5vcHRpb25hbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlcXVpcmVkKG1hc2spIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKSB7XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgICAgIGxldCBuZXdGaWVsZCA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgICAgIHdoaWxlIChuZXdGaWVsZCBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ZpZWxkID0gbmV3RmllbGQuX2RlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBuZXdGaWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBrZXlvZigpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVpvZEVudW0odXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKTtcbiAgICB9XG59XG5ab2RPYmplY3QuY3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgdW5rbm93bktleXM6IFwic3RyaXBcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5zdHJpY3RDcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5sYXp5Y3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdHMocmVzdWx0cykge1xuICAgICAgICAgICAgLy8gcmV0dXJuIGZpcnN0IGlzc3VlLWZyZWUgdmFsaWRhdGlvbiBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5yZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGlzc3VlcyBmcm9tIGRpcnR5IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKC4uLnJlc3VsdC5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJldHVybiBpbnZhbGlkXG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IG5ldyBab2RFcnJvcihyZXN1bHQuY3R4LmNvbW1vbi5pc3N1ZXMpKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uLFxuICAgICAgICAgICAgICAgIHVuaW9uRXJyb3JzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG9wdGlvbnMubWFwKGFzeW5jIChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGF3YWl0IG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGN0eDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKS50aGVuKGhhbmRsZVJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRpcnR5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDdHggPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIgJiYgIWRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpcnR5ID0geyByZXN1bHQsIGN0eDogY2hpbGRDdHggfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3Vlcy5wdXNoKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXJ0eSkge1xuICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4uZGlydHkuY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkaXJ0eS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IGlzc3Vlcy5tYXAoKGlzc3VlcykgPT4gbmV3IFpvZEVycm9yKGlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxufVxuWm9kVW5pb24uY3JlYXRlID0gKHR5cGVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuaW9uKHtcbiAgICAgICAgb3B0aW9uczogdHlwZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5pb24sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgWm9kRGlzY3JpbWluYXRlZFVuaW9uICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc3QgZ2V0RGlzY3JpbWluYXRvciA9ICh0eXBlKSA9PiB7XG4gICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMYXp5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuc2NoZW1hKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVmZmVjdHMpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5pbm5lclR5cGUoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMaXRlcmFsKSB7XG4gICAgICAgIHJldHVybiBbdHlwZS52YWx1ZV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB0eXBlLm9wdGlvbnM7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROYXRpdmVFbnVtKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyh0eXBlLmVudW0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRGVmYXVsdCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsKSB7XG4gICAgICAgIHJldHVybiBbbnVsbF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RPcHRpb25hbCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsYWJsZSkge1xuICAgICAgICByZXR1cm4gW251bGwsIC4uLmdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSldO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQnJhbmRlZCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFJlYWRvbmx5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQ2F0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5fZGVmLmlubmVyVHlwZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufTtcbmV4cG9ydCBjbGFzcyBab2REaXNjcmltaW5hdGVkVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUub2JqZWN0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvciA9IHRoaXMuZGlzY3JpbWluYXRvcjtcbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlID0gY3R4LmRhdGFbZGlzY3JpbWluYXRvcl07XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMub3B0aW9uc01hcC5nZXQoZGlzY3JpbWluYXRvclZhbHVlKTtcbiAgICAgICAgaWYgKCFvcHRpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3IsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogQXJyYXkuZnJvbSh0aGlzLm9wdGlvbnNNYXAua2V5cygpKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbZGlzY3JpbWluYXRvcl0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBkaXNjcmltaW5hdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRpc2NyaW1pbmF0b3I7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxuICAgIGdldCBvcHRpb25zTWFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnNNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgZGlzY3JpbWluYXRlZCB1bmlvbiBzY2hlbWEuIEl0cyBiZWhhdmlvdXIgaXMgdmVyeSBzaW1pbGFyIHRvIHRoYXQgb2YgdGhlIG5vcm1hbCB6LnVuaW9uKCkgY29uc3RydWN0b3IuXG4gICAgICogSG93ZXZlciwgaXQgb25seSBhbGxvd3MgYSB1bmlvbiBvZiBvYmplY3RzLCBhbGwgb2Ygd2hpY2ggbmVlZCB0byBzaGFyZSBhIGRpc2NyaW1pbmF0b3IgcHJvcGVydHkuIFRoaXMgcHJvcGVydHkgbXVzdFxuICAgICAqIGhhdmUgYSBkaWZmZXJlbnQgdmFsdWUgZm9yIGVhY2ggb2JqZWN0IGluIHRoZSB1bmlvbi5cbiAgICAgKiBAcGFyYW0gZGlzY3JpbWluYXRvciB0aGUgbmFtZSBvZiB0aGUgZGlzY3JpbWluYXRvciBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB0eXBlcyBhbiBhcnJheSBvZiBvYmplY3Qgc2NoZW1hc1xuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGRpc2NyaW1pbmF0b3IsIG9wdGlvbnMsIHBhcmFtcykge1xuICAgICAgICAvLyBHZXQgYWxsIHRoZSB2YWxpZCBkaXNjcmltaW5hdG9yIHZhbHVlc1xuICAgICAgICBjb25zdCBvcHRpb25zTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyB0cnkge1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlcyA9IGdldERpc2NyaW1pbmF0b3IodHlwZS5zaGFwZVtkaXNjcmltaW5hdG9yXSk7XG4gICAgICAgICAgICBpZiAoIWRpc2NyaW1pbmF0b3JWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIGRpc2NyaW1pbmF0b3IgdmFsdWUgZm9yIGtleSBcXGAke2Rpc2NyaW1pbmF0b3J9XFxgIGNvdWxkIG5vdCBiZSBleHRyYWN0ZWQgZnJvbSBhbGwgc2NoZW1hIG9wdGlvbnNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGlzY3JpbWluYXRvclZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zTWFwLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaXNjcmltaW5hdG9yIHByb3BlcnR5ICR7U3RyaW5nKGRpc2NyaW1pbmF0b3IpfSBoYXMgZHVwbGljYXRlIHZhbHVlICR7U3RyaW5nKHZhbHVlKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9uc01hcC5zZXQodmFsdWUsIHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGlzY3JpbWluYXRlZFVuaW9uKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uLFxuICAgICAgICAgICAgZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zTWFwLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBtZXJnZVZhbHVlcyhhLCBiKSB7XG4gICAgY29uc3QgYVR5cGUgPSBnZXRQYXJzZWRUeXBlKGEpO1xuICAgIGNvbnN0IGJUeXBlID0gZ2V0UGFyc2VkVHlwZShiKTtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGJLZXlzID0gdXRpbC5vYmplY3RLZXlzKGIpO1xuICAgICAgICBjb25zdCBzaGFyZWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKGEpLmZpbHRlcigoa2V5KSA9PiBiS2V5cy5pbmRleE9mKGtleSkgIT09IC0xKTtcbiAgICAgICAgY29uc3QgbmV3T2JqID0geyAuLi5hLCAuLi5iIH07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHNoYXJlZEtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoYVtrZXldLCBiW2tleV0pO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBzaGFyZWRWYWx1ZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBuZXdPYmogfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3QXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGEubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtQSA9IGFbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgaXRlbUIgPSBiW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoaXRlbUEsIGl0ZW1CKTtcbiAgICAgICAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld0FycmF5LnB1c2goc2hhcmVkVmFsdWUuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld0FycmF5IH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLmRhdGUgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiArYSA9PT0gK2IpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IGEgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RJbnRlcnNlY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgaGFuZGxlUGFyc2VkID0gKHBhcnNlZExlZnQsIHBhcnNlZFJpZ2h0KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNBYm9ydGVkKHBhcnNlZExlZnQpIHx8IGlzQWJvcnRlZChwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlVmFsdWVzKHBhcnNlZExlZnQudmFsdWUsIHBhcnNlZFJpZ2h0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmICghbWVyZ2VkLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RpcnR5KHBhcnNlZExlZnQpIHx8IGlzRGlydHkocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IG1lcmdlZC5kYXRhIH07XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWYucmlnaHQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSkudGhlbigoW2xlZnQsIHJpZ2h0XSkgPT4gaGFuZGxlUGFyc2VkKGxlZnQsIHJpZ2h0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlUGFyc2VkKHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSksIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZEludGVyc2VjdGlvbi5jcmVhdGUgPSAobGVmdCwgcmlnaHQsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kSW50ZXJzZWN0aW9uKHtcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEludGVyc2VjdGlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIHR5cGUgWm9kVHVwbGVJdGVtcyA9IFtab2RUeXBlQW55LCAuLi5ab2RUeXBlQW55W11dO1xuZXhwb3J0IGNsYXNzIFpvZFR1cGxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPCB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgIG1pbmltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3QgPSB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgaWYgKCFyZXN0ICYmIGN0eC5kYXRhLmxlbmd0aCA+IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgIG1heGltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gWy4uLmN0eC5kYXRhXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSwgaXRlbUluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLl9kZWYuaXRlbXNbaXRlbUluZGV4XSB8fCB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgICAgIGlmICghc2NoZW1hKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVtYS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpdGVtSW5kZXgpKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHgpID0+ICEheCk7IC8vIGZpbHRlciBudWxsc1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGl0ZW1zKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCBpdGVtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLml0ZW1zO1xuICAgIH1cbiAgICByZXN0KHJlc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RUdXBsZSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXN0LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RUdXBsZS5jcmVhdGUgPSAoc2NoZW1hcywgcGFyYW1zKSA9PiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgb2Ygc2NoZW1hcyB0byB6LnR1cGxlKFsgLi4uIF0pXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgaXRlbXM6IHNjaGVtYXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGUsXG4gICAgICAgIHJlc3Q6IG51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUmVjb3JkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgY3R4LmRhdGFba2V5XSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoZmlyc3QsIHNlY29uZCwgdGhpcmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCBpbnN0YW5jZW9mIFpvZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgICAgICBrZXlUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6IHNlY29uZCxcbiAgICAgICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXJkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgIGtleVR5cGU6IFpvZFN0cmluZy5jcmVhdGUoKSxcbiAgICAgICAgICAgIHZhbHVlVHlwZTogZmlyc3QsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMoc2Vjb25kKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE1hcCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBrZXlTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5tYXApIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubWFwLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBjb25zdCBwYWlycyA9IFsuLi5jdHguZGF0YS5lbnRyaWVzKCldLm1hcCgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBbaW5kZXgsIFwia2V5XCJdKSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwgW2luZGV4LCBcInZhbHVlXCJdKSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImFib3J0ZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxNYXAuc2V0KGtleS52YWx1ZSwgdmFsdWUudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5ab2RNYXAuY3JlYXRlID0gKGtleVR5cGUsIHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RNYXAoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIGtleVR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTWFwLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFNldCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc2V0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnNldCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZiA9IHRoaXMuX2RlZjtcbiAgICAgICAgaWYgKGRlZi5taW5TaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEuc2l6ZSA8IGRlZi5taW5TaXplLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGRlZi5taW5TaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pblNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1heFNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplID4gZGVmLm1heFNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06IGRlZi5tYXhTaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heFNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBmdW5jdGlvbiBmaW5hbGl6ZVNldChlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIHBhcnNlZFNldC5hZGQoZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHBhcnNlZFNldCB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gWy4uLmN0eC5kYXRhLnZhbHVlcygpXS5tYXAoKGl0ZW0sIGkpID0+IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSkpO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGVsZW1lbnRzKS50aGVuKChlbGVtZW50cykgPT4gZmluYWxpemVTZXQoZWxlbWVudHMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZVNldChlbGVtZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWluKG1pblNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluU2l6ZTogeyB2YWx1ZTogbWluU2l6ZSwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4U2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtYXhTaXplOiB7IHZhbHVlOiBtYXhTaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpemUoc2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oc2l6ZSwgbWVzc2FnZSkubWF4KHNpemUsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBtZXNzYWdlKTtcbiAgICB9XG59XG5ab2RTZXQuY3JlYXRlID0gKHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIG1pblNpemU6IG51bGwsXG4gICAgICAgIG1heFNpemU6IG51bGwsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEZ1bmN0aW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudmFsaWRhdGUgPSB0aGlzLmltcGxlbWVudDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlQXJnc0lzc3VlKGFyZ3MsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c0Vycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbWFrZVJldHVybnNJc3N1ZShyZXR1cm5zLCBlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VJc3N1ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogcmV0dXJucyxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvck1hcHM6IFtjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgY3R4LnNjaGVtYUVycm9yTWFwLCBnZXRFcnJvck1hcCgpLCBkZWZhdWx0RXJyb3JNYXBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICAgICAgICAgICAgICBpc3N1ZURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblR5cGVFcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwIH07XG4gICAgICAgIGNvbnN0IGZuID0gY3R4LmRhdGE7XG4gICAgICAgIGlmICh0aGlzLl9kZWYucmV0dXJucyBpbnN0YW5jZW9mIFpvZFByb21pc2UpIHtcbiAgICAgICAgICAgIC8vIFdvdWxkIGxvdmUgYSB3YXkgdG8gYXZvaWQgZGlzYWJsaW5nIHRoaXMgcnVsZSwgYnV0IHdlIG5lZWRcbiAgICAgICAgICAgIC8vIGFuIGFsaWFzICh1c2luZyBhbiBhcnJvdyBmdW5jdGlvbiB3YXMgd2hhdCBjYXVzZWQgMjY1MSkuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBPSyhhc3luYyBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKFtdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gYXdhaXQgbWUuX2RlZi5hcmdzLnBhcnNlQXN5bmMoYXJncywgcGFyYW1zKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlQXJnc0lzc3VlKGFyZ3MsIGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmV0dXJucyA9IGF3YWl0IG1lLl9kZWYucmV0dXJucy5fZGVmLnR5cGVcbiAgICAgICAgICAgICAgICAgICAgLnBhcnNlQXN5bmMocmVzdWx0LCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJncyA9IG1lLl9kZWYuYXJncy5zYWZlUGFyc2UoYXJncywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZEFyZ3Muc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VBcmdzSXNzdWUoYXJncywgcGFyc2VkQXJncy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncy5kYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gbWUuX2RlZi5yZXR1cm5zLnNhZmVQYXJzZShyZXN1bHQsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJzZWRSZXR1cm5zLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFpvZEVycm9yKFttYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgcGFyc2VkUmV0dXJucy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZFJldHVybnMuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuYXJncztcbiAgICB9XG4gICAgcmV0dXJuVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5yZXR1cm5zO1xuICAgIH1cbiAgICBhcmdzKC4uLml0ZW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgYXJnczogWm9kVHVwbGUuY3JlYXRlKGl0ZW1zKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJucyhyZXR1cm5UeXBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgcmV0dXJuczogcmV0dXJuVHlwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGltcGxlbWVudChmdW5jKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEZ1bmMgPSB0aGlzLnBhcnNlKGZ1bmMpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRnVuYztcbiAgICB9XG4gICAgc3RyaWN0SW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGFyZ3MsIHJldHVybnMsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIGFyZ3M6IChhcmdzID8gYXJncyA6IFpvZFR1cGxlLmNyZWF0ZShbXSkucmVzdChab2RVbmtub3duLmNyZWF0ZSgpKSksXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5zIHx8IFpvZFVua25vd24uY3JlYXRlKCksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEZ1bmN0aW9uLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTGF6eSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZ2V0dGVyKCk7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgbGF6eVNjaGVtYSA9IHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICAgICAgcmV0dXJuIGxhenlTY2hlbWEuX3BhcnNlKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICB9XG59XG5ab2RMYXp5LmNyZWF0ZSA9IChnZXR0ZXIsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGF6eSh7XG4gICAgICAgIGdldHRlcjogZ2V0dGVyLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTGl0ZXJhbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YSAhPT0gdGhpcy5fZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdGhpcy5fZGVmLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlO1xuICAgIH1cbn1cblpvZExpdGVyYWwuY3JlYXRlID0gKHZhbHVlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZExpdGVyYWwoe1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZVpvZEVudW0odmFsdWVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICB2YWx1ZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNsYXNzIFpvZEVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5kYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgZW51bVZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICAgICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudW1WYWx1ZXM7XG4gICAgfVxuICAgIGdldCBFbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZXh0cmFjdCh2YWx1ZXMsIG5ld0RlZiA9IHRoaXMuX2RlZikge1xuICAgICAgICByZXR1cm4gWm9kRW51bS5jcmVhdGUodmFsdWVzLCB7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICAuLi5uZXdEZWYsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleGNsdWRlKHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZmlsdGVyKChvcHQpID0+ICF2YWx1ZXMuaW5jbHVkZXMob3B0KSksIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuWm9kRW51bS5jcmVhdGUgPSBjcmVhdGVab2RFbnVtO1xuZXhwb3J0IGNsYXNzIFpvZE5hdGl2ZUVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgbmF0aXZlRW51bVZhbHVlcyA9IHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcgJiYgY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubnVtYmVyKSB7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHV0aWwub2JqZWN0VmFsdWVzKG5hdGl2ZUVudW1WYWx1ZXMpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IHV0aWwuam9pblZhbHVlcyhleHBlY3RlZFZhbHVlcyksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gbmV3IFNldCh1dGlsLmdldFZhbGlkRW51bVZhbHVlcyh0aGlzLl9kZWYudmFsdWVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgZW51bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxufVxuWm9kTmF0aXZlRW51bS5jcmVhdGUgPSAodmFsdWVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE5hdGl2ZUVudW0oe1xuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYXRpdmVFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFByb21pc2UgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZSAmJiBjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5wcm9taXNlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzaWZpZWQgPSBjdHgucGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlID8gY3R4LmRhdGEgOiBQcm9taXNlLnJlc29sdmUoY3R4LmRhdGEpO1xuICAgICAgICByZXR1cm4gT0socHJvbWlzaWZpZWQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlLnBhcnNlQXN5bmMoZGF0YSwge1xuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwOiBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuWm9kUHJvbWlzZS5jcmVhdGUgPSAoc2NoZW1hLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFByb21pc2Uoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUHJvbWlzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFZmZlY3RzIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgaW5uZXJUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgc291cmNlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWEuX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHNcbiAgICAgICAgICAgID8gdGhpcy5fZGVmLnNjaGVtYS5zb3VyY2VUeXBlKClcbiAgICAgICAgICAgIDogdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuX2RlZi5lZmZlY3QgfHwgbnVsbDtcbiAgICAgICAgY29uc3QgY2hlY2tDdHggPSB7XG4gICAgICAgICAgICBhZGRJc3N1ZTogKGFyZykgPT4ge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgYXJnKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJnLmZhdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBwYXRoKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdHgucGF0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNoZWNrQ3R4LmFkZElzc3VlID0gY2hlY2tDdHguYWRkSXNzdWUuYmluZChjaGVja0N0eCk7XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJwcmVwcm9jZXNzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IGVmZmVjdC50cmFuc2Zvcm0oY3R4LmRhdGEsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9jZXNzZWQpLnRoZW4oYXN5bmMgKHByb2Nlc3NlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBwcm9jZXNzZWQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnR5cGUgPT09IFwicmVmaW5lbWVudFwiKSB7XG4gICAgICAgICAgICBjb25zdCBleGVjdXRlUmVmaW5lbWVudCA9IChhY2MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QucmVmaW5lbWVudChhY2MsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzeW5jIHJlZmluZW1lbnQgZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoaW5uZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleGVjdXRlUmVmaW5lbWVudChpbm5lci52YWx1ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKGJhc2UpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFzeW5jaHJvbm91cyB0cmFuc2Zvcm0gZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcmVzdWx0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoYmFzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KSkudGhlbigocmVzdWx0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXRpbC5hc3NlcnROZXZlcihlZmZlY3QpO1xuICAgIH1cbn1cblpvZEVmZmVjdHMuY3JlYXRlID0gKHNjaGVtYSwgZWZmZWN0LCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgZWZmZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcyA9IChwcmVwcm9jZXNzLCBzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicHJlcHJvY2Vzc1wiLCB0cmFuc2Zvcm06IHByZXByb2Nlc3MgfSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IHsgWm9kRWZmZWN0cyBhcyBab2RUcmFuc2Zvcm1lciB9O1xuZXhwb3J0IGNsYXNzIFpvZE9wdGlvbmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZE9wdGlvbmFsLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9wdGlvbmFsKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9wdGlvbmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGxhYmxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUubnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIE9LKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kTnVsbGFibGUuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVsbGFibGUoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGVmYXVsdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgbGV0IGRhdGEgPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YSA9IHRoaXMuX2RlZi5kZWZhdWx0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2REZWZhdWx0LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0eXBlb2YgcGFyYW1zLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcy5kZWZhdWx0IDogKCkgPT4gcGFyYW1zLmRlZmF1bHQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQ2F0Y2ggZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIC8vIG5ld0N0eCBpcyB1c2VkIHRvIG5vdCBjb2xsZWN0IGlzc3VlcyBmcm9tIGlubmVyIHR5cGVzIGluIGN0eFxuICAgICAgICBjb25zdCBuZXdDdHggPSB7XG4gICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhOiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IG5ld0N0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgICAgICAgLi4ubmV3Q3R4LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcInZhbGlkXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUNhdGNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RDYXRjaC5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RDYXRjaCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgY2F0Y2hWYWx1ZTogdHlwZW9mIHBhcmFtcy5jYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmNhdGNoIDogKCkgPT4gcGFyYW1zLmNhdGNoLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5hTiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm5hbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5uYW4sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG59XG5ab2ROYU4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmFOKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU4sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgQlJBTkQgPSBTeW1ib2woXCJ6b2RfYnJhbmRcIik7XG5leHBvcnQgY2xhc3MgWm9kQnJhbmRlZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZFBpcGVsaW5lIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBc3luYyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5pbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKGluUmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYub3V0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVBc3luYygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5SZXN1bHQgPSB0aGlzLl9kZWYuaW4uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcImRpcnR5XCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpblJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kUGlwZWxpbmUoe1xuICAgICAgICAgICAgaW46IGEsXG4gICAgICAgICAgICBvdXQ6IGIsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUmVhZG9ubHkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgICAgICBjb25zdCBmcmVlemUgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWQoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gT2JqZWN0LmZyZWV6ZShkYXRhLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaXNBc3luYyhyZXN1bHQpID8gcmVzdWx0LnRoZW4oKGRhdGEpID0+IGZyZWV6ZShkYXRhKSkgOiBmcmVlemUocmVzdWx0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RSZWFkb25seS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RSZWFkb25seSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICB6LmN1c3RvbSAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIGNsZWFuUGFyYW1zKHBhcmFtcywgZGF0YSkge1xuICAgIGNvbnN0IHAgPSB0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMoZGF0YSkgOiB0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwYXJhbXMgfSA6IHBhcmFtcztcbiAgICBjb25zdCBwMiA9IHR5cGVvZiBwID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwIH0gOiBwO1xuICAgIHJldHVybiBwMjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjdXN0b20oY2hlY2ssIF9wYXJhbXMgPSB7fSwgXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKlxuICogUGFzcyBgZmF0YWxgIGludG8gdGhlIHBhcmFtcyBvYmplY3QgaW5zdGVhZDpcbiAqXG4gKiBgYGB0c1xuICogei5zdHJpbmcoKS5jdXN0b20oKHZhbCkgPT4gdmFsLmxlbmd0aCA+IDUsIHsgZmF0YWw6IGZhbHNlIH0pXG4gKiBgYGBcbiAqXG4gKi9cbmZhdGFsKSB7XG4gICAgaWYgKGNoZWNrKVxuICAgICAgICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpLnN1cGVyUmVmaW5lKChkYXRhLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBjaGVjayhkYXRhKTtcbiAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHsgY29kZTogXCJjdXN0b21cIiwgLi4ucGFyYW1zLCBmYXRhbDogX2ZhdGFsIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfZmF0YWwgPSBwYXJhbXMuZmF0YWwgPz8gZmF0YWwgPz8gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCk7XG59XG5leHBvcnQgeyBab2RUeXBlIGFzIFNjaGVtYSwgWm9kVHlwZSBhcyBab2RTY2hlbWEgfTtcbmV4cG9ydCBjb25zdCBsYXRlID0ge1xuICAgIG9iamVjdDogWm9kT2JqZWN0LmxhenljcmVhdGUsXG59O1xuZXhwb3J0IHZhciBab2RGaXJzdFBhcnR5VHlwZUtpbmQ7XG4oZnVuY3Rpb24gKFpvZEZpcnN0UGFydHlUeXBlS2luZCkge1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN0cmluZ1wiXSA9IFwiWm9kU3RyaW5nXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVtYmVyXCJdID0gXCJab2ROdW1iZXJcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYU5cIl0gPSBcIlpvZE5hTlwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEJpZ0ludFwiXSA9IFwiWm9kQmlnSW50XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQm9vbGVhblwiXSA9IFwiWm9kQm9vbGVhblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERhdGVcIl0gPSBcIlpvZERhdGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTeW1ib2xcIl0gPSBcIlpvZFN5bWJvbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuZGVmaW5lZFwiXSA9IFwiWm9kVW5kZWZpbmVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbFwiXSA9IFwiWm9kTnVsbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFueVwiXSA9IFwiWm9kQW55XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5rbm93blwiXSA9IFwiWm9kVW5rbm93blwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5ldmVyXCJdID0gXCJab2ROZXZlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFZvaWRcIl0gPSBcIlpvZFZvaWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RBcnJheVwiXSA9IFwiWm9kQXJyYXlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RPYmplY3RcIl0gPSBcIlpvZE9iamVjdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuaW9uXCJdID0gXCJab2RVbmlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERpc2NyaW1pbmF0ZWRVbmlvblwiXSA9IFwiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kSW50ZXJzZWN0aW9uXCJdID0gXCJab2RJbnRlcnNlY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RUdXBsZVwiXSA9IFwiWm9kVHVwbGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RSZWNvcmRcIl0gPSBcIlpvZFJlY29yZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE1hcFwiXSA9IFwiWm9kTWFwXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU2V0XCJdID0gXCJab2RTZXRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RGdW5jdGlvblwiXSA9IFwiWm9kRnVuY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMYXp5XCJdID0gXCJab2RMYXp5XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTGl0ZXJhbFwiXSA9IFwiWm9kTGl0ZXJhbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVudW1cIl0gPSBcIlpvZEVudW1cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RFZmZlY3RzXCJdID0gXCJab2RFZmZlY3RzXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmF0aXZlRW51bVwiXSA9IFwiWm9kTmF0aXZlRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9wdGlvbmFsXCJdID0gXCJab2RPcHRpb25hbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE51bGxhYmxlXCJdID0gXCJab2ROdWxsYWJsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERlZmF1bHRcIl0gPSBcIlpvZERlZmF1bHRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RDYXRjaFwiXSA9IFwiWm9kQ2F0Y2hcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RQcm9taXNlXCJdID0gXCJab2RQcm9taXNlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQnJhbmRlZFwiXSA9IFwiWm9kQnJhbmRlZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFBpcGVsaW5lXCJdID0gXCJab2RQaXBlbGluZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlYWRvbmx5XCJdID0gXCJab2RSZWFkb25seVwiO1xufSkoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIHx8IChab2RGaXJzdFBhcnR5VHlwZUtpbmQgPSB7fSkpO1xuLy8gcmVxdWlyZXMgVFMgNC40K1xuY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl8pIHsgfVxufVxuY29uc3QgaW5zdGFuY2VPZlR5cGUgPSAoXG4vLyBjb25zdCBpbnN0YW5jZU9mVHlwZSA9IDxUIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcbmNscywgcGFyYW1zID0ge1xuICAgIG1lc3NhZ2U6IGBJbnB1dCBub3QgaW5zdGFuY2Ugb2YgJHtjbHMubmFtZX1gLFxufSkgPT4gY3VzdG9tKChkYXRhKSA9PiBkYXRhIGluc3RhbmNlb2YgY2xzLCBwYXJhbXMpO1xuY29uc3Qgc3RyaW5nVHlwZSA9IFpvZFN0cmluZy5jcmVhdGU7XG5jb25zdCBudW1iZXJUeXBlID0gWm9kTnVtYmVyLmNyZWF0ZTtcbmNvbnN0IG5hblR5cGUgPSBab2ROYU4uY3JlYXRlO1xuY29uc3QgYmlnSW50VHlwZSA9IFpvZEJpZ0ludC5jcmVhdGU7XG5jb25zdCBib29sZWFuVHlwZSA9IFpvZEJvb2xlYW4uY3JlYXRlO1xuY29uc3QgZGF0ZVR5cGUgPSBab2REYXRlLmNyZWF0ZTtcbmNvbnN0IHN5bWJvbFR5cGUgPSBab2RTeW1ib2wuY3JlYXRlO1xuY29uc3QgdW5kZWZpbmVkVHlwZSA9IFpvZFVuZGVmaW5lZC5jcmVhdGU7XG5jb25zdCBudWxsVHlwZSA9IFpvZE51bGwuY3JlYXRlO1xuY29uc3QgYW55VHlwZSA9IFpvZEFueS5jcmVhdGU7XG5jb25zdCB1bmtub3duVHlwZSA9IFpvZFVua25vd24uY3JlYXRlO1xuY29uc3QgbmV2ZXJUeXBlID0gWm9kTmV2ZXIuY3JlYXRlO1xuY29uc3Qgdm9pZFR5cGUgPSBab2RWb2lkLmNyZWF0ZTtcbmNvbnN0IGFycmF5VHlwZSA9IFpvZEFycmF5LmNyZWF0ZTtcbmNvbnN0IG9iamVjdFR5cGUgPSBab2RPYmplY3QuY3JlYXRlO1xuY29uc3Qgc3RyaWN0T2JqZWN0VHlwZSA9IFpvZE9iamVjdC5zdHJpY3RDcmVhdGU7XG5jb25zdCB1bmlvblR5cGUgPSBab2RVbmlvbi5jcmVhdGU7XG5jb25zdCBkaXNjcmltaW5hdGVkVW5pb25UeXBlID0gWm9kRGlzY3JpbWluYXRlZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGludGVyc2VjdGlvblR5cGUgPSBab2RJbnRlcnNlY3Rpb24uY3JlYXRlO1xuY29uc3QgdHVwbGVUeXBlID0gWm9kVHVwbGUuY3JlYXRlO1xuY29uc3QgcmVjb3JkVHlwZSA9IFpvZFJlY29yZC5jcmVhdGU7XG5jb25zdCBtYXBUeXBlID0gWm9kTWFwLmNyZWF0ZTtcbmNvbnN0IHNldFR5cGUgPSBab2RTZXQuY3JlYXRlO1xuY29uc3QgZnVuY3Rpb25UeXBlID0gWm9kRnVuY3Rpb24uY3JlYXRlO1xuY29uc3QgbGF6eVR5cGUgPSBab2RMYXp5LmNyZWF0ZTtcbmNvbnN0IGxpdGVyYWxUeXBlID0gWm9kTGl0ZXJhbC5jcmVhdGU7XG5jb25zdCBlbnVtVHlwZSA9IFpvZEVudW0uY3JlYXRlO1xuY29uc3QgbmF0aXZlRW51bVR5cGUgPSBab2ROYXRpdmVFbnVtLmNyZWF0ZTtcbmNvbnN0IHByb21pc2VUeXBlID0gWm9kUHJvbWlzZS5jcmVhdGU7XG5jb25zdCBlZmZlY3RzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlO1xuY29uc3Qgb3B0aW9uYWxUeXBlID0gWm9kT3B0aW9uYWwuY3JlYXRlO1xuY29uc3QgbnVsbGFibGVUeXBlID0gWm9kTnVsbGFibGUuY3JlYXRlO1xuY29uc3QgcHJlcHJvY2Vzc1R5cGUgPSBab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzO1xuY29uc3QgcGlwZWxpbmVUeXBlID0gWm9kUGlwZWxpbmUuY3JlYXRlO1xuY29uc3Qgb3N0cmluZyA9ICgpID0+IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb251bWJlciA9ICgpID0+IG51bWJlclR5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb2Jvb2xlYW4gPSAoKSA9PiBib29sZWFuVHlwZSgpLm9wdGlvbmFsKCk7XG5leHBvcnQgY29uc3QgY29lcmNlID0ge1xuICAgIHN0cmluZzogKChhcmcpID0+IFpvZFN0cmluZy5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG4gICAgbnVtYmVyOiAoKGFyZykgPT4gWm9kTnVtYmVyLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBib29sZWFuOiAoKGFyZykgPT4gWm9kQm9vbGVhbi5jcmVhdGUoe1xuICAgICAgICAuLi5hcmcsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICB9KSksXG4gICAgYmlnaW50OiAoKGFyZykgPT4gWm9kQmlnSW50LmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBkYXRlOiAoKGFyZykgPT4gWm9kRGF0ZS5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG59O1xuZXhwb3J0IHsgYW55VHlwZSBhcyBhbnksIGFycmF5VHlwZSBhcyBhcnJheSwgYmlnSW50VHlwZSBhcyBiaWdpbnQsIGJvb2xlYW5UeXBlIGFzIGJvb2xlYW4sIGRhdGVUeXBlIGFzIGRhdGUsIGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgYXMgZGlzY3JpbWluYXRlZFVuaW9uLCBlZmZlY3RzVHlwZSBhcyBlZmZlY3QsIGVudW1UeXBlIGFzIGVudW0sIGZ1bmN0aW9uVHlwZSBhcyBmdW5jdGlvbiwgaW5zdGFuY2VPZlR5cGUgYXMgaW5zdGFuY2VvZiwgaW50ZXJzZWN0aW9uVHlwZSBhcyBpbnRlcnNlY3Rpb24sIGxhenlUeXBlIGFzIGxhenksIGxpdGVyYWxUeXBlIGFzIGxpdGVyYWwsIG1hcFR5cGUgYXMgbWFwLCBuYW5UeXBlIGFzIG5hbiwgbmF0aXZlRW51bVR5cGUgYXMgbmF0aXZlRW51bSwgbmV2ZXJUeXBlIGFzIG5ldmVyLCBudWxsVHlwZSBhcyBudWxsLCBudWxsYWJsZVR5cGUgYXMgbnVsbGFibGUsIG51bWJlclR5cGUgYXMgbnVtYmVyLCBvYmplY3RUeXBlIGFzIG9iamVjdCwgb2Jvb2xlYW4sIG9udW1iZXIsIG9wdGlvbmFsVHlwZSBhcyBvcHRpb25hbCwgb3N0cmluZywgcGlwZWxpbmVUeXBlIGFzIHBpcGVsaW5lLCBwcmVwcm9jZXNzVHlwZSBhcyBwcmVwcm9jZXNzLCBwcm9taXNlVHlwZSBhcyBwcm9taXNlLCByZWNvcmRUeXBlIGFzIHJlY29yZCwgc2V0VHlwZSBhcyBzZXQsIHN0cmljdE9iamVjdFR5cGUgYXMgc3RyaWN0T2JqZWN0LCBzdHJpbmdUeXBlIGFzIHN0cmluZywgc3ltYm9sVHlwZSBhcyBzeW1ib2wsIGVmZmVjdHNUeXBlIGFzIHRyYW5zZm9ybWVyLCB0dXBsZVR5cGUgYXMgdHVwbGUsIHVuZGVmaW5lZFR5cGUgYXMgdW5kZWZpbmVkLCB1bmlvblR5cGUgYXMgdW5pb24sIHVua25vd25UeXBlIGFzIHVua25vd24sIHZvaWRUeXBlIGFzIHZvaWQsIH07XG5leHBvcnQgY29uc3QgTkVWRVIgPSBJTlZBTElEO1xuIiwiaW1wb3J0IHsgdG9vbCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBNQ1BTZXJ2ZXJTdGRpbyBhcyBVbmRlcmx5aW5nTUNQU2VydmVyU3RkaW8gfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3Bhbiwgd2l0aE1DUExpc3RUb29sc1NwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIGFzIGdsb2JhbExvZ2dlciwgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TVERJT19NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3RkaW8tbWNwLWNsaWVudCc7XG5leHBvcnQgY2xhc3MgQmFzZU1DUFNlcnZlclN0ZGlvIHtcbiAgICBjYWNoZVRvb2xzTGlzdDtcbiAgICBfY2FjaGVkVG9vbHMgPSB1bmRlZmluZWQ7XG4gICAgbG9nZ2VyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIgPz8gZ2V0TG9nZ2VyKERFRkFVTFRfU1RESU9fTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSk7XG4gICAgICAgIHRoaXMuY2FjaGVUb29sc0xpc3QgPSBvcHRpb25zLmNhY2hlVG9vbHNMaXN0ID8/IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZ3MgYSBkZWJ1ZyBtZXNzYWdlIHdoZW4gZGVidWcgbG9nZ2luZyBpcyBlbmFibGVkLlxuICAgICAqIEBwYXJhbSBidWlsZE1lc3NhZ2UgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqL1xuICAgIGRlYnVnTG9nKGJ1aWxkTWVzc2FnZSkge1xuICAgICAgICBpZiAoZGVidWcuZW5hYmxlZCh0aGlzLmxvZ2dlci5uYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHdoZW4gdGhpcyBpcyB0cnVlLCB0aGUgZnVuY3Rpb24gdG8gYnVpbGQgdGhlIHN0cmluZyBpcyBjYWxsZWRcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGJ1aWxkTWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogTWluaW11bSBNQ1AgdG9vbCBkYXRhIGRlZmluaXRpb24uXG4gKiBUaGlzIHR5cGUgZGVmaW5pdGlvbiBkb2VzIG5vdCBpbnRlbmQgdG8gY292ZXIgYWxsIHBvc3NpYmxlIHByb3BlcnRpZXMuXG4gKiBJdCBzdXBwb3J0cyB0aGUgcHJvcGVydGllcyB0aGF0IGFyZSB1c2VkIGluIHRoaXMgU0RLLlxuICovXG5leHBvcnQgY29uc3QgTUNQVG9vbCA9IHoub2JqZWN0KHtcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgaW5wdXRTY2hlbWE6IHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdvYmplY3QnKSxcbiAgICAgICAgcHJvcGVydGllczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgICAgIHJlcXVpcmVkOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogei5ib29sZWFuKCksXG4gICAgfSksXG59KTtcbi8qKlxuICogUHVibGljIGludGVyZmFjZSBvZiBhbiBNQ1Agc2VydmVyIHRoYXQgcHJvdmlkZXMgdG9vbHMuXG4gKiBZb3UgY2FuIHVzZSB0aGlzIGNsYXNzIHRvIHBhc3MgTUNQIHNlcnZlciBzZXR0aW5ncyB0byB5b3VyIGFnZW50LlxuICovXG5leHBvcnQgY2xhc3MgTUNQU2VydmVyU3RkaW8gZXh0ZW5kcyBCYXNlTUNQU2VydmVyU3RkaW8ge1xuICAgIHVuZGVybHlpbmc7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nID0gbmV3IFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdGRpbyhvcHRpb25zKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcubmFtZTtcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jb25uZWN0KCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNsb3NlKCk7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RUb29scygpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVUb29sc0xpc3QgJiYgdGhpcy5fY2FjaGVkVG9vbHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRUb29scztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29scyA9IGF3YWl0IHRoaXMudW5kZXJseWluZy5saXN0VG9vbHMoKTtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVUb29sc0xpc3QpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlZFRvb2xzID0gdG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH1cbiAgICBjYWxsVG9vbCh0b29sTmFtZSwgYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKTtcbiAgICB9XG59XG4vKipcbiAqIEZldGNoZXMgYW5kIGZsYXR0ZW5zIGFsbCB0b29scyBmcm9tIG11bHRpcGxlIE1DUCBzZXJ2ZXJzLlxuICogTG9ncyBhbmQgc2tpcHMgYW55IHNlcnZlcnMgdGhhdCBmYWlsIHRvIHJlc3BvbmQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxNY3BGdW5jdGlvblRvb2xzKG1jcFNlcnZlcnMsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IGFsbFRvb2xzID0gW107XG4gICAgY29uc3QgdG9vbE5hbWVzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3Qgc2VydmVyIG9mIG1jcFNlcnZlcnMpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyVG9vbHMgPSBhd2FpdCBnZXRGdW5jdGlvblRvb2xzRnJvbVNlcnZlcihzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpO1xuICAgICAgICBjb25zdCBzZXJ2ZXJUb29sTmFtZXMgPSBuZXcgU2V0KHNlcnZlclRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSk7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IFsuLi5zZXJ2ZXJUb29sTmFtZXNdLmZpbHRlcigobikgPT4gdG9vbE5hbWVzLmhhcyhuKSk7XG4gICAgICAgIGlmIChpbnRlcnNlY3Rpb24ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgRHVwbGljYXRlIHRvb2wgbmFtZXMgZm91bmQgYWNyb3NzIE1DUCBzZXJ2ZXJzOiAke2ludGVyc2VjdGlvbi5qb2luKCcsICcpfWApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBzZXJ2ZXJUb29scykge1xuICAgICAgICAgICAgdG9vbE5hbWVzLmFkZCh0Lm5hbWUpO1xuICAgICAgICAgICAgYWxsVG9vbHMucHVzaCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWxsVG9vbHM7XG59XG5jb25zdCBfY2FjaGVkVG9vbHMgPSB7fTtcbi8qKlxuICogUmVtb3ZlIGNhY2hlZCB0b29scyBmb3IgdGhlIGdpdmVuIHNlcnZlciBzbyB0aGUgbmV4dCBsb29rdXAgZmV0Y2hlcyBmcmVzaCBkYXRhLlxuICpcbiAqIEBwYXJhbSBzZXJ2ZXJOYW1lIC0gTmFtZSBvZiB0aGUgTUNQIHNlcnZlciB3aG9zZSBjYWNoZSBzaG91bGQgYmUgY2xlYXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRhdGVTZXJ2ZXJUb29sc0NhY2hlKHNlcnZlck5hbWUpIHtcbiAgICBkZWxldGUgX2NhY2hlZFRvb2xzW3NlcnZlck5hbWVdO1xufVxuLyoqXG4gKiBGZXRjaGVzIGFsbCBmdW5jdGlvbiB0b29scyBmcm9tIGEgc2luZ2xlIE1DUCBzZXJ2ZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkge1xuICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QgJiYgX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXSkge1xuICAgICAgICByZXR1cm4gX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXTtcbiAgICB9XG4gICAgcmV0dXJuIHdpdGhNQ1BMaXN0VG9vbHNTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IG1jcFRvb2xzID0gYXdhaXQgc2VydmVyLmxpc3RUb29scygpO1xuICAgICAgICBzcGFuLnNwYW5EYXRhLnJlc3VsdCA9IG1jcFRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgY29uc3QgdG9vbHMgPSBtY3BUb29scy5tYXAoKHQpID0+IG1jcFRvRnVuY3Rpb25Ub29sKHQsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkpO1xuICAgICAgICBpZiAoc2VydmVyLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICBfY2FjaGVkVG9vbHNbc2VydmVyLm5hbWVdID0gdG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH0sIHsgZGF0YTogeyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH0gfSk7XG59XG4vKipcbiAqIFJldHVybnMgYWxsIE1DUCB0b29scyBmcm9tIHRoZSBwcm92aWRlZCBzZXJ2ZXJzLCB1c2luZyB0aGUgZnVuY3Rpb24gdG9vbCBjb252ZXJzaW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWNwVG9vbHMobWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIGdldEFsbE1jcEZ1bmN0aW9uVG9vbHMobWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdCk7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIE1DUCB0b29sIGRlZmluaXRpb24gdG8gYSBmdW5jdGlvbiB0b29sIGZvciB0aGUgQWdlbnRzIFNESy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1jcFRvRnVuY3Rpb25Ub29sKG1jcFRvb2wsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkge1xuICAgIGFzeW5jIGZ1bmN0aW9uIGludm9rZShpbnB1dCwgX2NvbnRleHQpIHtcbiAgICAgICAgbGV0IGFyZ3MgPSB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgJiYgaW5wdXQpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBKU09OLnBhcnNlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmIGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgY3VycmVudFNwYW4uc3BhbkRhdGFbJ21jcF9kYXRhJ10gPSB7IHNlcnZlcjogc2VydmVyLm5hbWUgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgc2VydmVyLmNhbGxUb29sKG1jcFRvb2wubmFtZSwgYXJncyk7XG4gICAgICAgIHJldHVybiBjb250ZW50Lmxlbmd0aCA9PT0gMSA/IGNvbnRlbnRbMF0gOiBjb250ZW50O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnR5cGUgPz8gJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnByb3BlcnRpZXMgPz8ge30sXG4gICAgICAgIHJlcXVpcmVkOiBtY3BUb29sLmlucHV0U2NoZW1hPy5yZXF1aXJlZCA/PyBbXSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LmFkZGl0aW9uYWxQcm9wZXJ0aWVzID8/IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgfHwgc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID09PSB0cnVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpY3RTY2hlbWEgPSBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYSk7XG4gICAgICAgICAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgICAgICAgICAgbmFtZTogbWNwVG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtY3BUb29sLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHN0cmljdFNjaGVtYSxcbiAgICAgICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZTogaW52b2tlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGdsb2JhbExvZ2dlci53YXJuKGBFcnJvciBjb252ZXJ0aW5nIE1DUCBzY2hlbWEgdG8gc3RyaWN0IG1vZGU6ICR7ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBub25TdHJpY3RTY2hlbWEgPSB7XG4gICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHRydWUsXG4gICAgfTtcbiAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgIG5hbWU6IG1jcFRvb2wubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG1jcFRvb2wuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIHBhcmFtZXRlcnM6IG5vblN0cmljdFNjaGVtYSxcbiAgICAgICAgc3RyaWN0OiBmYWxzZSxcbiAgICAgICAgZXhlY3V0ZTogaW52b2tlLFxuICAgIH0pO1xufVxuLyoqXG4gKiBFbnN1cmVzIHRoZSBnaXZlbiBKU09OIHNjaGVtYSBpcyBzdHJpY3QgKG5vIGFkZGl0aW9uYWwgcHJvcGVydGllcywgcmVxdWlyZWQgZmllbGRzIHNldCkuXG4gKi9cbmZ1bmN0aW9uIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgY29uc3Qgb3V0ID0ge1xuICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICB9O1xuICAgIGlmICghb3V0LnJlcXVpcmVkKVxuICAgICAgICBvdXQucmVxdWlyZWQgPSBbXTtcbiAgICByZXR1cm4gb3V0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWNwLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuLy8gVXNlIGZ1bmN0aW9uIGluc3RlYWQgb2YgZXhwb3J0aW5nIHRoZSB2YWx1ZSB0byBwcmV2ZW50XG4vLyBjaXJjdWxhciBkZXBlbmRlbmN5IHJlc29sdXRpb24gaXNzdWVzIGNhdXNlZCBieSBvdGhlciBleHBvcnRzIGluICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcydcbmV4cG9ydCBmdW5jdGlvbiBsb2FkRW52KCkge1xuICAgIHJldHVybiB7fTtcbn1cbmV4cG9ydCBjbGFzcyBCcm93c2VyRXZlbnRFbWl0dGVyIHtcbiAgICAjdGFyZ2V0ID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgKChldmVudCkgPT4gbGlzdGVuZXIoLi4uKGV2ZW50LmRldGFpbCA/PyBbXSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBvZmYodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgKChldmVudCkgPT4gbGlzdGVuZXIoLi4uKGV2ZW50LmRldGFpbCA/PyBbXSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IGFyZ3MgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLiN0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICAgIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9mZih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnQgeyBCcm93c2VyRXZlbnRFbWl0dGVyIGFzIFJ1bnRpbWVFdmVudEVtaXR0ZXIgfTtcbmV4cG9ydCBjb25zdCByYW5kb21VVUlEID0gY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pO1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlID0gY2xhc3MgUmVhZGFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgcGlwZVRvKF9kZXN0aW5hdGlvbiwgX29wdGlvbnMpIHsgfVxuICAgIHBpcGVUaHJvdWdoKF90cmFuc2Zvcm0sIF9vcHRpb25zKSB7IH1cbn07XG5leHBvcnQgY29uc3QgUmVhZGFibGVTdHJlYW0gPSBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtO1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlU3RyZWFtQ29udHJvbGxlciA9IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjtcbmV4cG9ydCBjb25zdCBUcmFuc2Zvcm1TdHJlYW0gPSBnbG9iYWxUaGlzLlRyYW5zZm9ybVN0cmVhbTtcbmV4cG9ydCBjbGFzcyBBc3luY0xvY2FsU3RvcmFnZSB7XG4gICAgY29udGV4dCA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBydW4oY29udGV4dCwgZm4pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfVxuICAgIGdldFN0b3JlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0O1xuICAgIH1cbiAgICBlbnRlcldpdGgoKSB7IH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXJFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCB7IE1DUFNlcnZlclN0ZGlvIH0gZnJvbSBcIi4vbWNwLXN0ZGlvL2Jyb3dzZXIubWpzXCI7XG5jbGFzcyBCcm93c2VyVGltZXIge1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgc2V0VGltZW91dChjYWxsYmFjaywgbXMpIHtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKTtcbiAgICAgICAgdGltZW91dC5yZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQucmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5yZWYgOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICB0aW1lb3V0LnVucmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnVucmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC51bnJlZiA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHRpbWVvdXQuaGFzUmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0Lmhhc1JlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQuaGFzUmVmIDogKCkgPT4gdHJ1ZTtcbiAgICAgICAgdGltZW91dC5yZWZyZXNoID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnJlZnJlc2ggPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnJlZnJlc2ggOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICByZXR1cm4gdGltZW91dDtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxufVxuY29uc3QgdGltZXIgPSBuZXcgQnJvd3NlclRpbWVyKCk7XG5leHBvcnQgeyB0aW1lciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hpbXMtYnJvd3Nlci5tanMubWFwIiwiaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2UgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXIubWpzXCI7XG5sZXQgX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZTtcbmZ1bmN0aW9uIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpIHtcbiAgICBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlID8/PSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbiAgICByZXR1cm4gX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCB0cmFjZSBmcm9tIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZSBvciBudWxsIGlmIHRoZXJlIGlzIG5vIHRyYWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFRyYWNlKCkge1xuICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKGN1cnJlbnRUcmFjZT8udHJhY2UpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUcmFjZS50cmFjZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBnZXQgdGhlIGN1cnJlbnQgc3BhbiBmcm9tIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgY3VycmVudCBzcGFuIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRTcGFuKCkge1xuICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY3VycmVudFNwYW4/LnNwYW4pIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRTcGFuLnNwYW47XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBUaGlzIGlzIGFuIEFzeW5jTG9jYWxTdG9yYWdlIGluc3RhbmNlIHRoYXQgc3RvcmVzIHRoZSBjdXJyZW50IHRyYWNlLlxuICogSXQgd2lsbCBhdXRvbWF0aWNhbGx5IGhhbmRsZSB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgZGlmZmVyZW50IGV2ZW50IGxvb3AgZXhlY3V0aW9ucy5cbiAqXG4gKiBUaGUgZnVuY3Rpb25zIGJlbG93IHNob3VsZCBiZSB0aGUgb25seSB3YXkgdGhhdCB0aGlzIGNvbnRleHQgZ2V0cyBpbnRlcmZhY2VkIHdpdGguXG4gKi9cbmZ1bmN0aW9uIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pIHtcbiAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0cmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgICAgICBpZiAoIXRyYWNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHRyYWNlIGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdHJhY2Uuc3RhcnQoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4odHJhY2UpO1xuICAgICAgICBhd2FpdCB0cmFjZS5lbmQoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgbmV3IHRyYWNlIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvblxuICogcGFzc2VkIHRvIGl0LlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBydW4gYW5kIGFzc2lnbiB0aGUgdHJhY2UgY29udGV4dCB0by5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGNyZWF0aW9uIG9mIHRoZSB0cmFjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2l0aFRyYWNlKHRyYWNlLCBmbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbmV3VHJhY2UgPSB0eXBlb2YgdHJhY2UgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBuYW1lOiB0cmFjZSxcbiAgICAgICAgfSlcbiAgICAgICAgOiB0cmFjZTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKHsgdHJhY2U6IG5ld1RyYWNlIH0sIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGNoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIGFjdGl2ZSB0cmFjZSBpbiB0aGUgZXhlY3V0aW9uIGNvbnRleHQuIElmIHRoZXJlXG4gKiBpcywgaXQgd2lsbCBydW4gdGhlIGdpdmVuIGZ1bmN0aW9uIHdpdGggdGhlIGV4aXN0aW5nIHRyYWNlLiBJZiB0aGVyZSBpcyBubyB0cmFjZSwgaXQgd2lsbCBjcmVhdGVcbiAqIGEgbmV3IG9uZSBhbmQgYXNzaWduIGl0IHRvIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiB0aGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ6dW5jdGlvbiB0byBydW4gYW5kIGFzc2lnbiB0aGUgdHJhY2UgY29udGV4dCB0by5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGNyZWF0aW9uIG9mIHRoZSB0cmFjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVUcmFjZShmbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgaWYgKGN1cnJlbnRUcmFjZSkge1xuICAgICAgICAvLyBpZiB0aGlzIGV4ZWN1dGlvbiBjb250ZXh0IGFscmVhZHkgaGFzIGEgdHJhY2UgaW5zdGFuY2UgaW4gaXQgd2UganVzdCBjb250aW51ZVxuICAgICAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgICB9XG4gICAgY29uc3QgbmV3VHJhY2UgPSBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uob3B0aW9ucyk7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bih7IHRyYWNlOiBuZXdUcmFjZSB9LCBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuKSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBzZXQgdGhlIGN1cnJlbnQgc3BhbiBpbiB0aGUgZXhlY3V0aW9uIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIHNwYW4gLSBUaGUgc3BhbiB0byBzZXQgYXMgdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRTcGFuKHNwYW4pIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBleGlzdGluZyB0cmFjZSBmb3VuZCcpO1xuICAgIH1cbiAgICBpZiAoY29udGV4dC5zcGFuKSB7XG4gICAgICAgIGNvbnRleHQuc3Bhbi5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnNwYW47XG4gICAgfVxuICAgIGNvbnRleHQuc3BhbiA9IHNwYW47XG4gICAgZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZW50ZXJXaXRoKGNvbnRleHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5zcGFuID0gY29udGV4dC5wcmV2aW91c1NwYW47XG4gICAgICAgIGNvbnRleHQucHJldmlvdXNTcGFuID0gY29udGV4dC5wcmV2aW91c1NwYW4/LnByZXZpb3VzU3BhbjtcbiAgICAgICAgZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZW50ZXJXaXRoKGNvbnRleHQpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGFkZCBhbiBlcnJvciB0byB0aGUgY3VycmVudCBzcGFuLlxuICpcbiAqIEBwYXJhbSBzcGFuRXJyb3IgLSBUaGUgZXJyb3IgdG8gYWRkIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcnJvclRvQ3VycmVudFNwYW4oc3BhbkVycm9yKSB7XG4gICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICBjdXJyZW50U3Bhbi5zZXRFcnJvcihzcGFuRXJyb3IpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGNsb25lIHRoZSBjdXJyZW50IGNvbnRleHQgYnkgY3JlYXRpbmcgbmV3IGluc3RhbmNlcyBvZiB0aGUgdHJhY2UsIHNwYW4sIGFuZFxuICogcHJldmlvdXMgc3Bhbi5cbiAqXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBjb250ZXh0IHRvIGNsb25lLlxuICogQHJldHVybnMgQSBjbG9uZSBvZiB0aGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lQ3VycmVudENvbnRleHQoY29udGV4dCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRyYWNlOiBjb250ZXh0LnRyYWNlPy5jbG9uZSgpLFxuICAgICAgICBzcGFuOiBjb250ZXh0LnNwYW4/LmNsb25lKCksXG4gICAgICAgIHByZXZpb3VzU3BhbjogY29udGV4dC5wcmV2aW91c1NwYW4/LmNsb25lKCksXG4gICAgfTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCBhIG5ldyBzcGFuIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIHJ1biB3aXRoIHRoZSBuZXcgc3BhbiBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aE5ld1NwYW5Db250ZXh0KGZuKSB7XG4gICAgY29uc3QgY3VycmVudENvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmICghY3VycmVudENvbnRleHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBleGlzdGluZyB0cmFjZSBmb3VuZCcpO1xuICAgIH1cbiAgICBjb25zdCBjb3B5T2ZDb250ZXh0ID0gY2xvbmVDdXJyZW50Q29udGV4dChjdXJyZW50Q29udGV4dCk7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bihjb3B5T2ZDb250ZXh0LCBmbik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0Lm1qcy5tYXAiLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgdGltZXIgYXMgX3RpbWVyLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IHRyYWNpbmcgfSBmcm9tIFwiLi4vY29uZmlnLm1qc1wiO1xuLyoqXG4gKiBQcmludHMgdGhlIHRyYWNlcyBhbmQgc3BhbnMgdG8gdGhlIGNvbnNvbGVcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnNvbGVTcGFuRXhwb3J0ZXIge1xuICAgIGFzeW5jIGV4cG9ydChpdGVtcykge1xuICAgICAgICBpZiAodHJhY2luZy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdUcmFjaW5nIGlzIGRpc2FibGVkLiBTa2lwcGluZyBleHBvcnQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0cmFjZScpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0V4cG9ydGVyXSBFeHBvcnQgdHJhY2UgdHJhY2VJZD0ke2l0ZW0udHJhY2VJZH0gbmFtZT0ke2l0ZW0ubmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCBzcGFuOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhdGNoVHJhY2VQcm9jZXNzb3Ige1xuICAgICNtYXhRdWV1ZVNpemU7XG4gICAgI21heEJhdGNoU2l6ZTtcbiAgICAjc2NoZWR1bGVEZWxheTtcbiAgICAjZXhwb3J0VHJpZ2dlclNpemU7XG4gICAgI2V4cG9ydGVyO1xuICAgICNidWZmZXIgPSBbXTtcbiAgICAjdGltZXI7XG4gICAgI3RpbWVvdXQgPSBudWxsO1xuICAgICNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3RydWN0b3IoZXhwb3J0ZXIsIHsgbWF4UXVldWVTaXplID0gMTAwMCwgbWF4QmF0Y2hTaXplID0gMTAwLCBzY2hlZHVsZURlbGF5ID0gNTAwMCwgLy8gNSBzZWNvbmRzXG4gICAgZXhwb3J0VHJpZ2dlclJhdGlvID0gMC44LCB9ID0ge30pIHtcbiAgICAgICAgdGhpcy4jbWF4UXVldWVTaXplID0gbWF4UXVldWVTaXplO1xuICAgICAgICB0aGlzLiNtYXhCYXRjaFNpemUgPSBtYXhCYXRjaFNpemU7XG4gICAgICAgIHRoaXMuI3NjaGVkdWxlRGVsYXkgPSBzY2hlZHVsZURlbGF5O1xuICAgICAgICB0aGlzLiNleHBvcnRUcmlnZ2VyU2l6ZSA9IG1heFF1ZXVlU2l6ZSAqIGV4cG9ydFRyaWdnZXJSYXRpbztcbiAgICAgICAgdGhpcy4jZXhwb3J0ZXIgPSBleHBvcnRlcjtcbiAgICAgICAgdGhpcy4jdGltZXIgPSBfdGltZXI7XG4gICAgICAgIGlmICghaXNCcm93c2VyRW52aXJvbm1lbnQoKSkge1xuICAgICAgICAgICAgdGhpcy4jcnVuRXhwb3J0TG9vcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0JhdGNoVHJhY2VQcm9jZXNzb3IgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGUgYnJvd3Nlci4gVHJhY2VzIHdpbGwgbm90IGJlIGV4cG9ydGVkLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNzYWZlQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoICsgMSA+IHRoaXMuI21heFF1ZXVlU2l6ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdEcm9wcGluZyB0cmFjZSBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBidWZmZXJcbiAgICAgICAgdGhpcy4jYnVmZmVyLnB1c2goaXRlbSk7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IGV4cG9ydGluZyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNydW5FeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0ID0gdGhpcy4jdGltZXIuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzY2hlZHVsZWQgZXhwb3J0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKCk7XG4gICAgICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgICAgIH0sIHRoaXMuI3NjaGVkdWxlRGVsYXkpO1xuICAgICAgICAvLyBXZSBzZXQgdGhpcyBzbyB0aGF0IE5vZGUgbm8gbG9uZ2VyIGNvbnNpZGVycyB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXBzIHRoZVxuICAgICAgICAvLyBwcm9jZXNzIGFsaXZlIHVudGlsIHRoZSB0aW1lciBpcyBkb25lLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVvdXQudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjZXhwb3J0QmF0Y2hlcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFeHBvcnRpbmcgYmF0Y2hlcy4gRm9yY2U6ICR7Zm9yY2V9LiBCdWZmZXIgc2l6ZTogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICBpZiAoZm9yY2UgfHwgdGhpcy4jYnVmZmVyLmxlbmd0aCA8IHRoaXMuI21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9FeHBvcnQgPSBbLi4udGhpcy4jYnVmZmVyXTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRlci5leHBvcnQodG9FeHBvcnQpO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuI2J1ZmZlci5zcGxpY2UoMCwgdGhpcy4jbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KGJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0odHJhY2UpO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKF90cmFjZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHRyYWNlcyBvbiBlbmQgYmVjYXVzZSB3ZSBhbHJlYWR5IHNlbmQgdGhlbSBvbiBzdGFydFxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChfc3Bhbikge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHNwYW5zIG9uIHN0YXJ0IGJlY2F1c2Ugd2Ugc2VuZCB0aGVtIGF0IHRoZSBlbmRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0oc3Bhbik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHNodXRkb3duIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gZ3JhY2VmdWxseScpO1xuICAgICAgICB3aGlsZSAodGhpcy4jYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgV2FpdGluZyBmb3IgYnVmZmVyIHRvIGVtcHR5LiBJdGVtcyBsZWZ0OiAke3RoaXMuI2J1ZmZlci5sZW5ndGh9YCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAvLyBubyBjdXJyZW50IGV4cG9ydCBpbiBwcm9ncmVzcy4gRm9yY2luZyBhbGwgaXRlbXMgdG8gYmUgZXhwb3J0ZWRcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RpbWVvdXQgcmVhY2hlZCwgZm9yY2UgZmx1c2hpbmcnKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdXNpbmcgc2V0VGltZW91dCB0byBhZGQgdG8gdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXAgdGhpcyBhbGl2ZSB1bnRpbCBkb25lXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gdGhpcy4jdGltZXIuc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoJ0J1ZmZlciBlbXB0eS4gRXhpdGluZycpO1xuICAgICAgICBpZiAodGhpcy4jdGltZXIgJiYgdGhpcy4jdGltZW91dCkge1xuICAgICAgICAgICAgLy8gbWFraW5nIHN1cmUgdGhlcmUgYXJlIG5vIG1vcmUgcmVxdWVzdHNcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLmNsZWFyVGltZW91dCh0aGlzLiN0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JjZUZsdXNoKCkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTXVsdGlUcmFjaW5nUHJvY2Vzc29yIHtcbiAgICAjcHJvY2Vzc29ycyA9IFtdO1xuICAgIGFkZFRyYWNlUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3JzLnB1c2gocHJvY2Vzc29yKTtcbiAgICB9XG4gICAgc2V0UHJvY2Vzc29ycyhwcm9jZXNzb3JzKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnU2h1dHRpbmcgZG93biBvbGQgcHJvY2Vzc29ycycpO1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBwcm9jZXNzb3Iuc2h1dGRvd24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNwcm9jZXNzb3JzID0gcHJvY2Vzc29ycztcbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZVN0YXJ0KHRyYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblRyYWNlU3RhcnQodHJhY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uVHJhY2VFbmQodHJhY2UpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLm9uVHJhY2VFbmQodHJhY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uU3BhblN0YXJ0KHNwYW4pIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLm9uU3BhblN0YXJ0KHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uU3BhbkVuZChzcGFuKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblNwYW5FbmQoc3Bhbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24odGltZW91dCkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iuc2h1dGRvd24odGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZm9yY2VGbHVzaCgpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLmZvcmNlRmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBfZGVmYXVsdEV4cG9ydGVyID0gbnVsbDtcbmxldCBfZGVmYXVsdFByb2Nlc3NvciA9IG51bGw7XG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdEV4cG9ydGVyKCkge1xuICAgIGlmICghX2RlZmF1bHRFeHBvcnRlcikge1xuICAgICAgICBfZGVmYXVsdEV4cG9ydGVyID0gbmV3IENvbnNvbGVTcGFuRXhwb3J0ZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0RXhwb3J0ZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFByb2Nlc3NvcigpIHtcbiAgICBpZiAoIV9kZWZhdWx0UHJvY2Vzc29yKSB7XG4gICAgICAgIF9kZWZhdWx0UHJvY2Vzc29yID0gbmV3IEJhdGNoVHJhY2VQcm9jZXNzb3IoZGVmYXVsdEV4cG9ydGVyKCkpO1xuICAgIH1cbiAgICByZXR1cm4gX2RlZmF1bHRQcm9jZXNzb3I7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9jZXNzb3IubWpzLm1hcCIsImltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG4vKipcbiAqIEdlbmVyYXRlIGFuIElTTyA4NjAxIHRpbWVzdGFtcCBvZiB0aGUgY3VycmVudCB0aW1lLlxuICogQHJldHVybnMgQW4gSVNPIDg2MDEgdGltZXN0YW1wLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGltZUlzbygpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIHRyYWNlIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgdHJhY2VfYC5cbiAqIEByZXR1cm5zIEEgdHJhY2UgSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRyYWNlSWQoKSB7XG4gICAgcmV0dXJuIGB0cmFjZV8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIHNwYW4gSUQgYnkgY3JlYXRpbmcgYSByYW5kb20gVVVJRCB2NCBhbmQgcmVtb3ZpbmcgdGhlIGRhc2hlcy4gVGhpcyBpcyB0aGUgZXF1aXZhbGVudFxuICogb2YgYHV1aWQ0KCkuaGV4YCBpbiBQeXRob24gYW5kIHByZWZpeGluZyBpdCB3aXRoIGBzcGFuX2AuXG4gKiBAcmV0dXJucyBBIHNwYW4gSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNwYW5JZCgpIHtcbiAgICByZXR1cm4gYHNwYW5fJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJykuc2xpY2UoMCwgMjQpfWA7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgZ3JvdXAgSUQgYnkgY3JlYXRpbmcgYSByYW5kb20gVVVJRCB2NCBhbmQgcmVtb3ZpbmcgdGhlIGRhc2hlcy4gVGhpcyBpcyB0aGUgZXF1aXZhbGVudFxuICogb2YgYHV1aWQ0KCkuaGV4YCBpbiBQeXRob24gYW5kIHByZWZpeGluZyBpdCB3aXRoIGBncm91cF9gLlxuICogQHJldHVybnMgQSBncm91cCBJRC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlR3JvdXBJZCgpIHtcbiAgICByZXR1cm4gYGdyb3VwXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpLnNsaWNlKDAsIDI0KX1gO1xufVxuLyoqXG4gKiBSZW1vdmUgZmllbGRzIHRoYXQgc3RhcnQgd2l0aCBhbiB1bmRlcnNjb3JlIGZyb20gYW4gb2JqZWN0LlxuICogQHBhcmFtIG9iaiAtIFRoZSBvYmplY3QgdG8gcmVtb3ZlIHByaXZhdGUgZmllbGRzIGZyb20uXG4gKiBAcmV0dXJucyBBIG5ldyBvYmplY3Qgd2l0aCBwcml2YXRlIGZpZWxkcyByZW1vdmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUHJpdmF0ZUZpZWxkcyhvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKChba2V5XSkgPT4gIWtleS5zdGFydHNXaXRoKCdfJykpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLm1qcy5tYXAiLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVNwYW5JZCwgcmVtb3ZlUHJpdmF0ZUZpZWxkcywgdGltZUlzbyB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFNwYW4ge1xuICAgIHR5cGUgPSAndHJhY2Uuc3Bhbic7XG4gICAgI2RhdGE7XG4gICAgI3RyYWNlSWQ7XG4gICAgI3NwYW5JZDtcbiAgICAjcGFyZW50SWQ7XG4gICAgI3Byb2Nlc3NvcjtcbiAgICAjc3RhcnRlZEF0O1xuICAgICNlbmRlZEF0O1xuICAgICNlcnJvcjtcbiAgICAjcHJldmlvdXNTcGFuO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiN0cmFjZUlkID0gb3B0aW9ucy50cmFjZUlkO1xuICAgICAgICB0aGlzLiNzcGFuSWQgPSBvcHRpb25zLnNwYW5JZCA/PyBnZW5lcmF0ZVNwYW5JZCgpO1xuICAgICAgICB0aGlzLiNkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3IgPSBwcm9jZXNzb3I7XG4gICAgICAgIHRoaXMuI3BhcmVudElkID0gb3B0aW9ucy5wYXJlbnRJZCA/PyBudWxsO1xuICAgICAgICB0aGlzLiNlcnJvciA9IG9wdGlvbnMuZXJyb3IgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jc3RhcnRlZEF0ID0gb3B0aW9ucy5zdGFydGVkQXQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jZW5kZWRBdCA9IG9wdGlvbnMuZW5kZWRBdCA/PyBudWxsO1xuICAgIH1cbiAgICBnZXQgdHJhY2VJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYWNlSWQ7XG4gICAgfVxuICAgIGdldCBzcGFuRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2RhdGE7XG4gICAgfVxuICAgIGdldCBzcGFuSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzcGFuSWQ7XG4gICAgfVxuICAgIGdldCBwYXJlbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3BhcmVudElkO1xuICAgIH1cbiAgICBnZXQgcHJldmlvdXNTcGFuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcHJldmlvdXNTcGFuO1xuICAgIH1cbiAgICBzZXQgcHJldmlvdXNTcGFuKHNwYW4pIHtcbiAgICAgICAgdGhpcy4jcHJldmlvdXNTcGFuID0gc3BhbjtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGFydGVkQXQpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdTcGFuIGFscmVhZHkgc3RhcnRlZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWRBdCA9IHRpbWVJc28oKTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yLm9uU3BhblN0YXJ0KHRoaXMpO1xuICAgIH1cbiAgICBlbmQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNlbmRlZEF0KSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1NwYW4gYWxyZWFkeSBmaW5pc2hlZCcsIHRoaXMuc3BhbkRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2VuZGVkQXQgPSB0aW1lSXNvKCk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3Nvci5vblNwYW5FbmQodGhpcyk7XG4gICAgfVxuICAgIHNldEVycm9yKGVycm9yKSB7XG4gICAgICAgIHRoaXMuI2Vycm9yID0gZXJyb3I7XG4gICAgfVxuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Vycm9yO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZEF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhcnRlZEF0O1xuICAgIH1cbiAgICBnZXQgZW5kZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2VuZGVkQXQ7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICBjb25zdCBzcGFuID0gbmV3IFNwYW4oe1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgc3BhbklkOiB0aGlzLnNwYW5JZCxcbiAgICAgICAgICAgIHBhcmVudElkOiB0aGlzLnBhcmVudElkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuc3BhbkRhdGEsXG4gICAgICAgICAgICBzdGFydGVkQXQ6IHRoaXMuI3N0YXJ0ZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmRlZEF0OiB0aGlzLiNlbmRlZEF0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVycm9yOiB0aGlzLiNlcnJvciA/PyB1bmRlZmluZWQsXG4gICAgICAgIH0sIHRoaXMuI3Byb2Nlc3Nvcik7XG4gICAgICAgIHNwYW4ucHJldmlvdXNTcGFuID0gdGhpcy5wcmV2aW91c1NwYW4/LmNsb25lKCk7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvYmplY3Q6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLnNwYW5JZCxcbiAgICAgICAgICAgIHRyYWNlX2lkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICBwYXJlbnRfaWQ6IHRoaXMucGFyZW50SWQsXG4gICAgICAgICAgICBzdGFydGVkX2F0OiB0aGlzLnN0YXJ0ZWRBdCxcbiAgICAgICAgICAgIGVuZGVkX2F0OiB0aGlzLmVuZGVkQXQsXG4gICAgICAgICAgICBzcGFuX2RhdGE6IHJlbW92ZVByaXZhdGVGaWVsZHModGhpcy5zcGFuRGF0YSksXG4gICAgICAgICAgICBlcnJvcjogdGhpcy5lcnJvcixcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTm9vcFNwYW4gZXh0ZW5kcyBTcGFuIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgc3VwZXIoeyB0cmFjZUlkOiAnbm8tb3AnLCBzcGFuSWQ6ICduby1vcCcsIGRhdGEgfSwgcHJvY2Vzc29yKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZW5kKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldEVycm9yKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3BhbnMubWpzLm1hcCIsImltcG9ydCB7IGRlZmF1bHRQcm9jZXNzb3IgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVRyYWNlSWQgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBUcmFjZSB7XG4gICAgdHlwZSA9ICd0cmFjZSc7XG4gICAgdHJhY2VJZDtcbiAgICBuYW1lO1xuICAgIGdyb3VwSWQgPSBudWxsO1xuICAgIG1ldGFkYXRhO1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWQ7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgcHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMudHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZCA/PyBnZW5lcmF0ZVRyYWNlSWQoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lID8/ICdBZ2VudCB3b3JrZmxvdyc7XG4gICAgICAgIHRoaXMuZ3JvdXBJZCA9IG9wdGlvbnMuZ3JvdXBJZCA/PyBudWxsO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gb3B0aW9ucy5tZXRhZGF0YSA/PyB7fTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yID8/IGRlZmF1bHRQcm9jZXNzb3IoKTtcbiAgICAgICAgdGhpcy4jc3RhcnRlZCA9IG9wdGlvbnMuc3RhcnRlZCA/PyBmYWxzZTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGFydGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIGF3YWl0IHRoaXMuI3Byb2Nlc3Nvci5vblRyYWNlU3RhcnQodGhpcyk7XG4gICAgfVxuICAgIGFzeW5jIGVuZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGFydGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzb3Iub25UcmFjZUVuZCh0aGlzKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhY2Uoe1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy5ncm91cElkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLm1ldGFkYXRhLFxuICAgICAgICAgICAgc3RhcnRlZDogdGhpcy4jc3RhcnRlZCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9iamVjdDogdGhpcy50eXBlLFxuICAgICAgICAgICAgaWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHdvcmtmbG93X25hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGdyb3VwX2lkOiB0aGlzLmdyb3VwSWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTm9vcFRyYWNlIGV4dGVuZHMgVHJhY2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcih7fSk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzeW5jIGVuZCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYWNlcy5tanMubWFwIiwiaW1wb3J0IHsgZ2V0Q3VycmVudFNwYW4sIGdldEN1cnJlbnRUcmFjZSB9IGZyb20gXCIuL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBsb2FkRW52LCB0cmFjaW5nIH0gZnJvbSBcIi4uL2NvbmZpZy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IE11bHRpVHJhY2luZ1Byb2Nlc3NvciB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmltcG9ydCB7IE5vb3BTcGFuLCBTcGFuIH0gZnJvbSBcIi4vc3BhbnMubWpzXCI7XG5pbXBvcnQgeyBOb29wVHJhY2UsIFRyYWNlIH0gZnJvbSBcIi4vdHJhY2VzLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgVHJhY2VQcm92aWRlciB7XG4gICAgI211bHRpUHJvY2Vzc29yO1xuICAgICNkaXNhYmxlZDtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy4jbXVsdGlQcm9jZXNzb3IgPSBuZXcgTXVsdGlUcmFjaW5nUHJvY2Vzc29yKCk7XG4gICAgICAgIHRoaXMuI2Rpc2FibGVkID0gdHJhY2luZy5kaXNhYmxlZDtcbiAgICAgICAgaWYgKGxvYWRFbnYoKS5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XG4gICAgICAgICAgICAvLyBkaXNhYmxlIHRyYWNpbmcgaW4gdGVzdHMgYnkgZGVmYXVsdFxuICAgICAgICAgICAgdGhpcy4jZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2FkZENsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5hZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZS5cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50U3BhbigpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBjcmVhdGVUcmFjZSh0cmFjZU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Rpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQsIE5vdCBjcmVhdGluZyB0cmFjZSAlbycsIHRyYWNlT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYWNlSWQgPSB0cmFjZU9wdGlvbnMudHJhY2VJZCA/PyBnZW5lcmF0ZVRyYWNlSWQoKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRyYWNlT3B0aW9ucy5uYW1lID8/ICdBZ2VudCB3b3JrZmxvdyc7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQ3JlYXRpbmcgdHJhY2UgJXMgd2l0aCBuYW1lICVzJywgdHJhY2VJZCwgbmFtZSk7XG4gICAgICAgIHJldHVybiBuZXcgVHJhY2UoeyAuLi50cmFjZU9wdGlvbnMsIG5hbWUsIHRyYWNlSWQgfSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgIH1cbiAgICBjcmVhdGVTcGFuKHNwYW5PcHRpb25zLCBwYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Rpc2FibGVkIHx8IHNwYW5PcHRpb25zLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQsIE5vdCBjcmVhdGluZyBzcGFuICVvJywgc3Bhbk9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudElkO1xuICAgICAgICBsZXQgdHJhY2VJZDtcbiAgICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50VHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIGFjdGl2ZSB0cmFjZS4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudFNwYW4gaW5zdGFuY2VvZiBOb29wU3BhbiB8fFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFjZSBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUGFyZW50ICR7Y3VycmVudFNwYW59IG9yICR7Y3VycmVudFRyYWNlfSBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFjZUlkID0gY3VycmVudFRyYWNlLnRyYWNlSWQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1VzaW5nIHBhcmVudCBzcGFuICVzJywgY3VycmVudFNwYW4uc3BhbklkKTtcbiAgICAgICAgICAgICAgICBwYXJlbnRJZCA9IGN1cnJlbnRTcGFuLnNwYW5JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnTm8gcGFyZW50IHNwYW4sIHVzaW5nIGN1cnJlbnQgdHJhY2UgJXMnLCBjdXJyZW50VHJhY2UudHJhY2VJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50IGluc3RhbmNlb2YgVHJhY2UpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBOb29wVHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCB0cmFjZSBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFjZUlkID0gcGFyZW50LnRyYWNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50IGluc3RhbmNlb2YgU3Bhbikge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BTcGFuKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdQYXJlbnQgc3BhbiBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnRJZCA9IHBhcmVudC5zcGFuSWQ7XG4gICAgICAgICAgICB0cmFjZUlkID0gcGFyZW50LnRyYWNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0cmFjZUlkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIHRyYWNlSWQgZm91bmQuIE1ha2Ugc3VyZSB0byBzdGFydCBhIHRyYWNlIHdpdGggYHdpdGhUcmFjZSgpYCBmaXJzdC4gUmV0dXJuaW5nIE5vb3BTcGFuLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDcmVhdGluZyBzcGFuICR7SlNPTi5zdHJpbmdpZnkoc3Bhbk9wdGlvbnMuZGF0YSl9IHdpdGggaWQgJHtzcGFuT3B0aW9ucy5zcGFuSWQgPz8gdHJhY2VJZH1gKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGFuKHtcbiAgICAgICAgICAgIC4uLnNwYW5PcHRpb25zLFxuICAgICAgICAgICAgdHJhY2VJZCxcbiAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnU2h1dHRpbmcgZG93biB0cmFjaW5nIHByb3ZpZGVyJyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zaHV0ZG93bih0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2h1dHRpbmcgZG93biB0cmFjaW5nIHByb3ZpZGVyICVvJywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBBZGRzIGxpc3RlbmVycyB0byBgcHJvY2Vzc2AgdG8gZW5zdXJlIGBzaHV0ZG93bmAgb2NjdXJzIGJlZm9yZSBleGl0LiAqL1xuICAgICNhZGRDbGVhbnVwTGlzdGVuZXJzKCkge1xuICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBoYW5kbGluZyBOb2RlLmpzIHByb2Nlc3MgdGVybWluYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNsZWFudXAgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NsZWFudXAgdGltZW91dCwgZm9yY2luZyBleGl0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNodXRkb3duKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBub3JtYWwgdGVybWluYXRpb25cbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ2JlZm9yZUV4aXQnLCBjbGVhbnVwKTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBDVFJMK0MgKFNJR0lOVClcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEzMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB0ZXJtaW5hdGlvbiAoU0lHVEVSTSlcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgYXN5bmMgKHJlYXNvbiwgcHJvbWlzZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignVW5oYW5kbGVkIHJlamVjdGlvbicsIHJlYXNvbiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkge1xuICAgIGlmICghR0xPQkFMX1RSQUNFX1BST1ZJREVSKSB7XG4gICAgICAgIEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IG5ldyBUcmFjZVByb3ZpZGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBHTE9CQUxfVFJBQ0VfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlci5tanMubWFwIiwiaW1wb3J0IHsgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhOZXdTcGFuQ29udGV4dCwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZnVuY3Rpb24gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGFuKSB7XG4gICAgcmV0dXJuIGFzeW5jIChmbiwgLi4uYXJncykgPT4ge1xuICAgICAgICAvLyBDcmVhdGluZyBhIG5ldyBzcGFuIGNvbnRleHQgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIHByZXZpb3VzIHNwYW4gaXMgY29ycmVjdGx5IHJlc2V0XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGNyZWF0ZVNwYW4oLi4uYXJncyk7XG4gICAgICAgICAgICBzZXRDdXJyZW50U3BhbihzcGFuKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zdGFydCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbihzcGFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBlcnJvci5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyByZXNwb25zZSBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhSZXNwb25zZVNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIHJlc3BvbnNlLCBwcmltYXJpbHkgdGhlIHJlc3BvbnNlIGlkZW50aWZpZXIuXG4gKiBJZiB5b3UgbmVlZCB0byBjYXB0dXJlIGRldGFpbGVkIGdlbmVyYXRpb24gaW5mb3JtYXRpb24gc3VjaCBhcyBpbnB1dC9vdXRwdXQgbWVzc2FnZXMsXG4gKiBtb2RlbCBjb25maWd1cmF0aW9uLCBvciB1c2FnZSBkYXRhLCB1c2UgYGNyZWF0ZUdlbmVyYXRpb25TcGFuKClgIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCByZXNwb25zZSBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzcG9uc2VTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyByZXNwb25zZSBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgcmVzcG9uc2UsIHByaW1hcmlseSB0aGUgcmVzcG9uc2UgaWRlbnRpZmllci5cbiAqIElmIHlvdSBuZWVkIHRvIGNhcHR1cmUgZGV0YWlsZWQgZ2VuZXJhdGlvbiBpbmZvcm1hdGlvbiBzdWNoIGFzIGlucHV0L291dHB1dCBtZXNzYWdlcyxcbiAqIG1vZGVsIGNvbmZpZ3VyYXRpb24sIG9yIHVzYWdlIGRhdGEsIHVzZSBgZ2VuZXJhdGlvblNwYW4oKWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhSZXNwb25zZVNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVJlc3BvbnNlU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBhZ2VudCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhBZ2VudFNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgYWdlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFnZW50U3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnYWdlbnQnLFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucz8uZGF0YT8ubmFtZSA/PyAnQWdlbnQnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYWdlbnQgc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEFnZW50U3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlQWdlbnRTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGZ1bmN0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEZ1bmN0aW9uU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBmdW5jdGlvbiBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnVuY3Rpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBpbnB1dDogb3B0aW9ucz8uZGF0YT8uaW5wdXQgPz8gJycsXG4gICAgICAgICAgICBvdXRwdXQ6IG9wdGlvbnM/LmRhdGE/Lm91dHB1dCA/PyAnJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGZ1bmN0aW9uIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhGdW5jdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUZ1bmN0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBoYW5kb2ZmIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEhhbmRvZmZTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGhhbmRvZmYgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhhbmRvZmZTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHsgdHlwZTogJ2hhbmRvZmYnLCAuLi5vcHRpb25zPy5kYXRhIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGhhbmRvZmYgc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEhhbmRvZmZTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVIYW5kb2ZmU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBnZW5lcmF0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEdlbmVyYXRpb25TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCBnZW5lcmF0aW9uLCBpbmNsdWRpbmcgaW5wdXQvb3V0cHV0IG1lc3NhZ2VcbiAqIHNlcXVlbmNlcywgbW9kZWwgaW5mb3JtYXRpb24sIGFuZCB1c2FnZSBkYXRhLiBJZiB5b3Ugb25seSBuZWVkIHRvIGNhcHR1cmUgYSBtb2RlbCByZXNwb25zZVxuICogaWRlbnRpZmllciwgY29uc2lkZXIgdXNpbmcgYGNyZWF0ZVJlc3BvbnNlU3BhbigpYCBpbnN0ZWFkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR2VuZXJhdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2dlbmVyYXRpb24nLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqIEF1dG9tYXRpY2FsbHkgY3JlYXRlIGEgZ2VuZXJhdGlvbiBzcGFuLCBydW4gZm4gYW5kIGNsb3NlIHRoZSBzcGFuICovXG5leHBvcnQgY29uc3Qgd2l0aEdlbmVyYXRpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVHZW5lcmF0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBjdXN0b20gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlciB1c2VcbiAqIGB3aXRoQ3VzdG9tU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDdXN0b21TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdjdXN0b20nLFxuICAgICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aEN1c3RvbVNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUN1c3RvbVNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZ3VhcmRyYWlsIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXIgdXNlXG4gKiBgd2l0aEd1YXJkcmFpbFNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR3VhcmRyYWlsU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZ3VhcmRyYWlsJyxcbiAgICAgICAgICAgIHRyaWdnZXJlZDogZmFsc2UsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aEd1YXJkcmFpbFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUd1YXJkcmFpbFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgdHJhbnNjcmlwdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc2NyaXB0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdGlvbicsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoVHJhbnNjcmlwdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVRyYW5zY3JpcHRpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHNwZWVjaCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGVlY2hTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzcGVlY2gnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFNwZWVjaFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwZWVjaFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc3BlZWNoIGdyb3VwIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNwZWVjaEdyb3VwU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3BlZWNoX2dyb3VwJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoU3BlZWNoR3JvdXBTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGVlY2hHcm91cFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgTUNQIGxpc3QgdG9vbHMgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTUNQTGlzdFRvb2xzU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnbWNwX3Rvb2xzJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoTUNQTGlzdFRvb2xzU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlTUNQTGlzdFRvb2xzU3Bhbik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVTcGFucy5tanMubWFwIiwiaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0Q3VycmVudFNwYW4sIGdldEN1cnJlbnRUcmFjZSwgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlU3BhbnMubWpzXCI7XG5leHBvcnQgeyBCYXRjaFRyYWNlUHJvY2Vzc29yLCBDb25zb2xlU3BhbkV4cG9ydGVyLCB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IE5vb3BTcGFuLCBTcGFuIH0gZnJvbSBcIi4vc3BhbnMubWpzXCI7XG5leHBvcnQgeyBOb29wVHJhY2UsIFRyYWNlIH0gZnJvbSBcIi4vdHJhY2VzLm1qc1wiO1xuZXhwb3J0IHsgZ2VuZXJhdGVHcm91cElkLCBnZW5lcmF0ZVNwYW5JZCwgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29yIC0gVGhlIHByb2Nlc3NvciB0byBhZGQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkucmVnaXN0ZXJQcm9jZXNzb3IocHJvY2Vzc29yKTtcbn1cbi8qKlxuICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICpcbiAqIEBwYXJhbSBwcm9jZXNzb3JzIC0gVGhlIGxpc3Qgb2YgcHJvY2Vzc29ycyB0byBzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZVByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0cmFjaW5nIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSBkaXNhYmxlZCAtIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFjaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2luZ0Rpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnNldERpc2FibGVkKGRpc2FibGVkKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub24odHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vZmYodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IEFnZW50IGluc3RhbmNlIGluaGVyaXRzIGZyb20gYW5kIHRoYXQgZW1pdHMgZXZlbnRzIGZvciB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudEhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vKipcbiAqIEV2ZW50IGVtaXR0ZXIgdGhhdCBldmVyeSBSdW5uZXIgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBvdmVyYWxsIHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWZlY3ljbGUubWpzLm1hcCIsIi8qKlxuICogRGVmaW5lcyBhbiBpbnRlcm5hbCBpbnB1dCBndWFyZHJhaWwgZGVmaW5pdGlvbi5cbiAqIFNESyB1c2VycyB1c3VhbGx5IGRvIG5vdCBuZWVkIHRvIHVzZSB0aGlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lSW5wdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZ3VhcmRyYWlsRnVuY3Rpb246IGV4ZWN1dGUsXG4gICAgICAgIGFzeW5jIHJ1bihhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGd1YXJkcmFpbDogeyB0eXBlOiAnaW5wdXQnLCBuYW1lIH0sXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBhd2FpdCBleGVjdXRlKGFyZ3MpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIGludGVybmFsIG91dHB1dCBndWFyZHJhaWwgZGVmaW5pdGlvbi5cbiAqIFNESyB1c2VycyB1c3VhbGx5IGRvIG5vdCBuZWVkIHRvIHVzZSB0aGlzLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVPdXRwdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ291dHB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ291dHB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBhZ2VudDogYXJncy5hZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dDogYXJncy5hZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogR2VuZXJhdGVzIHRoZSBtZXNzYWdlIHRoYXQgd2lsbCBiZSBnaXZlbiBhcyB0b29sIG91dHB1dCB0byB0aGUgbW9kZWwgdGhhdCByZXF1ZXN0ZWQgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmZXJNZXNzYWdlKGFnZW50KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsgYXNzaXN0YW50OiBhZ2VudC5uYW1lIH0pO1xufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmZcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEhhbmRvZmZUb29sTmFtZShhZ2VudCkge1xuICAgIHJldHVybiBgdHJhbnNmZXJfdG9fJHt0b0Z1bmN0aW9uVG9vbE5hbWUoYWdlbnQubmFtZSl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCkge1xuICAgIHJldHVybiBgSGFuZG9mZiB0byB0aGUgJHthZ2VudC5uYW1lfSBhZ2VudCB0byBoYW5kbGUgdGhlIHJlcXVlc3QuICR7YWdlbnQuaGFuZG9mZkRlc2NyaXB0aW9uID8/ICcnfWA7XG59XG4vKipcbiAqIEEgaGFuZG9mZiBpcyB3aGVuIGFuIGFnZW50IGRlbGVnYXRlcyBhIHRhc2sgdG8gYW5vdGhlciBhZ2VudC5cbiAqIEZvciBleGFtcGxlLCBpbiBhIGN1c3RvbWVyIHN1cHBvcnQgc2NlbmFyaW8geW91IG1pZ2h0IGhhdmUgYSBcInRyaWFnZSBhZ2VudFwiIHRoYXQgZGV0ZXJtaW5lcyB3aGljaFxuICogYWdlbnQgc2hvdWxkIGhhbmRsZSB0aGUgdXNlcidzIHJlcXVlc3QsIGFuZCBzdWItYWdlbnRzIHRoYXQgc3BlY2lhbGl6ZSBpbiBkaWZmZXJlbnQgYXJlYXMgbGlrZVxuICogYmlsbGluZywgYWNjb3VudCBtYW5hZ2VtZW50LCBldGMuXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGNsYXNzIEhhbmRvZmYge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICB0b29sTmFtZTtcbiAgICAvKipcbiAgICAgKiBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIHRvb2xEZXNjcmlwdGlvbjtcbiAgICAvKipcbiAgICAgKiBUaGUgSlNPTiBzY2hlbWEgZm9yIHRoZSBoYW5kb2ZmIGlucHV0LiBDYW4gYmUgZW1wdHkgaWYgdGhlIGhhbmRvZmYgZG9lcyBub3QgdGFrZSBhbiBpbnB1dFxuICAgICAqL1xuICAgIGlucHV0SnNvblNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICByZXF1aXJlZDogW10sXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIGlucHV0IEpTT04gc2NoZW1hIGlzIGluIHN0cmljdCBtb2RlLiBXZSAqKnN0cm9uZ2x5KiogcmVjb21tZW5kIHNldHRpbmcgdGhpcyB0b1xuICAgICAqIHRydWUsIGFzIGl0IGluY3JlYXNlcyB0aGUgbGlrZWxpaG9vZCBvZiBjb3JyZWN0IEpTT04gaW5wdXQuXG4gICAgICovXG4gICAgc3RyaWN0SnNvblNjaGVtYSA9IHRydWU7XG4gICAgLyoqXG4gICAgICogVGhlIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgaGFuZG9mZi4gVGhlIHBhcmFtZXRlcnMgcGFzc2VkIGFyZTpcbiAgICAgKiAxLiBUaGUgaGFuZG9mZiBydW4gY29udGV4dFxuICAgICAqIDIuIFRoZSBhcnVnbWVudHMgZnJvbSB0aGUgTExNLCBhcyBhIEpTT04gc3RyaW5nLiBFbXB0eSBzdHJpbmcgaWYgaW5wdXRKc29uU2NoZW1hIGlzIGVtcHR5LlxuICAgICAqXG4gICAgICogTXVzdCByZXR1cm4gYW4gYWdlbnRcbiAgICAgKi9cbiAgICBvbkludm9rZUhhbmRvZmY7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGFnZW50IHRoYXQgaXMgYmVpbmcgaGFuZGVkIG9mZiB0by5cbiAgICAgKi9cbiAgICBhZ2VudE5hbWU7XG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGZpbHRlcnMgdGhlIGlucHV0cyB0aGF0IGFyZSBwYXNzZWQgdG8gdGhlIG5leHQgYWdlbnQuIEJ5IGRlZmF1bHQsIHRoZSBuZXcgYWdlbnRcbiAgICAgKiBzZWVzIHRoZSBlbnRpcmUgY29udmVyc2F0aW9uIGhpc3RvcnkuIEluIHNvbWUgY2FzZXMsIHlvdSBtYXkgd2FudCB0byBmaWx0ZXIgaW5wdXRzIGUuZy4gdG9cbiAgICAgKiByZW1vdmUgb2xkZXIgaW5wdXRzLCBvciByZW1vdmUgdG9vbHMgZnJvbSBleGlzdGluZyBpbnB1dHMuXG4gICAgICpcbiAgICAgKiBUaGUgZnVuY3Rpb24gd2lsbCByZWNlaXZlIHRoZSBlbnRpcmUgY29udmVyc2F0aW9uIGhpc3N0b3J5IHNvIGZhciwgaW5jbHVkaW5nIHRoZSBpbnB1dCBpdGVtXG4gICAgICogdGhhdCB0cmlnZ2VyZWQgdGhlIGhhbmRvZmYgYW5kIGEgdG9vbCBjYWxsIG91dHB1dCBpdGVtIHJlcHJlc2VudGluZyB0aGUgaGFuZG9mZiB0b29sJ3Mgb3V0cHV0LlxuICAgICAqXG4gICAgICogWW91IGFyZSBmcmVlIHRvIG1vZGlmeSB0aGUgaW5wdXQgaGlzdG9yeSBvciBuZXcgaXRlbXMgYXMgeW91IHNlZSBmaXQuIFRoZSBuZXh0IGFnZW50IHRoYXQgcnVuc1xuICAgICAqIHdpbGwgcmVjZWl2ZSBgaGFuZG9mZklucHV0RGF0YS5hbGxJdGVtc1xuICAgICAqL1xuICAgIGlucHV0RmlsdGVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBhZ2VudCB0aGF0IGlzIGJlaW5nIGhhbmRlZCBvZmYgdG8uXG4gICAgICovXG4gICAgYWdlbnQ7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvb2wgZGVmaW5pdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGludm9rZSB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICBnZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgbmFtZTogdGhpcy50b29sTmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnRvb2xEZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRoaXMuaW5wdXRKc29uU2NoZW1hLFxuICAgICAgICAgICAgc3RyaWN0OiB0aGlzLnN0cmljdEpzb25TY2hlbWEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGFnZW50LCBvbkludm9rZUhhbmRvZmYpIHtcbiAgICAgICAgdGhpcy5hZ2VudE5hbWUgPSBhZ2VudC5uYW1lO1xuICAgICAgICB0aGlzLm9uSW52b2tlSGFuZG9mZiA9IG9uSW52b2tlSGFuZG9mZjtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IGRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUoYWdlbnQpO1xuICAgICAgICB0aGlzLnRvb2xEZXNjcmlwdGlvbiA9IGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhhbmRvZmYgZnJvbSBhbiBhZ2VudC4gSGFuZG9mZnMgYXJlIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCB3aGVuIHlvdSBwYXNzIGFuIGFnZW50XG4gKiBpbnRvIHRoZSBgaGFuZG9mZnNgIG9wdGlvbiBvZiB0aGUgYEFnZW50YCBjb25zdHJ1Y3Rvci4gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvblxuICogdG8gY3JlYXRlIGEgaGFuZG9mZiBtYW51YWxseSwgZ2l2aW5nIHlvdSBtb3JlIGNvbnRyb2wgb3ZlciBjb25maWd1cmF0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVElucHV0VHlwZSBUaGUgaW5wdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZG9mZihhZ2VudCwgY29uZmlnID0ge30pIHtcbiAgICBsZXQgcGFyc2VyID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGhhc09uSGFuZG9mZiA9ICEhY29uZmlnLm9uSGFuZG9mZjtcbiAgICBjb25zdCBoYXNJbnB1dFR5cGUgPSAhIWNvbmZpZy5pbnB1dFR5cGU7XG4gICAgY29uc3QgaGFzQm90aE9yTmVpdGhlckhhbmRvZmZBbmRJbnB1dFR5cGUgPSBoYXNPbkhhbmRvZmYgPT09IGhhc0lucHV0VHlwZTtcbiAgICBpZiAoIWhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1lvdSBtdXN0IHByb3ZpZGUgZWl0aGVyIGJvdGggYG9uSGFuZG9mZmAgYW5kIGBpbnB1dFR5cGVgIG9yIG5laXRoZXIuJyk7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIG9uSW52b2tlSGFuZG9mZihjb250ZXh0LCBpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgaWYgKHBhcnNlcikge1xuICAgICAgICAgICAgaWYgKCFpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQgYnV0IGdvdDogJHtpbnB1dEpzb25TdHJpbmd9YCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogYGlucHV0IGlzIGVtcHR5YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdIYW5kb2ZmIGZ1bmN0aW9uIGV4cGVjdGVkIG5vbiBlbXB0eSBpbnB1dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyB2ZXJpZnkgdGhhdCBpdCdzIHZhbGlkIGlucHV0IGJ1dCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwYXJzZXIoaW5wdXRKc29uU3RyaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm9uSGFuZG9mZikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb25maWcub25IYW5kb2ZmKGNvbnRleHQsIHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgSlNPTiBwcm92aWRlZGAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbG9nZ2VyLmRvbnRMb2dUb29sRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEludmFsaWQgSlNPTiB3aGVuIHBhcnNpbmc6ICR7aW5wdXRKc29uU3RyaW5nfS4gRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBwcm92aWRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZj8uKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgY29uc3QgaGFuZG9mZiA9IG5ldyBIYW5kb2ZmKGFnZW50LCBvbkludm9rZUhhbmRvZmYpO1xuICAgIGlmIChjb25maWcuaW5wdXRUeXBlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoY29uZmlnLmlucHV0VHlwZSwgaGFuZG9mZi50b29sTmFtZSk7XG4gICAgICAgIGhhbmRvZmYuaW5wdXRKc29uU2NoZW1hID0gcmVzdWx0LnNjaGVtYTtcbiAgICAgICAgaGFuZG9mZi5zdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VyID0gcmVzdWx0LnBhcnNlcjtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sTmFtZU92ZXJyaWRlKSB7XG4gICAgICAgIGhhbmRvZmYudG9vbE5hbWUgPSBjb25maWcudG9vbE5hbWVPdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xEZXNjcmlwdGlvbiA9IGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5pbnB1dEZpbHRlcikge1xuICAgICAgICBoYW5kb2ZmLmlucHV0RmlsdGVyID0gY29uZmlnLmlucHV0RmlsdGVyO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZG9mZjtcbn1cbi8qKlxuICogUmV0dXJucyBhIGhhbmRvZmYgZm9yIHRoZSBnaXZlbiBhZ2VudC4gSWYgdGhlIGFnZW50IGlzIGFscmVhZHkgd3JhcHBlZCBpbnRvIGEgaGFuZG9mZixcbiAqIGl0IHdpbGwgYmUgcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgYSBuZXcgaGFuZG9mZiBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQuXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhhbmRvZmYoYWdlbnQpIHtcbiAgICBpZiAoYWdlbnQgaW5zdGFuY2VvZiBIYW5kb2ZmKSB7XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmYoYWdlbnQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFuZG9mZi5tanMubWFwIiwibGV0IERFRkFVTFRfUFJPVklERVI7XG4vKipcbiAqIFNldCB0aGUgbW9kZWwgcHJvdmlkZXIgdXNlZCB3aGVuIG5vIGV4cGxpY2l0IHByb3ZpZGVyIGlzIHN1cHBsaWVkLlxuICpcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byB1c2UgYnkgZGVmYXVsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyKHByb3ZpZGVyKSB7XG4gICAgREVGQVVMVF9QUk9WSURFUiA9IHByb3ZpZGVyO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyLlxuICpcbiAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIoKSB7XG4gICAgaWYgKHR5cGVvZiBERUZBVUxUX1BST1ZJREVSID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRlZmF1bHQgbW9kZWwgcHJvdmlkZXIgc2V0LiBNYWtlIHN1cmUgdG8gc2V0IGEgcHJvdmlkZXIgdXNpbmcgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgYmVmb3JlIGNhbGxpbmcgZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgb3IgcGFzcyBhbiBleHBsaWNpdCBwcm92aWRlci4nKTtcbiAgICB9XG4gICAgcmV0dXJuIERFRkFVTFRfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlcnMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTaGFyZWQgYmFzZSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFdmVyeSBpdGVtIGluIHRoZSBwcm90b2NvbCBwcm92aWRlcyBhIGBwcm92aWRlckRhdGFgIGZpZWxkIHRvIGFjY29tb2RhdGUgY3VzdG9tIGZ1bmN0aW9uYWxpdHlcbiAqIG9yIG5ldyBmaWVsZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFNoYXJlZEJhc2UgPSB6Lm9iamVjdCh7XG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBvcHRpb25hbCBwcm92aWRlciBzcGVjaWZpYyBkYXRhLiBVc2VkIGZvciBjdXN0b20gZnVuY3Rpb25hbGl0eSBvciBtb2RlbCBwcm92aWRlclxuICAgICAqIHNwZWNpZmljIGZpZWxkcy5cbiAgICAgKi9cbiAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG59KTtcbi8qKlxuICogRXZlcnkgaXRlbSBoYXMgYSBzaGFyZWQgb2Ygc2hhcmVkIGl0ZW0gZGF0YSBpbmNsdWRpbmcgYW4gb3B0aW9uYWwgSUQuXG4gKi9cbmV4cG9ydCBjb25zdCBJdGVtQmFzZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBBbiBJRCB0byBpZGVudGlmeSB0aGUgaXRlbS4gVGhpcyBpcyBvcHRpb25hbCBieSBkZWZhdWx0LiBJZiBhIG1vZGVsIHByb3ZpZGVyIGFic29sdXRlbHlcbiAgICAgKiByZXF1aXJlcyB0aGlzIGZpZWxkLCBpdCB3aWxsIGJlIHZhbGlkYXRlZCBvbiB0aGUgbW9kZWwgbGV2ZWwuXG4gICAgICovXG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ29udGVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlZnVzYWwgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZWZ1c2FsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlZnVzYWwgZXhwbGFuYXRpb24gZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVmdXNhbDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE91dHB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIEEgdGV4dCBpbnB1dCBmb3IgZXhhbXBsZSBhIG1lc3NhZ2UgZnJvbSBhIHVzZXJcbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRJbWFnZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYSBVUkwsIGJhc2U2NCBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgaW1hZ2U6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5vcih6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0NvdWxkIGJlIGEgVVJMLCBiYXNlNjQgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELicpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRGaWxlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfZmlsZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBmaWxlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYSBVUkwsIGJhc2U2NCBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgZmlsZTogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLm9yKHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnQ29udGVudHMgb2YgdGhlIGZpbGUgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELicpLFxufSk7XG5leHBvcnQgY29uc3QgQXVkaW9Db250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnYXVkaW8nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXVkaW8gaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBhdWRpbyBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBhdWRpbzogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLm9yKHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSBvciBmaWxlIGlkJyksXG4gICAgLyoqXG4gICAgICogVGhlIGZvcm1hdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgZm9ybWF0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNjcmlwdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbWFnZUNvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGltYWdlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhJyksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xPdXRwdXRJbWFnZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGRhdGEuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGRhdGE6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbWVkaWEgdHlwZSBvZiB0aGUgaW1hZ2UuXG4gICAgICovXG4gICAgbWVkaWFUeXBlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdJQU5BIG1lZGlhIHR5cGUgb2YgdGhlIGltYWdlJyksXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclRvb2xPdXRwdXQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9zY3JlZW5zaG90JyksXG4gICAgLyoqXG4gICAgICogQSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGEgVVJMIHJlcHJlc2VudGluZyB0aGUgc2NyZWVuc2hvdC5cbiAgICAgKi9cbiAgICBkYXRhOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIFVSTCcpLFxufSk7XG5leHBvcnQgY29uc3QgY29tcHV0ZXJBY3Rpb25zID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3NjcmVlbnNob3QnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnY2xpY2snKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgYnV0dG9uOiB6LmVudW0oWydsZWZ0JywgJ3JpZ2h0JywgJ3doZWVsJywgJ2JhY2snLCAnZm9yd2FyZCddKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZG91YmxlX2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Njcm9sbCcpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgICAgICBzY3JvbGxfeDogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3k6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3R5cGUnKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnd2FpdCcpIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtb3ZlJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2tleXByZXNzJyksXG4gICAgICAgIGtleXM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RyYWcnKSxcbiAgICAgICAgcGF0aDogei5hcnJheSh6Lm9iamVjdCh7IHg6IHoubnVtYmVyKCksIHk6IHoubnVtYmVyKCkgfSkpLFxuICAgIH0pLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXNzYWdlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgQXNzaXN0YW50Q29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIE91dHB1dFRleHQsXG4gICAgUmVmdXNhbCxcbiAgICBJbnB1dFRleHQsXG4gICAgQXVkaW9Db250ZW50LFxuICAgIEltYWdlQ29udGVudCxcbl0pO1xuY29uc3QgTWVzc2FnZUJhc2UgPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIEFueSBpdGVtIHdpdGhvdXQgYSB0eXBlIGlzIHRyZWF0ZWQgYXMgYSBtZXNzYWdlXG4gICAgICovXG4gICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJykub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFzc2lzdGFudE1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBtZXNzYWdlIGZyb20gdGhlIGFzc2lzdGFudCAoaS5lLiB0aGUgbW9kZWwpXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCdhc3Npc3RhbnQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShBc3Npc3RhbnRDb250ZW50KSxcbn0pO1xuZXhwb3J0IGNvbnN0IFVzZXJDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgSW5wdXRUZXh0LFxuICAgIElucHV0SW1hZ2UsXG4gICAgSW5wdXRGaWxlLFxuICAgIEF1ZGlvQ29udGVudCxcbl0pO1xuZXhwb3J0IGNvbnN0IFVzZXJNZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLy8gdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgbWVzc2FnZSBmcm9tIHRoZSB1c2VyXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShVc2VyQ29udGVudCkub3Ioei5zdHJpbmcoKSksXG59KTtcbmNvbnN0IFN5c3RlbU1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvLyB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBzeXN0ZW0gbWVzc2FnZSB0byB0aGUgdXNlclxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgnc3lzdGVtJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE1lc3NhZ2VJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3JvbGUnLCBbXG4gICAgU3lzdGVtTWVzc2FnZUl0ZW0sXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgVXNlck1lc3NhZ2VJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUb29sIGNhbGwgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBIb3N0ZWRUb29sQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2xfY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBob3N0ZWQgdG9vbC4gRm9yIGV4YW1wbGUgYHdlYl9zZWFyY2hfY2FsbGAgb3IgYGZpbGVfc2VhcmNoX2NhbGxgXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIGhvc3RlZCB0b29sJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBwcmltYXJ5IG91dHB1dCBvZiB0aGUgdG9vbCBjYWxsLiBBZGRpdGlvbmFsIG91dHB1dCBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBGdW5jdGlvbkNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgdG9vbCBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgdG9vbCBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbicpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsX3Jlc3VsdCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRoYXQgd2FzIGNhbGxlZFxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSB0b29sJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSB0b29sIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIHRvb2wgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBvdXRwdXQgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1Rvb2xPdXRwdXRUZXh0LCBUb29sT3V0cHV0SW1hZ2VdKSxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXB1dGVyVXNlQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgY29tcHV0ZXIgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBjb21wdXRlciBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIGFjdGlvbiB0byBiZSBwZXJmb3JtZWQgYnkgdGhlIGNvbXB1dGVyLlxuICAgICAqL1xuICAgIGFjdGlvbjogY29tcHV0ZXJBY3Rpb25zLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9jYWxsX3Jlc3VsdCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgY29tcHV0ZXIgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgb3V0cHV0IG9mIHRoZSBjb21wdXRlciBjYWxsLlxuICAgICAqL1xuICAgIG91dHB1dDogQ29tcHV0ZXJUb29sT3V0cHV0LFxufSk7XG5leHBvcnQgY29uc3QgVG9vbENhbGxJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgQ29tcHV0ZXJVc2VDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxJdGVtLFxuICAgIEhvc3RlZFRvb2xDYWxsSXRlbSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3BlY2lhbCBpdGVtIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgUmVhc29uaW5nSXRlbSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVhc29uaW5nJyksXG4gICAgLyoqXG4gICAgICogVGhlIHVzZXIgZmFjaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZWFzb25pbmcuIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gbWlnaHQgYmUgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouYXJyYXkoSW5wdXRUZXh0KSxcbn0pO1xuLyoqXG4gKiBUaGlzIGlzIGEgY2F0Y2ggYWxsIGZvciBpdGVtcyB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wuXG4gKlxuICogRm9yIGV4YW1wbGUsIGEgbW9kZWwgbWlnaHQgcmV0dXJuIGFuIGl0ZW0gdGhhdCBpcyBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wgdXNpbmcgdGhpcyB0eXBlLlxuICpcbiAqIEluIHRoYXQgY2FzZSBldmVyeXRoaW5nIHJldHVybmVkIGZyb20gdGhlIG1vZGVsIHNob3VsZCBiZSBwYXNzZWQgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICpcbiAqIFRoaXMgZW5hYmxlcyBuZXcgZmVhdHVyZXMgdG8gYmUgYWRkZWQgdG8gYmUgYWRkZWQgYnkgYSBtb2RlbCBwcm92aWRlciB3aXRob3V0IGJyZWFraW5nIHRoZSBwcm90b2NvbC5cbiAqL1xuZXhwb3J0IGNvbnN0IFVua25vd25JdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Vua25vd24nKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSm9pbmVkIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBPdXRwdXRNb2RlbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFJlYXNvbmluZ0l0ZW0sXG4gICAgVW5rbm93bkl0ZW0sXG5dKTtcbmV4cG9ydCBjb25zdCBNb2RlbEl0ZW0gPSB6LnVuaW9uKFtcbiAgICBVc2VyTWVzc2FnZUl0ZW0sXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgU3lzdGVtTWVzc2FnZUl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgQ29tcHV0ZXJVc2VDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgIENvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0sXG4gICAgUmVhc29uaW5nSXRlbSxcbiAgICBVbmtub3duSXRlbSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTWV0YSBkYXRhIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgVXNhZ2VEYXRhID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdHJlYW0gZXZlbnQgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gbmV3IG91dHB1dCB0ZXh0IGlzIGF2YWlsYWJsZSB0byBzdHJlYW0gdG8gdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFRleHRTdHJlYW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dF9kZWx0YScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBkZWx0YSB0ZXh0IHRoYXQgd2FzIHN0cmVhbWVkIGJ5IHRoZSBtb2RlbHRvIHRoZSB1c2VyLlxuICAgICAqL1xuICAgIGRlbHRhOiB6LnN0cmluZygpLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIGEgbmV3IHJlc3BvbnNlIGlzIHN0YXJ0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlX3N0YXJ0ZWQnKSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBhIHJlc3BvbnNlIGlzIGNvbXBsZXRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZV9kb25lJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3BvbnNlIGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJlc3BvbnNlOiBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdXNhZ2UgZGF0YSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdXNhZ2U6IFVzYWdlRGF0YSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICAgICAqL1xuICAgICAgICBvdXRwdXQ6IHouYXJyYXkoT3V0cHV0TW9kZWxJdGVtKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBmb3IgZXZlcnkgaXRlbSB0aGF0IGdldHMgc3RyZWFtZWQgdG8gdGhlIG1vZGVsLiBVc2VkIHRvIGV4cG9zZSB0aGUgcmF3IGV2ZW50c1xuICogZnJvbSB0aGUgbW9kZWwuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudEdlbmVyaWNJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbW9kZWwnKSxcbiAgICBldmVudDogei5hbnkoKS5kZXNjcmliZSgnVGhlIGV2ZW50IGZyb20gdGhlIG1vZGVsJyksXG59KTtcbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIFN0cmVhbUV2ZW50VGV4dFN0cmVhbSxcbiAgICBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkLFxuICAgIFN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkLFxuICAgIFN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0sXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3RvY29sLm1qcy5tYXAiLCJpbXBvcnQgeyBVc2FnZURhdGEgfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbi8qKlxuICogVHJhY2tzIHRva2VuIHVzYWdlIGFuZCByZXF1ZXN0IGNvdW50cyBmb3IgYW4gYWdlbnQgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgVXNhZ2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgcmVxdWVzdHMgbWFkZSB0byB0aGUgTExNIEFQSS5cbiAgICAgKi9cbiAgICByZXF1ZXN0cztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgc2VudCBhbmQgcmVjZWl2ZWQsIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgdG90YWxUb2tlbnM7XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgaW5wdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBpbnB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBvdXRwdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdHMgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyA9IDA7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IDA7XG4gICAgICAgICAgICB0aGlzLnRvdGFsVG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdHMgPSBpbnB1dD8ucmVxdWVzdHMgPz8gMTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSBpbnB1dD8uaW5wdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gaW5wdXQ/Lm91dHB1dFRva2VucyA/PyAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFRva2VucyA9IGlucHV0Py50b3RhbFRva2VucyA/PyAwO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dD8uaW5wdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICAgICAgPyBbaW5wdXQuaW5wdXRUb2tlbnNEZXRhaWxzXVxuICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dD8ub3V0cHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgICAgID8gW2lucHV0Lm91dHB1dFRva2Vuc0RldGFpbHNdXG4gICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGQobmV3VXNhZ2UpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0cyArPSBuZXdVc2FnZS5yZXF1ZXN0cztcbiAgICAgICAgdGhpcy5pbnB1dFRva2VucyArPSBuZXdVc2FnZS5pbnB1dFRva2VucztcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgKz0gbmV3VXNhZ2Uub3V0cHV0VG9rZW5zO1xuICAgICAgICB0aGlzLnRvdGFsVG9rZW5zICs9IG5ld1VzYWdlLnRvdGFsVG9rZW5zO1xuICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscyk7XG4gICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpO1xuICAgIH1cbn1cbmV4cG9ydCB7IFVzYWdlRGF0YSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNhZ2UubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbi8qKlxuICogQSBjb250ZXh0IG9iamVjdCB0aGF0IGlzIHBhc3NlZCB0byB0aGUgYFJ1bm5lci5ydW4oKWAgbWV0aG9kLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQ29udGV4dCB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRleHQgb2JqZWN0IHBhc3NlZCBieSB5b3UgdG8gdGhlIGBSdW5uZXIucnVuKClgXG4gICAgICovXG4gICAgY29udGV4dDtcbiAgICAvKipcbiAgICAgKiBUaGUgdXNhZ2Ugb2YgdGhlIGFnZW50IHJ1biBzbyBmYXIuIEZvciBzdHJlYW1lZCByZXNwb25zZXMsIHRoZSB1c2FnZSB3aWxsIGJlIHN0YWxlIHVudGlsIHRoZVxuICAgICAqIGxhc3QgY2h1bmsgb2YgdGhlIHN0cmVhbSBpcyBwcm9jZXNzZWQuXG4gICAgICovXG4gICAgdXNhZ2U7XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgdG9vbCBuYW1lcyB0byB3aGV0aGVyIHRoZXkgaGF2ZSBiZWVuIGFwcHJvdmVkLlxuICAgICAqL1xuICAgICNhcHByb3ZhbHM7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCA9IHt9KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMudXNhZ2UgPSBuZXcgVXNhZ2UoKTtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWJ1aWxkIHRoZSBhcHByb3ZhbHMgbWFwIGZyb20gYSBzZXJpYWxpemVkIHN0YXRlLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFscyAtIFRoZSBhcHByb3ZhbHMgbWFwIHRvIHJlYnVpbGQuXG4gICAgICovXG4gICAgX3JlYnVpbGRBcHByb3ZhbHMoYXBwcm92YWxzKSB7XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoYXBwcm92YWxzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgdG9vbCBjYWxsIGhhcyBiZWVuIGFwcHJvdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRvb2xOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gICAgICogQHBhcmFtIGNhbGxJZCAtIFRoZSBjYWxsIElEIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSB0b29sIGNhbGwgaGFzIGJlZW4gYXBwcm92ZWQsIGBmYWxzZWAgaWYgYmxvY2tlZCBhbmQgYHVuZGVmaW5lZGAgaWYgbm90IHlldCBhcHByb3ZlZCBvciByZWplY3RlZC5cbiAgICAgKi9cbiAgICBpc1Rvb2xBcHByb3ZlZCh7IHRvb2xOYW1lLCBjYWxsSWQgfSkge1xuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSk7XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZCA9PT0gdHJ1ZSAmJiBhcHByb3ZhbEVudHJ5LnJlamVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignVG9vbCBpcyBwZXJtYW5lbnRseSBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZScpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8ucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5hcHByb3ZlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBjb25zdCBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbiA9IEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeT8ucmVqZWN0ZWQpXG4gICAgICAgICAgICA/IGFwcHJvdmFsRW50cnkucmVqZWN0ZWQuaW5jbHVkZXMoY2FsbElkKVxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwgJiYgaW5kaXZpZHVhbENhbGxSZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUb29sIGNhbGwgJHtjYWxsSWR9IGlzIGJvdGggYXBwcm92ZWQgYW5kIHJlamVjdGVkIGF0IHRoZSBzYW1lIHRpbWUuIEFwcHJvdmFsIHRha2VzIHByZWNlZGVuY2VgKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxSZWplY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRvb2xOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gICAgICogQHBhcmFtIGNhbGxJZCAtIFRoZSBjYWxsIElEIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c0FwcHJvdmUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzQXBwcm92ZSkge1xuICAgICAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwge1xuICAgICAgICAgICAgICAgIGFwcHJvdmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKSA/PyB7XG4gICAgICAgICAgICBhcHByb3ZlZDogW10sXG4gICAgICAgICAgICByZWplY3RlZDogW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnkuYXBwcm92ZWQpKSB7XG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLnB1c2goYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqL1xuICAgIHJlamVjdFRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c1JlamVjdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNSZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSkgPz8ge1xuICAgICAgICAgICAgYXBwcm92ZWQ6IFtdLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5LnJlamVjdGVkKSkge1xuICAgICAgICAgICAgYXBwcm92YWxFbnRyeS5yZWplY3RlZC5wdXNoKGFwcHJvdmFsSXRlbS5yYXdJdGVtLmNhbGxJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwgYXBwcm92YWxFbnRyeSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dCxcbiAgICAgICAgICAgIHVzYWdlOiB0aGlzLnVzYWdlLFxuICAgICAgICAgICAgYXBwcm92YWxzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy4jYXBwcm92YWxzLmVudHJpZXMoKSksXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuQ29udGV4dC5tanMubWFwIiwiaW1wb3J0IHsgUmVhZGFibGVTdHJlYW0gYXMgX1JlYWRhYmxlU3RyZWFtLCBUcmFuc2Zvcm1TdHJlYW0sIFJlYWRhYmxlLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldFR1cm5JbnB1dCB9IGZyb20gXCIuL3J1bi5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgU3RyZWFtRXZlbnRUZXh0U3RyZWFtIH0gZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG5jbGFzcyBSdW5SZXN1bHRCYXNlIHtcbiAgICBzdGF0ZTtcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoaXN0b3J5IG9mIHRoZSBhZ2VudCBydW4uIFRoaXMgaW5jbHVkZXMgdGhlIGlucHV0IGl0ZW1zIGFuZCB0aGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmdcbiAgICAgKiB0aGUgYWdlbnQgcnVuLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZCBhcyBpbnB1dHMgZm9yIHRoZSBuZXh0IGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIGdldFR1cm5JbnB1dCh0aGlzLmlucHV0LCB0aGlzLm5ld0l0ZW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG5ldyBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4uIFRoZXNlIGluY2x1ZGUgdGhpbmdzIGxpa2UgbmV3IG1lc3NhZ2VzLCB0b29sXG4gICAgICogY2FsbHMgYW5kIHRoZWlyIG91dHB1dHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIEl0IGRvZXMgbm90IGluY2x1ZGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGFnZW50cyBhbmQgaW5zdGVhZCByZXByZXNlbnRzIHRoZSBtb2RlbCBkYXRhLlxuICAgICAqXG4gICAgICogRm9yIHRoZSBvdXRwdXQgaW5jbHVkaW5nIHRoZSBhZ2VudHMsIHVzZSB0aGUgYG5ld0l0ZW1zYCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KFtdLCB0aGlzLm5ld0l0ZW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBpbnB1dCBpdGVtcy5cbiAgICAgKi9cbiAgICBnZXQgaW5wdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9vcmlnaW5hbElucHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcnVuIGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1bi4gVGhpcyBhc3NvY2lhdGVzIHRoZSBtb2RlbCBkYXRhIHdpdGggdGhlIGFnZW50cy5cbiAgICAgKlxuICAgICAqIEZvciB0aGUgbW9kZWwgZGF0YSB0aGF0IGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLCB1c2UgdGhlIGBvdXRwdXRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldCBuZXdJdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmF3IExMTSByZXNwb25zZXMgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBkdXJpbmcgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgcmF3UmVzcG9uc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fbW9kZWxSZXNwb25zZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IHJlc3BvbnNlIElEIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgZHVyaW5nIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IGxhc3RSZXNwb25zZUlkKCkge1xuICAgICAgICBjb25zdCByZXNwb25zZXMgPSB0aGlzLnJhd1Jlc3BvbnNlcztcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlcyAmJiByZXNwb25zZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyByZXNwb25zZXNbcmVzcG9uc2VzLmxlbmd0aCAtIDFdLnJlc3BvbnNlSWRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGFzdCBhZ2VudCB0aGF0IHdhcyBydW5cbiAgICAgKi9cbiAgICBnZXQgbGFzdEFnZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHdWFyZHJhaWwgcmVzdWx0cyBmb3IgdGhlIGlucHV0IG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGdldCBpbnB1dEd1YXJkcmFpbFJlc3VsdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0aGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX291dHB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFueSBpbnRlcnJ1cHRpb25zIHRoYXQgb2NjdXJyZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4gZm9yIGV4YW1wbGUgZm9yIHRvb2wgYXBwcm92YWxzLlxuICAgICAqL1xuICAgIGdldCBpbnRlcnJ1cHRpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwLmRhdGEuaW50ZXJydXB0aW9ucztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LiBJZiB0aGUgb3V0cHV0IHR5cGUgd2FzIHNldCB0byBhbnl0aGluZyBvdGhlciB0aGFuIGB0ZXh0YCxcbiAgICAgKiB0aGlzIHdpbGwgYmUgcGFyc2VkIGVpdGhlciBhcyBKU09OIG9yIHVzaW5nIHRoZSBab2Qgc2NoZW1hIHlvdSBwcm92aWRlZC5cbiAgICAgKi9cbiAgICBnZXQgZmluYWxPdXRwdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudEFnZW50LnByb2Nlc3NGaW5hbE91dHB1dCh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci53YXJuKCdBY2Nlc3NlZCBmaW5hbE91dHB1dCBiZWZvcmUgYWdlbnQgcnVuIGlzIGNvbXBsZXRlZC4nKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vKipcbiAqIFRoZSByZXN1bHQgb2YgYW4gYWdlbnQgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgUnVuUmVzdWx0IGV4dGVuZHMgUnVuUmVzdWx0QmFzZSB7XG4gICAgY29uc3RydWN0b3Ioc3RhdGUpIHtcbiAgICAgICAgc3VwZXIoc3RhdGUpO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBhbiBhZ2VudCBydW4gaW4gc3RyZWFtaW5nIG1vZGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJlYW1lZFJ1blJlc3VsdCBleHRlbmRzIFJ1blJlc3VsdEJhc2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGFnZW50IHRoYXQgaXMgcnVubmluZ1xuICAgICAqL1xuICAgIGdldCBjdXJyZW50QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgdHVybiBudW1iZXJcbiAgICAgKi9cbiAgICBjdXJyZW50VHVybiA9IDA7XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHR1cm5zIHRoYXQgY2FuIGJlIHJ1blxuICAgICAqL1xuICAgIG1heFR1cm5zO1xuICAgICNlcnJvciA9IG51bGw7XG4gICAgI3NpZ25hbDtcbiAgICAjcmVhZGFibGVDb250cm9sbGVyO1xuICAgICNyZWFkYWJsZVN0cmVhbTtcbiAgICAjY29tcGxldGVkUHJvbWlzZTtcbiAgICAjY29tcGxldGVkUHJvbWlzZVJlc29sdmU7XG4gICAgI2NvbXBsZXRlZFByb21pc2VSZWplY3Q7XG4gICAgI2NhbmNlbGxlZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuI3NpZ25hbCA9IHJlc3VsdC5zaWduYWw7XG4gICAgICAgIGlmICh0aGlzLiNzaWduYWwpIHtcbiAgICAgICAgICAgIHRoaXMuI3NpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNyZWFkYWJsZVN0cmVhbS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3JlYWRhYmxlU3RyZWFtID0gbmV3IF9SZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuI2NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBBZGRzIGFuIGl0ZW0gdG8gdGhlIHN0cmVhbSBvZiBvdXRwdXQgaXRlbXNcbiAgICAgKi9cbiAgICBfYWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlcj8uZW5xdWV1ZShpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgc3RyZWFtIGhhcyBiZWVuIGNvbXBsZXRlZFxuICAgICAqL1xuICAgIF9kb25lKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2FuY2VsbGVkICYmIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZT8uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogSGFuZGxlcyBhbiBlcnJvciBpbiB0aGUgc3RyZWFtIGxvb3AuXG4gICAgICovXG4gICAgX3JhaXNlRXJyb3IoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlcnJvciA9IGVycjtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlamVjdD8uKGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyZWFtIGhhcyBiZWVuIGNhbmNlbGxlZC5cbiAgICAgKi9cbiAgICBnZXQgY2FuY2VsbGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY2FuY2VsbGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIHJlYWRhYmxlIHN0cmVhbS5cbiAgICAgKiBAcmV0dXJucyBBIHJlYWRhYmxlIHN0cmVhbSBvZiB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIHRvU3RyZWFtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGFibGVTdHJlYW07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF3YWl0IHRoaXMgcHJvbWlzZSB0byBlbnN1cmUgdGhhdCB0aGUgc3RyZWFtIGhhcyBiZWVuIGNvbXBsZXRlZCBpZiB5b3UgYXJlIG5vdCBjb25zdW1pbmcgdGhlXG4gICAgICogc3RyZWFtIGRpcmVjdGx5LlxuICAgICAqL1xuICAgIGdldCBjb21wbGV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb21wbGV0ZWRQcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcnJvciB0aHJvd24gZHVyaW5nIHRoZSBydW4sIGlmIGFueS5cbiAgICAgKi9cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlcnJvcjtcbiAgICB9XG4gICAgdG9UZXh0U3RyZWFtKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLiNyZWFkYWJsZVN0cmVhbS5waXBlVGhyb3VnaChuZXcgVHJhbnNmb3JtU3RyZWFtKHtcbiAgICAgICAgICAgIHRyYW5zZm9ybShldmVudCwgY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAncmF3X21vZGVsX3N0cmVhbV9ldmVudCcgJiZcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS50eXBlID09PSAnb3V0cHV0X3RleHRfZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBTdHJlYW1FdmVudFRleHRTdHJlYW0ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShpdGVtLmRlbHRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSk7XG4gICAgICAgIGlmIChvcHRpb25zLmNvbXBhdGlibGVXaXRoTm9kZVN0cmVhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFkYWJsZS5mcm9tV2ViKHN0cmVhbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3JlYWRhYmxlU3RyZWFtW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc3VsdC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZVRvb2wodG9vbCkge1xuICAgIGlmICh0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRvb2wucGFyYW1ldGVycyxcbiAgICAgICAgICAgIHN0cmljdDogdG9vbC5zdHJpY3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wdXRlcicsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogdG9vbC5jb21wdXRlci5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGRpbWVuc2lvbnM6IHRvb2wuY29tcHV0ZXIuZGltZW5zaW9ucyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICBwcm92aWRlckRhdGE6IHRvb2wucHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplSGFuZG9mZihoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9vbE5hbWU6IGgudG9vbE5hbWUsXG4gICAgICAgIHRvb2xEZXNjcmlwdGlvbjogaC50b29sRGVzY3JpcHRpb24sXG4gICAgICAgIGlucHV0SnNvblNjaGVtYTogaC5pbnB1dEpzb25TY2hlbWEsXG4gICAgICAgIHN0cmljdEpzb25TY2hlbWE6IGguc3RyaWN0SnNvblNjaGVtYSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VyaWFsaXplLm1qcy5tYXAiLCJpbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5leHBvcnQgY2xhc3MgUnVuSXRlbUJhc2Uge1xuICAgIHR5cGUgPSAnYmFzZV9pdGVtJztcbiAgICByYXdJdGVtO1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIHJhd0l0ZW06IHRoaXMucmF3SXRlbSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuTWVzc2FnZU91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGNvbnRlbnQoKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiB0aGlzLnJhd0l0ZW0uY29udGVudCkge1xuICAgICAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gcGFydC50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3Rvb2xfY2FsbF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIG91dHB1dDtcbiAgICB0eXBlID0gJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQsIG91dHB1dCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgb3V0cHV0OiB0b1NtYXJ0U3RyaW5nKHRoaXMub3V0cHV0KSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuUmVhc29uaW5nSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAncmVhc29uaW5nX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZkNhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdoYW5kb2ZmX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5IYW5kb2ZmT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIHNvdXJjZUFnZW50O1xuICAgIHRhcmdldEFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgc291cmNlQWdlbnQsIHRhcmdldEFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuc291cmNlQWdlbnQgPSBzb3VyY2VBZ2VudDtcbiAgICAgICAgdGhpcy50YXJnZXRBZ2VudCA9IHRhcmdldEFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIHNvdXJjZUFnZW50OiB0aGlzLnNvdXJjZUFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgdGFyZ2V0QWdlbnQ6IHRoaXMudGFyZ2V0QWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xBcHByb3ZhbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3Rvb2xfYXBwcm92YWxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogRXh0cmFjdCBhbGwgdGV4dCBvdXRwdXQgZnJvbSBhIGxpc3Qgb2YgcnVuIGl0ZW1zIGJ5IGNvbmNhdGVuYXRpbmcgdGhlIGNvbnRlbnQgb2YgYWxsXG4gKiBtZXNzYWdlIG91dHB1dCBpdGVtcy5cbiAqXG4gKiBAcGFyYW0gaXRlbXMgLSBUaGUgbGlzdCBvZiBydW4gaXRlbXMgdG8gZXh0cmFjdCB0ZXh0IGZyb20uXG4gKiBAcmV0dXJucyBBIHN0cmluZyBvZiBhbGwgdGhlIHRleHQgb3V0cHV0IGZyb20gdGhlIHJ1biBpdGVtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RBbGxUZXh0T3V0cHV0KGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLmNvbnRlbnQpXG4gICAgICAgIC5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW1zLm1qcy5tYXAiLCIvKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gdGhlIG91dHB1dCBtZXNzYWdlLlxuICogQHBhcmFtIG91dHB1dE1lc3NhZ2VcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG91dHB1dE1lc3NhZ2UpIHtcbiAgICBpZiAob3V0cHV0TWVzc2FnZS50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKG91dHB1dE1lc3NhZ2Uucm9sZSAhPT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbGFzdEl0ZW0gPSBvdXRwdXRNZXNzYWdlLmNvbnRlbnRbb3V0cHV0TWVzc2FnZS5jb250ZW50Lmxlbmd0aCAtIDFdO1xuICAgIGlmIChsYXN0SXRlbS50eXBlICE9PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBsYXN0SXRlbS50ZXh0O1xufVxuLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIHRoZSBvdXRwdXQgbWVzc2FnZS5cbiAqIEBwYXJhbSBvdXRwdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPdXRwdXRUZXh0KG91dHB1dCkge1xuICAgIGlmIChvdXRwdXQub3V0cHV0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiAoZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZShvdXRwdXQub3V0cHV0W291dHB1dC5vdXRwdXQubGVuZ3RoIC0gMV0pIHx8ICcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lc3NhZ2VzLm1qcy5tYXAiLCIvKipcbiAqIFN0cmVhbWluZyBldmVudCBmcm9tIHRoZSBMTE0uIFRoZXNlIGFyZSBgcmF3YCBldmVudHMsIGkuZS4gdGhleSBhcmUgZGlyZWN0bHkgcGFzc2VkIHRocm91Z2ggZnJvbVxuICogdGhlIExMTS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blJhd01vZGVsU3RyZWFtRXZlbnQge1xuICAgIGRhdGE7XG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIHR5cGUgPSAncmF3X21vZGVsX3N0cmVhbV9ldmVudCc7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRhdGEgVGhlIHJhdyByZXNwb25zZXMgc3RyZWFtIGV2ZW50cyBmcm9tIHRoZSBMTE0uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIH1cbn1cbi8qKlxuICogU3RyZWFtaW5nIGV2ZW50cyB0aGF0IHdyYXAgYSBgUnVuSXRlbWAuIEFzIHRoZSBhZ2VudCBwcm9jZXNzZXMgdGhlIExMTSByZXNwb25zZSwgaXQgd2lsbCBnZW5lcmF0ZVxuICogdGhlc2UgZXZlbnRzIGZyb20gbmV3IG1lc3NhZ2VzLCB0b29sIGNhbGxzLCB0b29sIG91dHB1dHMsIGhhbmRvZmZzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5JdGVtU3RyZWFtRXZlbnQge1xuICAgIG5hbWU7XG4gICAgaXRlbTtcbiAgICB0eXBlID0gJ3J1bl9pdGVtX3N0cmVhbV9ldmVudCc7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSBpdGVtIFRoZSBpdGVtIHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZSwgaXRlbSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLml0ZW0gPSBpdGVtO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgdGhhdCBub3RpZmllcyB0aGF0IHRoZXJlIGlzIGEgbmV3IGFnZW50IHJ1bm5pbmcuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCB7XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdhZ2VudF91cGRhdGVkX3N0cmVhbV9ldmVudCc7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGFnZW50IFRoZSBuZXcgYWdlbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnRzLm1qcy5tYXAiLCJpbXBvcnQgeyBNb2RlbEJlaGF2aW9yRXJyb3IsIFRvb2xDYWxsRXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGdldFRyYW5zZmVyTWVzc2FnZSB9IGZyb20gXCIuL2hhbmRvZmYubWpzXCI7XG5pbXBvcnQgeyBSdW5IYW5kb2ZmQ2FsbEl0ZW0sIFJ1bkhhbmRvZmZPdXRwdXRJdGVtLCBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuUmVhc29uaW5nSXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgUnVuVG9vbENhbGxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UgfSBmcm9tIFwiLi91dGlscy9tZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IHdpdGhGdW5jdGlvblNwYW4sIHdpdGhIYW5kb2ZmU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvY3JlYXRlU3BhbnMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuL3V0aWxzL3NhZmVFeGVjdXRlLm1qc1wiO1xuaW1wb3J0IHsgYWRkRXJyb3JUb0N1cnJlbnRTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuSXRlbVN0cmVhbUV2ZW50IH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbmltcG9ydCB7IHRvU21hcnRTdHJpbmcgfSBmcm9tIFwiLi91dGlscy9zbWFydFN0cmluZy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvaW5kZXgubWpzXCI7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc01vZGVsUmVzcG9uc2UobW9kZWxSZXNwb25zZSwgYWdlbnQsIHRvb2xzLCBoYW5kb2Zmcykge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgY29uc3QgcnVuSGFuZG9mZnMgPSBbXTtcbiAgICBjb25zdCBydW5GdW5jdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5Db21wdXRlckFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCB0b29sc1VzZWQgPSBbXTtcbiAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChoYW5kb2Zmcy5tYXAoKGgpID0+IFtoLnRvb2xOYW1lLCBoXSkpO1xuICAgIGNvbnN0IGZ1bmN0aW9uTWFwID0gbmV3IE1hcCh0b29scy5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2Z1bmN0aW9uJykubWFwKCh0KSA9PiBbdC5uYW1lLCB0XSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2NvbXB1dGVyJyk7XG4gICAgZm9yIChjb25zdCBvdXRwdXQgb2YgbW9kZWxSZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGlmIChvdXRwdXQucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5NZXNzYWdlT3V0cHV0SXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHRvb2xzVXNlZC5wdXNoKG91dHB1dC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ3JlYXNvbmluZycpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blJlYXNvbmluZ0l0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnY29tcHV0ZXJfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB0b29sc1VzZWQucHVzaCgnY29tcHV0ZXJfdXNlJyk7XG4gICAgICAgICAgICBpZiAoIWNvbXB1dGVyVG9vbCkge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNb2RlbCBwcm9kdWNlZCBjb21wdXRlciBhY3Rpb24gd2l0aG91dCBhIGNvbXB1dGVyIHRvb2wuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBwcm9kdWNlZCBjb21wdXRlciBhY3Rpb24gd2l0aG91dCBhIGNvbXB1dGVyIHRvb2wuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBydW5Db21wdXRlckFjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBjb21wdXRlcjogY29tcHV0ZXJUb29sLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRvb2xzVXNlZC5wdXNoKG91dHB1dC5uYW1lKTtcbiAgICAgICAgY29uc3QgaGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KG91dHB1dC5uYW1lKTtcbiAgICAgICAgaWYgKGhhbmRvZmYpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bkhhbmRvZmZDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICBydW5IYW5kb2Zmcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIGhhbmRvZmY6IGhhbmRvZmYsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgICAgICBpZiAoIWZ1bmN0aW9uVG9vbCkge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogb3V0cHV0Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHtvdXRwdXQubmFtZX0gbm90IGZvdW5kIGluIGFnZW50ICR7YWdlbnQubmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuRnVuY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgdG9vbDogZnVuY3Rpb25Ub29sLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmV3SXRlbXM6IGl0ZW1zLFxuICAgICAgICBoYW5kb2ZmczogcnVuSGFuZG9mZnMsXG4gICAgICAgIGZ1bmN0aW9uczogcnVuRnVuY3Rpb25zLFxuICAgICAgICBjb21wdXRlckFjdGlvbnM6IHJ1bkNvbXB1dGVyQWN0aW9ucyxcbiAgICAgICAgdG9vbHNVc2VkOiB0b29sc1VzZWQsXG4gICAgfTtcbn1cbmV4cG9ydCBjb25zdCBuZXh0U3RlcFNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfaGFuZG9mZicpLFxuICAgICAgICBuZXdBZ2VudDogei5hbnkoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpLFxuICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9ydW5fYWdhaW4nKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpLFxuICAgICAgICBkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICB9KSxcbl0pO1xuY2xhc3MgU2luZ2xlU3RlcFJlc3VsdCB7XG4gICAgb3JpZ2luYWxJbnB1dDtcbiAgICBtb2RlbFJlc3BvbnNlO1xuICAgIHByZVN0ZXBJdGVtcztcbiAgICBuZXdTdGVwSXRlbXM7XG4gICAgbmV4dFN0ZXA7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGlucHV0IGl0ZW1zIGkuZS4gdGhlIGl0ZW1zIGJlZm9yZSBydW4oKSB3YXMgY2FsbGVkLiBNYXkgYmUgbXV0ZWQgYnkgaGFuZG9mZiBpbnB1dCBmaWx0ZXJzXG4gICAgICovXG4gICAgb3JpZ2luYWxJbnB1dCwgXG4gICAgLyoqXG4gICAgICogVGhlIG1vZGVsIHJlc3BvbnNlIGZvciB0aGUgY3VycmVudCBzdGVwXG4gICAgICovXG4gICAgbW9kZWxSZXNwb25zZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGl0ZW1zIGJlZm9yZSB0aGUgY3VycmVudCBzdGVwIHdhcyBleGVjdXRlZFxuICAgICAqL1xuICAgIHByZVN0ZXBJdGVtcywgXG4gICAgLyoqXG4gICAgICogVGhlIGl0ZW1zIGFmdGVyIHRoZSBjdXJyZW50IHN0ZXAgd2FzIGV4ZWN1dGVkXG4gICAgICovXG4gICAgbmV3U3RlcEl0ZW1zLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbmV4dCBzdGVwIHRvIGV4ZWN1dGVcbiAgICAgKi9cbiAgICBuZXh0U3RlcCkge1xuICAgICAgICB0aGlzLm9yaWdpbmFsSW5wdXQgPSBvcmlnaW5hbElucHV0O1xuICAgICAgICB0aGlzLm1vZGVsUmVzcG9uc2UgPSBtb2RlbFJlc3BvbnNlO1xuICAgICAgICB0aGlzLnByZVN0ZXBJdGVtcyA9IHByZVN0ZXBJdGVtcztcbiAgICAgICAgdGhpcy5uZXdTdGVwSXRlbXMgPSBuZXdTdGVwSXRlbXM7XG4gICAgICAgIHRoaXMubmV4dFN0ZXAgPSBuZXh0U3RlcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1biAoaS5lLiBldmVyeXRoaW5nIGdlbmVyYXRlZCBhZnRlciBvcmlnaW5hbElucHV0KVxuICAgICAqL1xuICAgIGdldCBnZW5lcmF0ZWRJdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJlU3RlcEl0ZW1zLmNvbmNhdCh0aGlzLm5ld1N0ZXBJdGVtcyk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUmVzZXRUb29sQ2hvaWNlKGFnZW50LCB0b29sVXNlVHJhY2tlciwgbW9kZWxTZXR0aW5ncykge1xuICAgIGlmIChhZ2VudC5yZXNldFRvb2xDaG9pY2UgJiYgdG9vbFVzZVRyYWNrZXIuaGFzVXNlZFRvb2xzKGFnZW50KSkge1xuICAgICAgICByZXR1cm4geyAuLi5tb2RlbFNldHRpbmdzLCB0b29sQ2hvaWNlOiB1bmRlZmluZWQgfTtcbiAgICB9XG4gICAgcmV0dXJuIG1vZGVsU2V0dGluZ3M7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cyhhZ2VudCwgb3JpZ2luYWxJbnB1dCwgb3JpZ2luYWxQcmVTdGVwSXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZSwgcnVubmVyLCBzdGF0ZSkge1xuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSk7XG4gICAgfSk7XG4gICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0cyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtO1xuICAgIH0pXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW0ucmF3SXRlbS5jYWxsSWQ7XG4gICAgfSk7XG4gICAgY29uc3QgZnVuY3Rpb25Ub29sUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gYXBwcm92YWxSZXF1ZXN0cy5pbmNsdWRlcyhydW4udG9vbENhbGwuY2FsbElkKTtcbiAgICB9KTtcbiAgICBjb25zdCBmdW5jdGlvblJlc3VsdHMgPSBhd2FpdCBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIGZ1bmN0aW9uVG9vbFJ1bnMsIHJ1bm5lciwgc3RhdGUpO1xuICAgIGNvbnN0IG5ld0l0ZW1zID0gZnVuY3Rpb25SZXN1bHRzLm1hcCgocikgPT4gci5ydW5JdGVtKTtcbiAgICBjb25zdCBjaGVja1Rvb2xPdXRwdXQgPSBhd2FpdCBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCBmdW5jdGlvblJlc3VsdHMsIHN0YXRlKTtcbiAgICBpZiAoY2hlY2tUb29sT3V0cHV0LmlzRmluYWxPdXRwdXQpIHtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0KTtcbiAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGVja1Rvb2xPdXRwdXQuaXNJbnRlcnJ1cHRlZCkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zOiBjaGVja1Rvb2xPdXRwdXQuaW50ZXJydXB0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyB3ZSBvbmx5IHJhbiBuZXcgdG9vbHMgYW5kIHNpZGUgZWZmZWN0cy4gV2UgbmVlZCB0byBydW4gdGhlIHJlc3Qgb2YgdGhlIGFnZW50XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cyhhZ2VudCwgb3JpZ2luYWxJbnB1dCwgb3JpZ2luYWxQcmVTdGVwSXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZSwgcnVubmVyLCBzdGF0ZSkge1xuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zO1xuICAgIGxldCBuZXdJdGVtcyA9IHByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zO1xuICAgIGNvbnN0IFtmdW5jdGlvblJlc3VsdHMsIGNvbXB1dGVyUmVzdWx0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zLCBydW5uZXIsIHN0YXRlKSxcbiAgICAgICAgZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICBdKTtcbiAgICBuZXdJdGVtcyA9IG5ld0l0ZW1zLmNvbmNhdChmdW5jdGlvblJlc3VsdHMubWFwKChyKSA9PiByLnJ1bkl0ZW0pKTtcbiAgICBuZXdJdGVtcyA9IG5ld0l0ZW1zLmNvbmNhdChjb21wdXRlclJlc3VsdHMpO1xuICAgIC8vIHByb2Nlc3MgaGFuZG9mZnNcbiAgICBpZiAocHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUhhbmRvZmZDYWxscyhhZ2VudCwgb3JpZ2luYWxJbnB1dCwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgbmV3UmVzcG9uc2UsIHByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KTtcbiAgICB9XG4gICAgY29uc3QgY2hlY2tUb29sT3V0cHV0ID0gYXdhaXQgY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyhhZ2VudCwgZnVuY3Rpb25SZXN1bHRzLCBzdGF0ZSk7XG4gICAgaWYgKGNoZWNrVG9vbE91dHB1dC5pc0ZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQpO1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyxcbiAgICAgICAgICAgIG91dHB1dDogY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2hlY2tUb29sT3V0cHV0LmlzSW50ZXJydXB0ZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW50ZXJydXB0aW9uczogY2hlY2tUb29sT3V0cHV0LmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gY2hlY2sgaWYgdGhlIGFnZW50IHByb2R1Y2VkIGFueSBtZXNzYWdlc1xuICAgIGNvbnN0IG1lc3NhZ2VJdGVtcyA9IG5ld0l0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKTtcbiAgICAvLyB3ZSB3aWxsIHVzZSB0aGUgbGFzdCBjb250ZW50IG91dHB1dCBhcyB0aGUgZmluYWwgb3V0cHV0XG4gICAgY29uc3QgcG90ZW50aWFsRmluYWxPdXRwdXQgPSBtZXNzYWdlSXRlbXMubGVuZ3RoID4gMFxuICAgICAgICA/IGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UobWVzc2FnZUl0ZW1zW21lc3NhZ2VJdGVtcy5sZW5ndGggLSAxXS5yYXdJdGVtKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAvLyBpZiB0aGVyZSBpcyBubyBvdXRwdXQgd2UganVzdCBydW4gYWdhaW5cbiAgICBpZiAoIXBvdGVudGlhbEZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIGlmIChhZ2VudC5vdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsXG4gICAgICAgICAgICBvdXRwdXQ6IHBvdGVudGlhbEZpbmFsT3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHsgcGFyc2VyIH0gPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGFnZW50Lm91dHB1dFR5cGUsICdmaW5hbF9vdXRwdXQnKTtcbiAgICAgICAgY29uc3QgW2Vycm9yXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihwb3RlbnRpYWxGaW5hbE91dHB1dCkpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgb3V0cHV0IHR5cGUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSW52YWxpZCBvdXRwdXQgdHlwZScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQgfSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xDYWxsLCBvdXRwdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9yZXN1bHQnLFxuICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0ZXh0OiB0b1NtYXJ0U3RyaW5nKG91dHB1dCksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIHRvb2xSdW5zLCBydW5uZXIsIHN0YXRlKSB7XG4gICAgYXN5bmMgZnVuY3Rpb24gcnVuU2luZ2xlVG9vbCh0b29sUnVuKSB7XG4gICAgICAgIGxldCBwYXJzZWRBcmdzID0gdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgIGlmICh0b29sUnVuLnRvb2wucGFyYW1ldGVycykge1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSB0b29sUnVuLnRvb2wucGFyYW1ldGVycy5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBKU09OLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSBhd2FpdCB0b29sUnVuLnRvb2wubmVlZHNBcHByb3ZhbChzdGF0ZS5fY29udGV4dCwgcGFyc2VkQXJncywgdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAobmVlZHNBcHByb3ZhbCkge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWwgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2l0aEZ1bmN0aW9uU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9uYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYFRvb2wgZXhlY3V0aW9uIGZvciAke3Rvb2xSdW4udG9vbENhbGwuY2FsbElkfSB3YXMgbWFudWFsbHkgcmVqZWN0ZWQgYnkgdXNlci5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEub3V0cHV0ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCByZXNwb25zZSksIGFnZW50LCByZXNwb25zZSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgYWdlbnQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpdGhGdW5jdGlvblNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uZXIuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLmlucHV0ID0gdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wpO1xuICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b29sUnVuLnRvb2wuaW52b2tlKHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBkYXRhIGZvciB0cmFjaW5nIGFuZCBldmVudCBlbWl0dGVyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nUmVzdWx0ID0gdG9TbWFydFN0cmluZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQpO1xuICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbCwgc3RyaW5nUmVzdWx0KTtcbiAgICAgICAgICAgICAgICBpZiAocnVubmVyLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEub3V0cHV0ID0gc3RyaW5nUmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbDogdG9vbFJ1bi50b29sLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgcmVzdWx0KSwgYWdlbnQsIHJlc3VsdCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgcnVubmluZyB0b29sJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9uYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHRvb2xSdW5zLm1hcChydW5TaW5nbGVUb29sKSk7XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgVG9vbENhbGxFcnJvcihgRmFpbGVkIHRvIHJ1biBmdW5jdGlvbiB0b29sczogJHtlfWAsIGUsIHN0YXRlKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG4vLyBJbnRlcm5hbCBoZWxwZXI6IGRpc3BhdGNoIGEgY29tcHV0ZXIgYWN0aW9uIGFuZCByZXR1cm4gYSBzY3JlZW5zaG90IChzeW5jL2FzeW5jKVxuYXN5bmMgZnVuY3Rpb24gX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdChjb21wdXRlciwgdG9vbENhbGwpIHtcbiAgICBjb25zdCBhY3Rpb24gPSB0b29sQ2FsbC5hY3Rpb247XG4gICAgbGV0IHNjcmVlbnNob3Q7XG4gICAgLy8gRGlzcGF0Y2ggYmFzZWQgb24gYWN0aW9uIHR5cGUgc3RyaW5nIChhc3N1bWUgYWN0aW9uLnR5cGUgZXhpc3RzKVxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnY2xpY2snOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuY2xpY2soYWN0aW9uLngsIGFjdGlvbi55LCBhY3Rpb24uYnV0dG9uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkb3VibGVfY2xpY2snOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuZG91YmxlQ2xpY2soYWN0aW9uLngsIGFjdGlvbi55KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkcmFnJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmRyYWcoYWN0aW9uLnBhdGgubWFwKChwKSA9PiBbcC54LCBwLnldKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAna2V5cHJlc3MnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIua2V5cHJlc3MoYWN0aW9uLmtleXMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vdmUnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIubW92ZShhY3Rpb24ueCwgYWN0aW9uLnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NjcmVlbnNob3QnOlxuICAgICAgICAgICAgc2NyZWVuc2hvdCA9IGF3YWl0IGNvbXB1dGVyLnNjcmVlbnNob3QoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzY3JvbGwnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuc2Nyb2xsKGFjdGlvbi54LCBhY3Rpb24ueSwgYWN0aW9uLnNjcm9sbF94LCBhY3Rpb24uc2Nyb2xsX3kpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIudHlwZShhY3Rpb24udGV4dCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd2FpdCc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci53YWl0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGFjdGlvbjsgLy8gZW5zdXJlcyB0aGF0IHdlIGhhbmRsZSBldmVyeSBhY3Rpb24gd2Uga25vdyBvZlxuICAgICAgICAgICAgLy8gVW5rbm93biBhY3Rpb24sIGp1c3QgdGFrZSBzY3JlZW5zaG90XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY3JlZW5zaG90ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gc2NyZWVuc2hvdDtcbiAgICB9XG4gICAgLy8gQWx3YXlzIHJldHVybiBzY3JlZW5zaG90IGFzIGJhc2U2NCBzdHJpbmdcbiAgICBpZiAodHlwZW9mIGNvbXB1dGVyLnNjcmVlbnNob3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc2NyZWVuc2hvdCA9IGF3YWl0IGNvbXB1dGVyLnNjcmVlbnNob3QoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzY3JlZW5zaG90ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHNjcmVlbnNob3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb21wdXRlciBkb2VzIG5vdCBpbXBsZW1lbnQgc2NyZWVuc2hvdCgpJyk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCBjb21wdXRlciA9IGFjdGlvbi5jb21wdXRlci5jb21wdXRlcjtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIC8vIEhvb2tzOiBvbl90b29sX3N0YXJ0IChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyKTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgcnVuQ29udGV4dCwgYWN0aW9uLmNvbXB1dGVyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSdW4gdGhlIGFjdGlvbiBhbmQgZ2V0IHNjcmVlbnNob3RcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IF9ydW5Db21wdXRlckFjdGlvbkFuZFNjcmVlbnNob3QoY29tcHV0ZXIsIHRvb2xDYWxsKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBjb21wdXRlciBhY3Rpb246JywgZXJyKTtcbiAgICAgICAgICAgIG91dHB1dCA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIC8vIEhvb2tzOiBvbl90b29sX2VuZCAoZ2xvYmFsICsgYWdlbnQpXG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFnZW50LCBhY3Rpb24uY29tcHV0ZXIsIG91dHB1dCk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhY3Rpb24uY29tcHV0ZXIsIG91dHB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWx3YXlzIHJldHVybiBhIHNjcmVlbnNob3QgYXMgYSBiYXNlNjQgZGF0YSBVUkxcbiAgICAgICAgY29uc3QgaW1hZ2VVcmwgPSBvdXRwdXQgPyBgZGF0YTppbWFnZS9wbmc7YmFzZTY0LCR7b3V0cHV0fWAgOiAnJztcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wdXRlcl9jYWxsX3Jlc3VsdCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIG91dHB1dDogeyB0eXBlOiAnY29tcHV0ZXJfc2NyZWVuc2hvdCcsIGRhdGE6IGltYWdlVXJsIH0sXG4gICAgICAgIH07XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHJhd0l0ZW0sIGFnZW50LCBpbWFnZVVybCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHJ1bkhhbmRvZmZzLCBydW5uZXIsIHJ1bkNvbnRleHQpIHtcbiAgICBuZXdTdGVwSXRlbXMgPSBbLi4ubmV3U3RlcEl0ZW1zXTtcbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdJbmNvcnJlY3RseSBjYWxsZWQgZXhlY3V0ZUhhbmRvZmZDYWxscyB3aXRoIG5vIGhhbmRvZmZzLiBUaGlzIHNob3VsZCBub3QgaGFwcGVuLiBNb3Zpbmcgb24uJyk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBtdWx0aXBsZSBoYW5kb2Zmcy4gSWdub3JpbmcgYWxsIGJ1dCB0aGUgZmlyc3Qgb25lIGJ5IGFkZGluZyByZWplY3QgcmVzcG9uc2VzIGZvciB0aG9zZVxuICAgICAgICBjb25zdCBvdXRwdXRNZXNzYWdlID0gJ011bHRpcGxlIGhhbmRvZmZzIGRldGVjdGVkLCBpZ25vcm5pbmcgdGhpcyBvbmUuJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBydW5IYW5kb2Zmcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbmV3U3RlcEl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0ocnVuSGFuZG9mZnNbaV0udG9vbENhbGwsIG91dHB1dE1lc3NhZ2UpLCBhZ2VudCwgb3V0cHV0TWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFjdHVhbEhhbmRvZmYgPSBydW5IYW5kb2Zmc1swXTtcbiAgICByZXR1cm4gd2l0aEhhbmRvZmZTcGFuKGFzeW5jIChoYW5kb2ZmU3BhbikgPT4ge1xuICAgICAgICBjb25zdCBoYW5kb2ZmID0gYWN0dWFsSGFuZG9mZi5oYW5kb2ZmO1xuICAgICAgICBjb25zdCBuZXdBZ2VudCA9IGF3YWl0IGhhbmRvZmYub25JbnZva2VIYW5kb2ZmKHJ1bkNvbnRleHQsIGFjdHVhbEhhbmRvZmYudG9vbENhbGwuYXJndW1lbnRzKTtcbiAgICAgICAgaGFuZG9mZlNwYW4uc3BhbkRhdGEudG9fYWdlbnQgPSBuZXdBZ2VudC5uYW1lO1xuICAgICAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkQWdlbnRzID0gcnVuSGFuZG9mZnMubWFwKChoKSA9PiBoLmhhbmRvZmYuYWdlbnROYW1lKTtcbiAgICAgICAgICAgIGhhbmRvZmZTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTXVsdGlwbGUgaGFuZG9mZnMgcmVxdWVzdGVkJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZF9hZ2VudHM6IHJlcXVlc3RlZEFnZW50cyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3U3RlcEl0ZW1zLnB1c2gobmV3IFJ1bkhhbmRvZmZPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbShhY3R1YWxIYW5kb2ZmLnRvb2xDYWxsLCBnZXRUcmFuc2Zlck1lc3NhZ2UobmV3QWdlbnQpKSwgYWdlbnQsIG5ld0FnZW50KSk7XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgcnVuQ29udGV4dCwgYWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHJ1bkNvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgY29uc3QgaW5wdXRGaWx0ZXIgPSBoYW5kb2ZmLmlucHV0RmlsdGVyID8/IHJ1bm5lci5jb25maWcuaGFuZG9mZklucHV0RmlsdGVyO1xuICAgICAgICBpZiAoaW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnRmlsdGVyaW5nIGlucHV0cyBmb3IgaGFuZG9mZicpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dEZpbHRlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGhhbmRvZmZTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZmlsdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogJ25vdCBjYWxsYWJsZScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoYW5kb2ZmSW5wdXREYXRhID0ge1xuICAgICAgICAgICAgICAgIGlucHV0SGlzdG9yeTogQXJyYXkuaXNBcnJheShvcmlnaW5hbElucHV0KVxuICAgICAgICAgICAgICAgICAgICA/IFsuLi5vcmlnaW5hbElucHV0XVxuICAgICAgICAgICAgICAgICAgICA6IG9yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgcHJlSGFuZG9mZkl0ZW1zOiBbLi4ucHJlU3RlcEl0ZW1zXSxcbiAgICAgICAgICAgICAgICBuZXdJdGVtczogWy4uLm5ld1N0ZXBJdGVtc10sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBpbnB1dEZpbHRlcihoYW5kb2ZmSW5wdXREYXRhKTtcbiAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQgPSBmaWx0ZXJlZC5pbnB1dEhpc3Rvcnk7XG4gICAgICAgICAgICBwcmVTdGVwSXRlbXMgPSBmaWx0ZXJlZC5wcmVIYW5kb2ZmSXRlbXM7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMgPSBmaWx0ZXJlZC5uZXdJdGVtcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3U3RlcEl0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfaGFuZG9mZicsIG5ld0FnZW50IH0pO1xuICAgIH0sIHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZnJvbV9hZ2VudDogYWdlbnQubmFtZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmNvbnN0IE5PVF9GSU5BTF9PVVRQVVQgPSB7XG4gICAgaXNGaW5hbE91dHB1dDogZmFsc2UsXG4gICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxufTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCB0b29sUmVzdWx0cywgc3RhdGUpIHtcbiAgICBpZiAodG9vbFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCBpbnRlcnJ1cHRpb25zID0gdG9vbFJlc3VsdHNcbiAgICAgICAgLmZpbHRlcigocikgPT4gci5ydW5JdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSlcbiAgICAgICAgLm1hcCgocikgPT4gci5ydW5JdGVtKTtcbiAgICBpZiAoaW50ZXJydXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiBmYWxzZSxcbiAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHRydWUsXG4gICAgICAgICAgICBpbnRlcnJ1cHRpb25zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoYWdlbnQudG9vbFVzZUJlaGF2aW9yID09PSAncnVuX2xsbV9hZ2FpbicpIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGZpcnN0VG9vbFJlc3VsdCA9IHRvb2xSZXN1bHRzWzBdO1xuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdzdG9wX29uX2ZpcnN0X3Rvb2wnKSB7XG4gICAgICAgIGlmIChmaXJzdFRvb2xSZXN1bHQ/LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdPdXRwdXQgPSB0b1NtYXJ0U3RyaW5nKGZpcnN0VG9vbFJlc3VsdC5vdXRwdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmaW5hbE91dHB1dDogc3RyaW5nT3V0cHV0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgdG9vbFVzZUJlaGF2aW9yID0gYWdlbnQudG9vbFVzZUJlaGF2aW9yO1xuICAgIGlmICh0eXBlb2YgdG9vbFVzZUJlaGF2aW9yID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb25zdCBzdG9wcGluZ1Rvb2wgPSB0b29sUmVzdWx0cy5maW5kKChyKSA9PiB0b29sVXNlQmVoYXZpb3Iuc3RvcEF0VG9vbE5hbWVzLmluY2x1ZGVzKHIudG9vbC5uYW1lKSk7XG4gICAgICAgIGlmIChzdG9wcGluZ1Rvb2w/LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdPdXRwdXQgPSB0b1NtYXJ0U3RyaW5nKHN0b3BwaW5nVG9vbC5vdXRwdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmaW5hbE91dHB1dDogc3RyaW5nT3V0cHV0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xVc2VCZWhhdmlvcihzdGF0ZS5fY29udGV4dCwgdG9vbFJlc3VsdHMpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBJbnZhbGlkIHRvb2xVc2VCZWhhdmlvcjogJHt0b29sVXNlQmVoYXZpb3J9YCwgc3RhdGUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHN0ZXApIHtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc3RlcC5uZXdTdGVwSXRlbXMpIHtcbiAgICAgICAgbGV0IGl0ZW1OYW1lO1xuICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICdtZXNzYWdlX291dHB1dF9jcmVhdGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuSGFuZG9mZkNhbGxJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICdoYW5kb2ZmX3JlcXVlc3RlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bkhhbmRvZmZPdXRwdXRJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICdoYW5kb2ZmX29jY3VycmVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbENhbGxJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICd0b29sX2NhbGxlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSkge1xuICAgICAgICAgICAgaXRlbU5hbWUgPSAndG9vbF9vdXRwdXQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5SZWFzb25pbmdJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICdyZWFzb25pbmdfaXRlbV9jcmVhdGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICAgICAgaXRlbU5hbWUgPSAndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1Vua25vd24gaXRlbSB0eXBlOiAnLCBpdGVtKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5fYWRkSXRlbShuZXcgUnVuSXRlbVN0cmVhbUV2ZW50KGl0ZW1OYW1lLCBpdGVtKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFnZW50VG9vbFVzZVRyYWNrZXIge1xuICAgICNhZ2VudFRvVG9vbHMgPSBuZXcgTWFwKCk7XG4gICAgYWRkVG9vbFVzZShhZ2VudCwgdG9vbE5hbWVzKSB7XG4gICAgICAgIHRoaXMuI2FnZW50VG9Ub29scy5zZXQoYWdlbnQsIHRvb2xOYW1lcyk7XG4gICAgfVxuICAgIGhhc1VzZWRUb29scyhhZ2VudCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jYWdlbnRUb1Rvb2xzLmhhcyhhZ2VudCk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhBcnJheS5mcm9tKHRoaXMuI2FnZW50VG9Ub29scy5lbnRyaWVzKCkpLm1hcCgoW2FnZW50LCB0b29sTmFtZXNdKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gW2FnZW50Lm5hbWUsIHRvb2xOYW1lc107XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5JbXBsZW1lbnRhdGlvbi5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbmltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5pbXBvcnQgeyBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgUnVuVG9vbENhbGxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmltcG9ydCB7IEFnZW50VG9vbFVzZVRyYWNrZXIsIG5leHRTdGVwU2NoZW1hLCB9IGZyb20gXCIuL3J1bkltcGxlbWVudGF0aW9uLm1qc1wiO1xuaW1wb3J0IHsgU3lzdGVtRXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi90cmFjaW5nL3Byb3ZpZGVyLm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRUcmFjZSB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGhhbmRvZmYgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG5pbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuL3V0aWxzL3NhZmVFeGVjdXRlLm1qc1wiO1xuLyoqXG4gKiBUaGUgc2NoZW1hIHZlcnNpb24gb2YgdGhlIHNlcmlhbGl6ZWQgcnVuIHN0YXRlLiBUaGlzIGlzIHVzZWQgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcmlhbGl6ZWRcbiAqIHJ1biBzdGF0ZSBpcyBjb21wYXRpYmxlIHdpdGggdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiB0aGUgU0RLLlxuICogSWYgYW55dGhpbmcgaW4gdGhpcyBzY2hlbWEgY2hhbmdlcywgdGhlIHZlcnNpb24gd2lsbCBoYXZlIHRvIGJlIGluY3JlbWVudGVkLlxuICovXG5leHBvcnQgY29uc3QgQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTiA9ICcxLjAnO1xuY29uc3QgJHNjaGVtYVZlcnNpb24gPSB6LmxpdGVyYWwoQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTik7XG5jb25zdCBzZXJpYWxpemVkQWdlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKSxcbn0pO1xuY29uc3Qgc2VyaWFsaXplZFNwYW5CYXNlID0gei5vYmplY3Qoe1xuICAgIG9iamVjdDogei5saXRlcmFsKCd0cmFjZS5zcGFuJyksXG4gICAgaWQ6IHouc3RyaW5nKCksXG4gICAgdHJhY2VfaWQ6IHouc3RyaW5nKCksXG4gICAgcGFyZW50X2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgc3RhcnRlZF9hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVuZGVkX2F0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgZXJyb3I6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIG1lc3NhZ2U6IHouc3RyaW5nKCksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG4gICAgfSlcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgc3Bhbl9kYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbn0pO1xuY29uc3QgU2VyaWFsaXplZFNwYW4gPSBzZXJpYWxpemVkU3BhbkJhc2UuZXh0ZW5kKHtcbiAgICBwcmV2aW91c19zcGFuOiB6LmxhenkoKCkgPT4gU2VyaWFsaXplZFNwYW4pLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IHVzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbn0pO1xuY29uc3QgbW9kZWxSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB1c2FnZTogdXNhZ2VTY2hlbWEsXG4gICAgb3V0cHV0OiB6LmFycmF5KHByb3RvY29sLk91dHB1dE1vZGVsSXRlbSksXG4gICAgcmVzcG9uc2VJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBpdGVtU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfY2FsbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLlRvb2xDYWxsSXRlbS5vcihwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0pLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmdfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5SZWFzb25pbmdJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX2NhbGxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgICAgIHNvdXJjZUFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIHRhcmdldEFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfYXBwcm92YWxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuXSk7XG5jb25zdCBzZXJpYWxpemVkVHJhY2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3RyYWNlJyksXG4gICAgaWQ6IHouc3RyaW5nKCksXG4gICAgd29ya2Zsb3dfbmFtZTogei5zdHJpbmcoKSxcbiAgICBncm91cF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIG1ldGFkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbn0pO1xuY29uc3Qgc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5ld0l0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIHRvb2xzVXNlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICBoYW5kb2Zmczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBoYW5kb2ZmOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBmdW5jdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgdG9vbDogei5hbnkoKSxcbiAgICB9KSksXG4gICAgY29tcHV0ZXJBY3Rpb25zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIGNvbXB1dGVyOiB6LmFueSgpLFxuICAgIH0pKSxcbn0pO1xuY29uc3QgZ3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHJpcHdpcmVUcmlnZ2VyZWQ6IHouYm9vbGVhbigpLFxuICAgIG91dHB1dEluZm86IHouYW55KCksXG59KTtcbmNvbnN0IGlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgb3V0cHV0OiBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSxcbn0pO1xuY29uc3Qgb3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dCcpLFxuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIGFnZW50T3V0cHV0OiB6LmFueSgpLFxuICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgb3V0cHV0OiBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IFNlcmlhbGl6ZWRSdW5TdGF0ZSA9IHoub2JqZWN0KHtcbiAgICAkc2NoZW1hVmVyc2lvbixcbiAgICBjdXJyZW50VHVybjogei5udW1iZXIoKSxcbiAgICBjdXJyZW50QWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvcmlnaW5hbElucHV0OiB6LnN0cmluZygpLm9yKHouYXJyYXkocHJvdG9jb2wuTW9kZWxJdGVtKSksXG4gICAgbW9kZWxSZXNwb25zZXM6IHouYXJyYXkobW9kZWxSZXNwb25zZVNjaGVtYSksXG4gICAgY29udGV4dDogei5vYmplY3Qoe1xuICAgICAgICB1c2FnZTogdXNhZ2VTY2hlbWEsXG4gICAgICAgIGFwcHJvdmFsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5vYmplY3Qoe1xuICAgICAgICAgICAgYXBwcm92ZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3Ioei5ib29sZWFuKCkpLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3Ioei5ib29sZWFuKCkpLFxuICAgICAgICB9KSksXG4gICAgICAgIGNvbnRleHQ6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuICAgIHRvb2xVc2VUcmFja2VyOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFycmF5KHouc3RyaW5nKCkpKSxcbiAgICBtYXhUdXJuczogei5udW1iZXIoKSxcbiAgICBjdXJyZW50QWdlbnRTcGFuOiBTZXJpYWxpemVkU3Bhbi5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgbm9BY3RpdmVBZ2VudFJ1bjogei5ib29sZWFuKCksXG4gICAgaW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB6LmFycmF5KGlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzOiB6LmFycmF5KG91dHB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSksXG4gICAgY3VycmVudFN0ZXA6IG5leHRTdGVwU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgbGFzdE1vZGVsUmVzcG9uc2U6IG1vZGVsUmVzcG9uc2VTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBnZW5lcmF0ZWRJdGVtczogei5hcnJheShpdGVtU2NoZW1hKSxcbiAgICBsYXN0UHJvY2Vzc2VkUmVzcG9uc2U6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIHRyYWNlOiBzZXJpYWxpemVkVHJhY2VTY2hlbWEubnVsbGFibGUoKSxcbn0pO1xuLyoqXG4gKiBTZXJpYWxpemFibGUgc25hcHNob3Qgb2YgYW4gYWdlbnQncyBydW4sIGluY2x1ZGluZyBjb250ZXh0LCB1c2FnZSBhbmQgdHJhY2UuXG4gKiBXaGlsZSB0aGlzIGNsYXNzIGhhcyBwdWJsaWNseSB3cml0YWJsZSBwcm9wZXJ0aWVzIChwcmVmaXhlZCB3aXRoIGBfYCksIHRoZXkgYXJlIG5vdCBtZWFudCB0byBiZVxuICogdXNlZCBkaXJlY3RseS4gVG8gcmVhZCB0aGVzZSBwcm9wZXJ0aWVzLCB1c2UgdGhlIGBSdW5SZXN1bHRgIGluc3RlYWQuXG4gKlxuICogTWFuaXB1bGF0aW9uIG9mIHRoZSBzdGF0ZSBkaXJlY3RseSBjYW4gbGVhZCB0byB1bmV4cGVjdGVkIGJlaGF2aW9yIGFuZCBzaG91bGQgYmUgYXZvaWRlZC5cbiAqIEluc3RlYWQsIHVzZSB0aGUgYGFwcHJvdmVgIGFuZCBgcmVqZWN0YCBtZXRob2RzIHRvIGludGVyYWN0IHdpdGggdGhlIHN0YXRlLlxuICovXG5leHBvcnQgY2xhc3MgUnVuU3RhdGUge1xuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgdHVybiBudW1iZXIgaW4gdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBfY3VycmVudFR1cm4gPSAwO1xuICAgIC8qKlxuICAgICAqIFRoZSBhZ2VudCBjdXJyZW50bHkgaGFuZGxpbmcgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBfY3VycmVudEFnZW50O1xuICAgIC8qKlxuICAgICAqIE9yaWdpbmFsIHVzZXIgaW5wdXQgcHJpb3IgdG8gYW55IHByb2Nlc3NpbmcuXG4gICAgICovXG4gICAgX29yaWdpbmFsSW5wdXQ7XG4gICAgLyoqXG4gICAgICogUmVzcG9uc2VzIGZyb20gdGhlIG1vZGVsIHNvIGZhci5cbiAgICAgKi9cbiAgICBfbW9kZWxSZXNwb25zZXM7XG4gICAgLyoqXG4gICAgICogQWN0aXZlIHRyYWNpbmcgc3BhbiBmb3IgdGhlIGN1cnJlbnQgYWdlbnQgaWYgdHJhY2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIF9jdXJyZW50QWdlbnRTcGFuO1xuICAgIC8qKlxuICAgICAqIFJ1biBjb250ZXh0IHRyYWNraW5nIGFwcHJvdmFscywgdXNhZ2UsIGFuZCBvdGhlciBtZXRhZGF0YS5cbiAgICAgKi9cbiAgICBfY29udGV4dDtcbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hhdCB0b29scyBlYWNoIGFnZW50IGhhcyB1c2VkLlxuICAgICAqL1xuICAgIF90b29sVXNlVHJhY2tlcjtcbiAgICAvKipcbiAgICAgKiBJdGVtcyBnZW5lcmF0ZWQgYnkgdGhlIGFnZW50IGR1cmluZyB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9nZW5lcmF0ZWRJdGVtcztcbiAgICAvKipcbiAgICAgKiBNYXhpbXVtIGFsbG93ZWQgdHVybnMgYmVmb3JlIGZvcmNpbmcgdGVybWluYXRpb24uXG4gICAgICovXG4gICAgX21heFR1cm5zO1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHJ1biBoYXMgYW4gYWN0aXZlIGFnZW50IHN0ZXAgaW4gcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIExhc3QgbW9kZWwgcmVzcG9uc2UgZm9yIHRoZSBwcmV2aW91cyB0dXJuLlxuICAgICAqL1xuICAgIF9sYXN0VHVyblJlc3BvbnNlO1xuICAgIC8qKlxuICAgICAqIFJlc3VsdHMgZnJvbSBpbnB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfaW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIC8qKlxuICAgICAqIFJlc3VsdHMgZnJvbSBvdXRwdXQgZ3VhcmRyYWlscyBhcHBsaWVkIHRvIHRoZSBydW4uXG4gICAgICovXG4gICAgX291dHB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogTmV4dCBzdGVwIGNvbXB1dGVkIGZvciB0aGUgYWdlbnQgdG8gdGFrZS5cbiAgICAgKi9cbiAgICBfY3VycmVudFN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogUGFyc2VkIG1vZGVsIHJlc3BvbnNlIGFmdGVyIGFwcGx5aW5nIGd1YXJkcmFpbHMgYW5kIHRvb2xzLlxuICAgICAqL1xuICAgIF9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogVHJhY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcnVuIGlmIHRyYWNpbmcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBfdHJhY2UgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIG9yaWdpbmFsSW5wdXQsIHN0YXJ0aW5nQWdlbnQsIG1heFR1cm5zKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9vcmlnaW5hbElucHV0ID0gc3RydWN0dXJlZENsb25lKG9yaWdpbmFsSW5wdXQpO1xuICAgICAgICB0aGlzLl9tb2RlbFJlc3BvbnNlcyA9IFtdO1xuICAgICAgICB0aGlzLl9jdXJyZW50QWdlbnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9jdXJyZW50QWdlbnQgPSBzdGFydGluZ0FnZW50O1xuICAgICAgICB0aGlzLl90b29sVXNlVHJhY2tlciA9IG5ldyBBZ2VudFRvb2xVc2VUcmFja2VyKCk7XG4gICAgICAgIHRoaXMuX2dlbmVyYXRlZEl0ZW1zID0gW107XG4gICAgICAgIHRoaXMuX21heFR1cm5zID0gbWF4VHVybnM7XG4gICAgICAgIHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMuX3RyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmVzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIGFwcHJvdmUgdGhlIHJlcXVlc3QgdXNlIHRoaXMgbWV0aG9kIGFuZCB0aGVuIHJ1biB0aGUgYWdlbnQgYWdhaW4gd2l0aCB0aGUgc2FtZSBzdGF0ZSBvYmplY3RcbiAgICAgKiB0byBjb250aW51ZSB0aGUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBpdCB3aWxsIG9ubHkgYXBwcm92ZSB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c0FwcHJvdmVgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgYXBwcm92YWwuXG4gICAgICovXG4gICAgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3RzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIHJlamVjdCB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSByZWplY3QgdGhlIGN1cnJlbnQgdG9vbCBjYWxsLiBUbyBhbGxvdyB0aGUgdG9vbCB0byBiZSB1c2VkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhyb3VnaG91dCB0aGUgcnVuLCBzZXQgdGhlIGBhbHdheXNSZWplY3RgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSByZWplY3Rpb24uXG4gICAgICovXG4gICAgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICAkc2NoZW1hVmVyc2lvbjogQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTixcbiAgICAgICAgICAgIGN1cnJlbnRUdXJuOiB0aGlzLl9jdXJyZW50VHVybixcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQ6IHRoaXMuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICBtb2RlbFJlc3BvbnNlczogdGhpcy5fbW9kZWxSZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0czogcmVzcG9uc2UudXNhZ2UucmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogcmVzcG9uc2UudXNhZ2UuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiByZXNwb25zZS51c2FnZS50b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY29udGV4dDogdGhpcy5fY29udGV4dC50b0pTT04oKSxcbiAgICAgICAgICAgIHRvb2xVc2VUcmFja2VyOiB0aGlzLl90b29sVXNlVHJhY2tlci50b0pTT04oKSxcbiAgICAgICAgICAgIG1heFR1cm5zOiB0aGlzLl9tYXhUdXJucyxcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudFNwYW46IHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4/LnRvSlNPTigpLFxuICAgICAgICAgICAgbm9BY3RpdmVBZ2VudFJ1bjogdGhpcy5fbm9BY3RpdmVBZ2VudFJ1bixcbiAgICAgICAgICAgIGlucHV0R3VhcmRyYWlsUmVzdWx0czogdGhpcy5faW5wdXRHdWFyZHJhaWxSZXN1bHRzLFxuICAgICAgICAgICAgb3V0cHV0R3VhcmRyYWlsUmVzdWx0czogdGhpcy5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5tYXAoKHIpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgICAgICBhZ2VudDogci5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwOiB0aGlzLl9jdXJyZW50U3RlcCxcbiAgICAgICAgICAgIGxhc3RNb2RlbFJlc3BvbnNlOiB0aGlzLl9sYXN0VHVyblJlc3BvbnNlLFxuICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHRoaXMuX2dlbmVyYXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS50b0pTT04oKSksXG4gICAgICAgICAgICBsYXN0UHJvY2Vzc2VkUmVzcG9uc2U6IHRoaXMuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSxcbiAgICAgICAgICAgIHRyYWNlOiB0aGlzLl90cmFjZSA/IHRoaXMuX3RyYWNlLnRvSlNPTigpIDogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gcGFyc2luZyB0aGUgc2NoZW1hIHRvIGVuc3VyZSB0aGUgb3V0cHV0IGlzIHZhbGlkIGZvciByZXBhcnNpbmdcbiAgICAgICAgY29uc3QgcGFyc2VkID0gU2VyaWFsaXplZFJ1blN0YXRlLnNhZmVQYXJzZShvdXRwdXQpO1xuICAgICAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3lzdGVtRXJyb3IoYEZhaWxlZCB0byBzZXJpYWxpemUgcnVuIHN0YXRlLiAke3BhcnNlZC5lcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZWQuZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplcyB0aGUgcnVuIHN0YXRlIHRvIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZXJpYWxpemUgdGhlIHJ1biBzdGF0ZSB0byBhIHN0cmluZyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGRlc2VyaWFsaXplIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcgdGhhdCB3YXMgc2VyaWFsaXplZCB1c2luZyB0aGVcbiAgICAgKiBgdG9TdHJpbmdgIG1ldGhvZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZnJvbVN0cmluZyhpbml0aWFsQWdlbnQsIHN0cikge1xuICAgICAgICBjb25zdCBbcGFyc2luZ0Vycm9yLCBqc29uUmVzdWx0XSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IEpTT04ucGFyc2Uoc3RyKSk7XG4gICAgICAgIGlmIChwYXJzaW5nRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBydW4gc3RhdGUuICR7cGFyc2luZ0Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBwYXJzaW5nRXJyb3IubWVzc2FnZSA6IFN0cmluZyhwYXJzaW5nRXJyb3IpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY2hlbWFWZXJzaW9uID0ganNvblJlc3VsdC4kc2NoZW1hVmVyc2lvbjtcbiAgICAgICAgaWYgKCFjdXJyZW50U2NoZW1hVmVyc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignUnVuIHN0YXRlIGlzIG1pc3Npbmcgc2NoZW1hIHZlcnNpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFNjaGVtYVZlcnNpb24gIT09IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFJ1biBzdGF0ZSBzY2hlbWEgdmVyc2lvbiAke2N1cnJlbnRTY2hlbWFWZXJzaW9ufSBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgdXNlIHZlcnNpb24gJHtDVVJSRU5UX1NDSEVNQV9WRVJTSU9OfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlSnNvbiA9IFNlcmlhbGl6ZWRSdW5TdGF0ZS5wYXJzZShKU09OLnBhcnNlKHN0cikpO1xuICAgICAgICBjb25zdCBhZ2VudE1hcCA9IGJ1aWxkQWdlbnRNYXAoaW5pdGlhbEFnZW50KTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gUmVidWlsZCB0aGUgY29udGV4dFxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gbmV3IFJ1bkNvbnRleHQoc3RhdGVKc29uLmNvbnRleHQuY29udGV4dCk7XG4gICAgICAgIGNvbnRleHQuX3JlYnVpbGRBcHByb3ZhbHMoc3RhdGVKc29uLmNvbnRleHQuYXBwcm92YWxzKTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCBhZ2VudCBmcm9tIHRoZSBpbml0aWFsIGFnZW50XG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IGFnZW50TWFwLmdldChzdGF0ZUpzb24uY3VycmVudEFnZW50Lm5hbWUpO1xuICAgICAgICBpZiAoIWN1cnJlbnRBZ2VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQWdlbnQgJHtzdGF0ZUpzb24uY3VycmVudEFnZW50Lm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlID0gbmV3IFJ1blN0YXRlKGNvbnRleHQsICcnLCBjdXJyZW50QWdlbnQsIHN0YXRlSnNvbi5tYXhUdXJucyk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50VHVybiA9IHN0YXRlSnNvbi5jdXJyZW50VHVybjtcbiAgICAgICAgLy8gcmVidWlsZCB0b29sIHVzZSB0cmFja2VyXG4gICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlciA9IG5ldyBBZ2VudFRvb2xVc2VUcmFja2VyKCk7XG4gICAgICAgIGZvciAoY29uc3QgW2FnZW50TmFtZSwgdG9vbE5hbWVzXSBvZiBPYmplY3QuZW50cmllcyhzdGF0ZUpzb24udG9vbFVzZVRyYWNrZXIpKSB7XG4gICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShhZ2VudE1hcC5nZXQoYWdlbnROYW1lKSwgdG9vbE5hbWVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWJ1aWxkIGN1cnJlbnQgYWdlbnQgc3BhblxuICAgICAgICBpZiAoc3RhdGVKc29uLmN1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgIGlmICghc3RhdGVKc29uLnRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNlIGlzIG5vdCBzZXQsIHNraXBwaW5nIHRyYWNpbmcgc2V0dXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgICAgICB0cmFjZUlkOiBzdGF0ZUpzb24udHJhY2U/LmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHN0YXRlSnNvbi50cmFjZT8ud29ya2Zsb3dfbmFtZSxcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdGF0ZUpzb24udHJhY2U/Lmdyb3VwX2lkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogc3RhdGVKc29uLnRyYWNlPy5tZXRhZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHN0YXRlSnNvbi5jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgIHN0YXRlLl90cmFjZSA9IHRyYWNlO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gc3RhdGVKc29uLm5vQWN0aXZlQWdlbnRSdW47XG4gICAgICAgIHN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMgPVxuICAgICAgICAgICAgc3RhdGVKc29uLmlucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAgICAgc3RhdGUuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMgPSBzdGF0ZUpzb24ub3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5tYXAoKHIpID0+ICh7XG4gICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgYWdlbnQ6IGFnZW50TWFwLmdldChyLmFnZW50Lm5hbWUpLFxuICAgICAgICB9KSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlSnNvbi5jdXJyZW50U3RlcDtcbiAgICAgICAgc3RhdGUuX29yaWdpbmFsSW5wdXQgPSBzdGF0ZUpzb24ub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgc3RhdGUuX21vZGVsUmVzcG9uc2VzID0gc3RhdGVKc29uLm1vZGVsUmVzcG9uc2VzLm1hcChkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2UpO1xuICAgICAgICBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IHN0YXRlSnNvbi5sYXN0TW9kZWxSZXNwb25zZVxuICAgICAgICAgICAgPyBkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2Uoc3RhdGVKc29uLmxhc3RNb2RlbFJlc3BvbnNlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHN0YXRlSnNvbi5nZW5lcmF0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGRlc2VyaWFsaXplSXRlbShpdGVtLCBhZ2VudE1hcCkpO1xuICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RQcm9jZXNzZWRSZXNwb25zZVxuICAgICAgICAgICAgPyBhd2FpdCBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZUpzb24ubGFzdFByb2Nlc3NlZFJlc3BvbnNlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzdGF0ZUpzb24uY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLFxuICAgICAgICAgICAgICAgIG5ld0FnZW50OiBhZ2VudE1hcC5nZXQoc3RhdGVKc29uLmN1cnJlbnRTdGVwLm5ld0FnZW50Lm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQWdlbnRNYXAoaW5pdGlhbEFnZW50KSB7XG4gICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHF1ZXVlID0gW2luaXRpYWxBZ2VudF07XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKG1hcC5oYXMoY3VycmVudEFnZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBtYXAuc2V0KGN1cnJlbnRBZ2VudC5uYW1lLCBjdXJyZW50QWdlbnQpO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbmRvZmYgb2YgY3VycmVudEFnZW50LmhhbmRvZmZzKSB7XG4gICAgICAgICAgICBpZiAoaGFuZG9mZiBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoYW5kb2ZmLmFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYuYWdlbnQubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmLmFnZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHNlcmlhbGl6ZWRTcGFuKSB7XG4gICAgY29uc3Qgc3BhbkRhdGEgPSBzZXJpYWxpemVkU3Bhbi5zcGFuX2RhdGE7XG4gICAgY29uc3QgcHJldmlvdXNTcGFuID0gc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhblxuICAgICAgICA/IGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhbilcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc3BhbiA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgc3BhbklkOiBzZXJpYWxpemVkU3Bhbi5pZCxcbiAgICAgICAgdHJhY2VJZDogc2VyaWFsaXplZFNwYW4udHJhY2VfaWQsXG4gICAgICAgIHBhcmVudElkOiBzZXJpYWxpemVkU3Bhbi5wYXJlbnRfaWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBzdGFydGVkQXQ6IHNlcmlhbGl6ZWRTcGFuLnN0YXJ0ZWRfYXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBlbmRlZEF0OiBzZXJpYWxpemVkU3Bhbi5lbmRlZF9hdCA/PyB1bmRlZmluZWQsXG4gICAgICAgIGRhdGE6IHNwYW5EYXRhLFxuICAgIH0sIHRyYWNlKTtcbiAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHByZXZpb3VzU3BhbjtcbiAgICByZXR1cm4gc3Bhbjtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2Uoc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UpIHtcbiAgICBjb25zdCB1c2FnZSA9IG5ldyBVc2FnZSgpO1xuICAgIHVzYWdlLnJlcXVlc3RzID0gc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UudXNhZ2UucmVxdWVzdHM7XG4gICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5pbnB1dFRva2VucztcbiAgICB1c2FnZS5vdXRwdXRUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5vdXRwdXRUb2tlbnM7XG4gICAgdXNhZ2UudG90YWxUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS50b3RhbFRva2VucztcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2FnZSxcbiAgICAgICAgb3V0cHV0OiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5vdXRwdXQubWFwKChpdGVtKSA9PiBwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0ucGFyc2UoaXRlbSkpLFxuICAgICAgICByZXNwb25zZUlkOiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5yZXNwb25zZUlkLFxuICAgIH07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVJdGVtKHNlcmlhbGl6ZWRJdGVtLCBhZ2VudE1hcCkge1xuICAgIHN3aXRjaCAoc2VyaWFsaXplZEl0ZW0udHlwZSkge1xuICAgICAgICBjYXNlICdtZXNzYWdlX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQ2FsbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSwgc2VyaWFsaXplZEl0ZW0ub3V0cHV0KTtcbiAgICAgICAgY2FzZSAncmVhc29uaW5nX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZWFzb25pbmdJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZkNhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uc291cmNlQWdlbnQubmFtZSksIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS50YXJnZXRBZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfYXBwcm92YWxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5hc3luYyBmdW5jdGlvbiBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBjdXJyZW50QWdlbnQsIHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgIGNvbnN0IGFsbFRvb2xzID0gYXdhaXQgY3VycmVudEFnZW50LmdldEFsbFRvb2xzKCk7XG4gICAgY29uc3QgdG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBjb21wdXRlclRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdjb21wdXRlcicpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBuZXcgTWFwKGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeSBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gW2VudHJ5Lm5hbWUsIGhhbmRvZmYoZW50cnkpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2VudHJ5LnRvb2xOYW1lLCBlbnRyeV07XG4gICAgfSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0l0ZW1zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMubWFwKChpdGVtKSA9PiBkZXNlcmlhbGl6ZUl0ZW0oaXRlbSwgYWdlbnRNYXApKSxcbiAgICAgICAgdG9vbHNVc2VkOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkLFxuICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kb2Zmcy5oYXMoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEhhbmRvZmYgJHtoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogaGFuZG9mZi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2Zmcy5nZXQoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBmdW5jdGlvbnM6IGF3YWl0IFByb21pc2UuYWxsKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMubWFwKGFzeW5jIChmdW5jdGlvbkNhbGwpID0+IHtcbiAgICAgICAgICAgIGlmICghdG9vbHMuaGFzKGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVG9vbCAke2Z1bmN0aW9uQ2FsbC50b29sLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogZnVuY3Rpb25DYWxsLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xzLmdldChmdW5jdGlvbkNhbGwudG9vbC5uYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLm1hcCgoY29tcHV0ZXJBY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gY29tcHV0ZXJBY3Rpb24uY29tcHV0ZXIubmFtZTtcbiAgICAgICAgICAgIGlmICghY29tcHV0ZXJUb29scy5oYXModG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQ29tcHV0ZXIgdG9vbCAke3Rvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGNvbXB1dGVyQWN0aW9uLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGNvbXB1dGVyOiBjb21wdXRlclRvb2xzLmdldCh0b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuU3RhdGUubWpzLm1hcCIsImltcG9ydCB7IGRlZmluZUlucHV0R3VhcmRyYWlsLCBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0SGFuZG9mZiB9IGZyb20gXCIuL2hhbmRvZmYubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuUmVzdWx0LCBTdHJlYW1lZFJ1blJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdC5tanNcIjtcbmltcG9ydCB7IFJ1bkhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBzZXJpYWxpemVUb29sLCBzZXJpYWxpemVIYW5kb2ZmIH0gZnJvbSBcIi4vdXRpbHMvc2VyaWFsaXplLm1qc1wiO1xuaW1wb3J0IHsgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IsIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIE1heFR1cm5zRXhjZWVkZWRFcnJvciwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgVXNlckVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGFkZFN0ZXBUb1J1blJlc3VsdCwgZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cywgZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMsIG1heWJlUmVzZXRUb29sQ2hvaWNlLCBwcm9jZXNzTW9kZWxSZXNwb25zZSwgfSBmcm9tIFwiLi9ydW5JbXBsZW1lbnRhdGlvbi5tanNcIjtcbmltcG9ydCB7IGdldE9yQ3JlYXRlVHJhY2UsIHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoTmV3U3BhbkNvbnRleHQsIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBZ2VudFNwYW4sIHdpdGhHdWFyZHJhaWxTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCwgUnVuUmF3TW9kZWxTdHJlYW1FdmVudCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmltcG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIH0gZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmNvbnN0IERFRkFVTFRfTUFYX1RVUk5TID0gMTA7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhY2luZyh0cmFjaW5nRGlzYWJsZWQsIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICBpZiAodHJhY2luZ0Rpc2FibGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAnZW5hYmxlZF93aXRob3V0X2RhdGEnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFR1cm5JbnB1dChvcmlnaW5hbElucHV0LCBnZW5lcmF0ZWRJdGVtcykge1xuICAgIGNvbnN0IHJhd0l0ZW1zID0gZ2VuZXJhdGVkSXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLnJhd0l0ZW0pO1xuICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxJbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgb3JpZ2luYWxJbnB1dCA9IFt7IHR5cGU6ICdtZXNzYWdlJywgcm9sZTogJ3VzZXInLCBjb250ZW50OiBvcmlnaW5hbElucHV0IH1dO1xuICAgIH1cbiAgICByZXR1cm4gWy4uLm9yaWdpbmFsSW5wdXQsIC4uLnJhd0l0ZW1zXTtcbn1cbi8qKlxuICogQSBSdW5uZXIgaXMgcmVzcG9uc2libGUgZm9yIHJ1bm5pbmcgYW4gYWdlbnQgd29ya2Zsb3cuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uZXIgZXh0ZW5kcyBSdW5Ib29rcyB7XG4gICAgY29uZmlnO1xuICAgIGlucHV0R3VhcmRyYWlsRGVmcztcbiAgICBvdXRwdXRHdWFyZHJhaWxEZWZzO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICAgICAgbW9kZWxQcm92aWRlcjogY29uZmlnLm1vZGVsUHJvdmlkZXIgPz8gZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIoKSxcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICBtb2RlbFNldHRpbmdzOiBjb25maWcubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgIGhhbmRvZmZJbnB1dEZpbHRlcjogY29uZmlnLmhhbmRvZmZJbnB1dEZpbHRlcixcbiAgICAgICAgICAgIGlucHV0R3VhcmRyYWlsczogY29uZmlnLmlucHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgIG91dHB1dEd1YXJkcmFpbHM6IGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzLFxuICAgICAgICAgICAgdHJhY2luZ0Rpc2FibGVkOiBjb25maWcudHJhY2luZ0Rpc2FibGVkID8/IGZhbHNlLFxuICAgICAgICAgICAgdHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YTogY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEgPz8gdHJ1ZSxcbiAgICAgICAgICAgIHdvcmtmbG93TmFtZTogY29uZmlnLndvcmtmbG93TmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnLFxuICAgICAgICAgICAgdHJhY2VJZDogY29uZmlnLnRyYWNlSWQsXG4gICAgICAgICAgICBncm91cElkOiBjb25maWcuZ3JvdXBJZCxcbiAgICAgICAgICAgIHRyYWNlTWV0YWRhdGE6IGNvbmZpZy50cmFjZU1ldGFkYXRhLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlucHV0R3VhcmRyYWlsRGVmcyA9IChjb25maWcuaW5wdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lSW5wdXRHdWFyZHJhaWwpO1xuICAgICAgICB0aGlzLm91dHB1dEd1YXJkcmFpbERlZnMgPSAoY29uZmlnLm91dHB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVPdXRwdXRHdWFyZHJhaWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuSW5kaXZpZHVhbE5vblN0cmVhbShzdGFydGluZ0FnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgYSBzYXZlZCBzdGF0ZSB3ZSB1c2UgdGhhdCBvbmUsIG90aGVyd2lzZSB3ZSBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGlucHV0IGluc3RhbmNlb2YgUnVuU3RhdGVcbiAgICAgICAgICAgICAgICA/IGlucHV0XG4gICAgICAgICAgICAgICAgOiBuZXcgUnVuU3RhdGUob3B0aW9ucy5jb250ZXh0IGluc3RhbmNlb2YgUnVuQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29udGV4dFxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBSdW5Db250ZXh0KG9wdGlvbnMuY29udGV4dCksIGlucHV0LCBzdGFydGluZ0FnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGVsID0gc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbCA/PyB0aGlzLmNvbmZpZy5tb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtb2RlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gYXdhaXQgdGhpcy5jb25maWcubW9kZWxQcm92aWRlci5nZXRNb2RlbChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIGN1cnJlbnQgc3RlcCwgd2UgdHJlYXQgdGhpcyBhcyBhIG5ldyBydW5cbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gc3RhdGUuX2N1cnJlbnRTdGVwID8/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ29udGludWluZyBmcm9tIGludGVycnVwdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSB8fCAhc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ05vIG1vZGVsIHJlc3BvbnNlIGZvdW5kIGluIHByZXZpb3VzIHN0YXRlJywgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVJbnRlcnJ1cHRlZFRvb2xzQW5kU2lkZUVmZmVjdHMoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZG9mZnMgPSBzdGF0ZS5fY3VycmVudEFnZW50LmhhbmRvZmZzLm1hcChnZXRIYW5kb2ZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmTmFtZXMgPSBoYW5kb2Zmcy5tYXAoKGgpID0+IGguYWdlbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGNyZWF0ZUFnZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0YXRlLl9jdXJyZW50QWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBoYW5kb2ZmTmFtZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRfdHlwZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRTY2hlbWFOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4oc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldEFsbFRvb2xzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkVG9vbHMgPSB0b29scy5tYXAoKHQpID0+IHNlcmlhbGl6ZVRvb2wodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZEhhbmRvZmZzID0gaGFuZG9mZnMubWFwKChoKSA9PiBzZXJpYWxpemVIYW5kb2ZmKGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNwYW5EYXRhLnRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRUdXJuID4gc3RhdGUuX21heFR1cm5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01heCB0dXJucyBleGNlZWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgbWF4X3R1cm5zOiBzdGF0ZS5fbWF4VHVybnMgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWF4VHVybnNFeGNlZWRlZEVycm9yKGBNYXggdHVybnMgKCR7c3RhdGUuX21heFR1cm5zfSkgZXhjZWVkZWRgLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJ1bm5pbmcgYWdlbnQgJHtzdGF0ZS5fY3VycmVudEFnZW50Lm5hbWV9ICh0dXJuICR7c3RhdGUuX2N1cnJlbnRUdXJufSlgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFR1cm4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5JbnB1dEd1YXJkcmFpbHMoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVybklucHV0ID0gZ2V0VHVybklucHV0KHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGVsU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5jb25maWcubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyA9IG1heWJlUmVzZXRUb29sQ2hvaWNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl90b29sVXNlVHJhY2tlciwgbW9kZWxTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IGF3YWl0IG1vZGVsLmdldFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbnM6IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogdHVybklucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VJZDogb3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sczogc2VyaWFsaXplZFRvb2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGU6IGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dFR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBzZXJpYWxpemVkSGFuZG9mZnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogZ2V0VHJhY2luZyh0aGlzLmNvbmZpZy50cmFjaW5nRGlzYWJsZWQsIHRoaXMuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2Uoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHRvb2xzLCBoYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhzdGF0ZSwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQgPSBzdGF0ZS5fY3VycmVudFN0ZXAubmV3QWdlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBwcm9jZXNzZWQgdGhlIGhhbmRvZmYsIHNvIHdlIG5lZWQgdG8gcnVuIHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJydXB0ZWQuIERvbid0IHJ1biBhbnkgZ3VhcmRyYWlsc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnIpIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBlbmQgdGhlIHNwYW4gaWYgdGhlIHJ1biB3YXMgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyAjcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLmlucHV0R3VhcmRyYWlsRGVmcy5jb25jYXQoc3RhdGUuX2N1cnJlbnRBZ2VudC5pbnB1dEd1YXJkcmFpbHMubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKSk7XG4gICAgICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHN0YXRlLl9vcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGd1YXJkcmFpbHMubWFwKGFzeW5jIChndWFyZHJhaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhHdWFyZHJhaWxTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS50cmlnZ2VyZWQgPSByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBkYXRhOiB7IG5hbWU6IGd1YXJkcmFpbC5uYW1lIH0gfSwgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYElucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJvbGwgYmFjayB0aGUgY3VycmVudCB0dXJuIHRvIGVuYWJsZSByZXJ1bnNcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4tLTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYElucHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI3J1bk91dHB1dEd1YXJkcmFpbHMoc3RhdGUsIG91dHB1dCkge1xuICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dEd1YXJkcmFpbHMubWFwKGRlZmluZU91dHB1dEd1YXJkcmFpbCkpO1xuICAgICAgICBpZiAoZ3VhcmRyYWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBhZ2VudE91dHB1dCA9IHN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KG91dHB1dCk7XG4gICAgICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgICAgIGFnZW50OiBzdGF0ZS5fY3VycmVudEFnZW50LFxuICAgICAgICAgICAgICAgIGFnZW50T3V0cHV0LFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGd1YXJkcmFpbHMubWFwKGFzeW5jIChndWFyZHJhaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhHdWFyZHJhaWxTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS50cmlnZ2VyZWQgPSByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBkYXRhOiB7IG5hbWU6IGd1YXJkcmFpbC5uYW1lIH0gfSwgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBPdXRwdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8pfWAsIHJlc3VsdCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvcihgT3V0cHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZzID0gY3VycmVudEFnZW50LmhhbmRvZmZzLm1hcChnZXRIYW5kb2ZmKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29scyA9IGF3YWl0IGN1cnJlbnRBZ2VudC5nZXRBbGxUb29scygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRUb29scyA9IHRvb2xzLm1hcCgodCkgPT4gc2VyaWFsaXplVG9vbCh0KSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZEhhbmRvZmZzID0gaGFuZG9mZnMubWFwKChoKSA9PiBzZXJpYWxpemVIYW5kb2ZmKGgpKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFyZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignTm8gbW9kZWwgcmVzcG9uc2UgZm91bmQgaW4gcHJldmlvdXMgc3RhdGUnLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCBleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHR1cm5SZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmTmFtZXMgPSBoYW5kb2Zmcy5tYXAoKGgpID0+IGguYWdlbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGNyZWF0ZUFnZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50QWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IGhhbmRvZmZOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0X3R5cGU6IGN1cnJlbnRBZ2VudC5vdXRwdXRTY2hlbWFOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4ocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID4gcmVzdWx0LnN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01heCB0dXJucyBleGNlZWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtYXhfdHVybnM6IHJlc3VsdC5zdGF0ZS5fbWF4VHVybnMgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3Jlc3VsdC5zdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7Y3VycmVudEFnZW50Lm5hbWV9ICh0dXJuICR7cmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbCA9IGN1cnJlbnRBZ2VudC5tb2RlbCA/PyB0aGlzLmNvbmZpZy5tb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtb2RlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gYXdhaXQgdGhpcy5jb25maWcubW9kZWxQcm92aWRlci5nZXRNb2RlbChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI3J1bklucHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbFNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5jb25maWcubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRpbmdzID0gbWF5YmVSZXNldFRvb2xDaG9pY2UoY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX3Rvb2xVc2VUcmFja2VyLCBtb2RlbFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVybklucHV0ID0gZ2V0VHVybklucHV0KHJlc3VsdC5pbnB1dCwgcmVzdWx0Lm5ld0l0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCBjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHJlc3VsdC5zdGF0ZS5fY29udGV4dCwgY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxSZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBtb2RlbC5nZXRTdHJlYW1lZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogYXdhaXQgY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdChyZXN1bHQuc3RhdGUuX2NvbnRleHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHR1cm5JbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VJZDogb3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBzZXJpYWxpemVkSGFuZG9mZnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoY3VycmVudEFnZW50Lm91dHB1dFR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogZ2V0VHJhY2luZyh0aGlzLmNvbmZpZy50cmFjaW5nRGlzYWJsZWQsIHRoaXMuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpLFxuICAgICAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdyZXNwb25zZV9kb25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQucGFyc2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlOiBuZXcgVXNhZ2UocGFyc2VkLnJlc3BvbnNlLnVzYWdlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBwYXJzZWQucmVzcG9uc2Uub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2UuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgdXNlcidzIGNvZGUgZXhpdHMgYSBsb29wIHRvIGNvbnN1bWUgdGhlIHN0cmVhbSwgd2UgbmVlZCB0byBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgbG9vcCB0byBwcmV2ZW50IGludGVybmFsIGZhbHNlIGVycm9ycyBhbmQgdW5uZWNlc3NhcnkgcHJvY2Vzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5fYWRkSXRlbShuZXcgUnVuUmF3TW9kZWxTdHJlYW1FdmVudChldmVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbmFsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ01vZGVsIGRpZCBub3QgcHJvY3VkZSBhIGZpbmFsIHJlc3BvbnNlIScsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gZmluYWxSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9tb2RlbFJlc3BvbnNlcy5wdXNoKHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2UocmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBjdXJyZW50QWdlbnQsIHRvb2xzLCBoYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCBleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cyhjdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCwgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSwgdGhpcywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgdHVyblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShjdXJyZW50QWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUsIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgZG9uZSBmb3Igbm93LiBEb24ndCBydW4gYW55IG91dHB1dCBndWFyZHJhaWxzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2hhbmRvZmYnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50ID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcFxuICAgICAgICAgICAgICAgICAgICAgICAgPy5uZXdBZ2VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudChjdXJyZW50QWdlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UndmUgcHJvY2Vzc2VkIHRoZSBoYW5kb2ZmLCBzbyB3ZSBuZWVkIHRvIHJ1biB0aGUgbG9vcCBhZ2FpblxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBvciByZXVzZSBleGlzdGluZyBzdGF0ZVxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlXG4gICAgICAgICAgICAgICAgPyBpbnB1dFxuICAgICAgICAgICAgICAgIDogbmV3IFJ1blN0YXRlKG9wdGlvbnMuY29udGV4dCBpbnN0YW5jZW9mIFJ1bkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUnVuQ29udGV4dChvcHRpb25zLmNvbnRleHQpLCBpbnB1dCwgYWdlbnQsIG9wdGlvbnMubWF4VHVybnMgPz8gREVGQVVMVF9NQVhfVFVSTlMpO1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgc3RyZWFtZWQgcmVzdWx0IHdpdGggZXhpc3Rpbmcgc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTdHJlYW1lZFJ1blJlc3VsdCh7XG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU2V0dXAgZGVmYXVsdHNcbiAgICAgICAgICAgIHJlc3VsdC5tYXhUdXJucyA9IG9wdGlvbnMubWF4VHVybnMgPz8gc3RhdGUuX21heFR1cm5zO1xuICAgICAgICAgICAgLy8gQ29udGludWUgdGhlIHN0cmVhbSBsb29wIHdpdGhvdXQgYmxvY2tpbmdcbiAgICAgICAgICAgIHRoaXMuI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHQuX2RvbmUoKTtcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHQuX3JhaXNlRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMgPSB7XG4gICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgIGNvbnRleHQ6IHVuZGVmaW5lZCxcbiAgICB9KSB7XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlICYmIGlucHV0Ll90cmFjZSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpdGhUcmFjZShpbnB1dC5fdHJhY2UsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4oaW5wdXQuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiNydW5JbmRpdmlkdWFsU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcnVuSW5kaXZpZHVhbE5vblN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZXRPckNyZWF0ZVRyYWNlKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zPy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxubGV0IF9kZWZhdWx0UnVubmVyID0gdW5kZWZpbmVkO1xuZnVuY3Rpb24gZ2V0RGVmYXVsdFJ1bm5lcigpIHtcbiAgICBpZiAoX2RlZmF1bHRSdW5uZXIpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0UnVubmVyO1xuICAgIH1cbiAgICBfZGVmYXVsdFJ1bm5lciA9IG5ldyBSdW5uZXIoKTtcbiAgICByZXR1cm4gX2RlZmF1bHRSdW5uZXI7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJ1bm5lciA9IGdldERlZmF1bHRSdW5uZXIoKTtcbiAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5uZXIucnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bi5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCB7IGdldEFsbE1jcFRvb2xzIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuaW1wb3J0IHsgdG9vbCwgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRPdXRwdXRUZXh0IH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBpc0FnZW50VG9vbElucHV0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRpbmcgYW4gQUkgYWdlbnQgY29uZmlndXJlZCB3aXRoIGluc3RydWN0aW9ucywgdG9vbHMsIGd1YXJkcmFpbHMsIGhhbmRvZmZzIGFuZCBtb3JlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCBwYXNzaW5nIGBpbnN0cnVjdGlvbnNgLCB3aGljaCBpcyB0aGUgXCJzeXN0ZW0gcHJvbXB0XCIgZm9yIHRoZSBhZ2VudC4gSW5cbiAqIGFkZGl0aW9uLCB5b3UgY2FuIHBhc3MgYGhhbmRvZmZEZXNjcmlwdGlvbmAsIHdoaWNoIGlzIGEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlXG4gKiBhZ2VudCwgdXNlZCB3aGVuIHRoZSBhZ2VudCBpcyB1c2VkIGluc2lkZSB0b29scy9oYW5kb2Zmcy5cbiAqXG4gKiBBZ2VudHMgYXJlIGdlbmVyaWMgb24gdGhlIGNvbnRleHQgdHlwZS4gVGhlIGNvbnRleHQgaXMgYSAobXV0YWJsZSkgb2JqZWN0IHlvdSBjcmVhdGUuIEl0IGlzXG4gKiBwYXNzZWQgdG8gdG9vbCBmdW5jdGlvbnMsIGhhbmRvZmZzLCBndWFyZHJhaWxzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEFnZW50SG9va3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2VudCB3aXRoIGhhbmRvZmZzIGFuZCBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSB1bmlvbiB0eXBlIGZvciBUT3V0cHV0IGZyb20gdGhlIGhhbmRvZmYgYWdlbnRzJyBvdXRwdXQgdHlwZXMuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBoYW5kb2ZmczogY29uZmlnLmhhbmRvZmZzLFxuICAgICAgICAgICAgb3V0cHV0VHlwZTogY29uZmlnLm91dHB1dFR5cGUsXG4gICAgICAgICAgICBoYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5hbWU7XG4gICAgaW5zdHJ1Y3Rpb25zO1xuICAgIGhhbmRvZmZEZXNjcmlwdGlvbjtcbiAgICBoYW5kb2ZmcztcbiAgICBtb2RlbDtcbiAgICBtb2RlbFNldHRpbmdzO1xuICAgIHRvb2xzO1xuICAgIG1jcFNlcnZlcnM7XG4gICAgaW5wdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0VHlwZSA9ICd0ZXh0JztcbiAgICB0b29sVXNlQmVoYXZpb3I7XG4gICAgcmVzZXRUb29sQ2hvaWNlO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5uYW1lICE9PSAnc3RyaW5nJyB8fCBjb25maWcubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBZ2VudCBtdXN0IGhhdmUgYSBuYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGNvbmZpZy5pbnN0cnVjdGlvbnMgPz8gJyc7XG4gICAgICAgIHRoaXMuaGFuZG9mZkRlc2NyaXB0aW9uID0gY29uZmlnLmhhbmRvZmZEZXNjcmlwdGlvbiA/PyAnJztcbiAgICAgICAgdGhpcy5oYW5kb2ZmcyA9IGNvbmZpZy5oYW5kb2ZmcyA/PyBbXTtcbiAgICAgICAgdGhpcy5tb2RlbCA9IGNvbmZpZy5tb2RlbCA/PyAnJztcbiAgICAgICAgdGhpcy5tb2RlbFNldHRpbmdzID0gY29uZmlnLm1vZGVsU2V0dGluZ3MgPz8ge307XG4gICAgICAgIHRoaXMudG9vbHMgPSBjb25maWcudG9vbHMgPz8gW107XG4gICAgICAgIHRoaXMubWNwU2VydmVycyA9IGNvbmZpZy5tY3BTZXJ2ZXJzID8/IFtdO1xuICAgICAgICB0aGlzLmlucHV0R3VhcmRyYWlscyA9IGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMgPz8gW107XG4gICAgICAgIHRoaXMub3V0cHV0R3VhcmRyYWlscyA9IGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdO1xuICAgICAgICBpZiAoY29uZmlnLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VHlwZSA9IGNvbmZpZy5vdXRwdXRUeXBlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9vbFVzZUJlaGF2aW9yID0gY29uZmlnLnRvb2xVc2VCZWhhdmlvciA/PyAncnVuX2xsbV9hZ2Fpbic7XG4gICAgICAgIHRoaXMucmVzZXRUb29sQ2hvaWNlID0gY29uZmlnLnJlc2V0VG9vbENob2ljZSA/PyB0cnVlO1xuICAgICAgICAvLyAtLS0gUnVudGltZSB3YXJuaW5nIGZvciBoYW5kb2ZmIG91dHB1dCB0eXBlIGNvbXBhdGliaWxpdHkgLS0tXG4gICAgICAgIGlmIChjb25maWcuaGFuZG9mZk91dHB1dFR5cGVXYXJuaW5nRW5hYmxlZCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjb25maWcuaGFuZG9mZk91dHB1dFR5cGVXYXJuaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFuZG9mZnMgJiYgdGhpcy5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0VHlwZXMgPSBuZXcgU2V0KFtKU09OLnN0cmluZ2lmeSh0aGlzLm91dHB1dFR5cGUpXSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBoIG9mIHRoaXMuaGFuZG9mZnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdvdXRwdXRUeXBlJyBpbiBoICYmIGgub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZXMuYWRkKEpTT04uc3RyaW5naWZ5KGgub3V0cHV0VHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdhZ2VudCcgaW4gaCAmJiBoLmFnZW50Lm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGVzLmFkZChKU09OLnN0cmluZ2lmeShoLmFnZW50Lm91dHB1dFR5cGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0VHlwZXMuc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFtBZ2VudF0gV2FybmluZzogSGFuZG9mZiBhZ2VudHMgaGF2ZSBkaWZmZXJlbnQgb3V0cHV0IHR5cGVzOiAke0FycmF5LmZyb20ob3V0cHV0VHlwZXMpLmpvaW4oJywgJyl9LiBZb3UgY2FuIG1ha2UgaXQgdHlwZS1zYWZlIGJ5IHVzaW5nIEFnZW50LmNyZWF0ZSh7IC4uLiB9KSBtZXRob2QgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogT3VwdXQgc2NoZW1hIG5hbWVcbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0U2NoZW1hTmFtZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzWm9kT2JqZWN0KHRoaXMub3V0cHV0VHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiAnWm9kT3V0cHV0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5vdXRwdXRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvdXRwdXQgdHlwZTogJHt0aGlzLm91dHB1dFR5cGV9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgY29weSBvZiB0aGUgYWdlbnQsIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50cyBjaGFuZ2VkLiBGb3IgZXhhbXBsZSwgeW91IGNvdWxkIGRvOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogY29uc3QgbmV3QWdlbnQgPSBhZ2VudC5jbG9uZSh7IGluc3RydWN0aW9uczogJ05ldyBpbnN0cnVjdGlvbnMnIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gQSBwYXJ0aWFsIGNvbmZpZ3VyYXRpb24gdG8gY2hhbmdlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGFnZW50IHdpdGggdGhlIGdpdmVuIGNoYW5nZXMuXG4gICAgICovXG4gICAgY2xvbmUoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWdlbnQoe1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGlzIGFnZW50IGludG8gYSB0b29sLCBjYWxsYWJsZSBieSBvdGhlciBhZ2VudHMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIGhhbmRvZmZzIGluIHR3byB3YXlzOlxuICAgICAqIDEuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHJlY2VpdmVzIHRoZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50XG4gICAgICogICAgcmVjZWl2ZXMgZ2VuZXJhdGVkIGlucHV0LlxuICAgICAqIDIuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHRha2VzIG92ZXIgdGhlIGNvbnZlcnNhdGlvbi4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50IGlzXG4gICAgICogICAgY2FsbGVkIGFzIGEgdG9vbCwgYW5kIHRoZSBjb252ZXJzYXRpb24gaXMgY29udGludWVkIGJ5IHRoZSBvcmlnaW5hbCBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHRvb2wuXG4gICAgICogQHJldHVybnMgQSB0b29sIHRoYXQgcnVucyB0aGUgYWdlbnQgYW5kIHJldHVybnMgdGhlIG91dHB1dCB0ZXh0LlxuICAgICAqL1xuICAgIGFzVG9vbChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbE5hbWUsIHRvb2xEZXNjcmlwdGlvbiwgY3VzdG9tT3V0cHV0RXh0cmFjdG9yIH0gPSBvcHRpb25zO1xuICAgICAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgICAgICBuYW1lOiB0b29sTmFtZSA/PyB0b0Z1bmN0aW9uVG9vbE5hbWUodGhpcy5uYW1lKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sRGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogWydpbnB1dCddLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoZGF0YSwgY29udGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZ2VudFRvb2xJbnB1dChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdBZ2VudCB0b29sIGNhbGxlZCB3aXRoIGludmFsaWQgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmVyID0gbmV3IFJ1bm5lcigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1bm5lci5ydW4odGhpcywgZGF0YS5pbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0Py5jb250ZXh0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21PdXRwdXRFeHRyYWN0b3IocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldE91dHB1dFRleHQocmVzdWx0LnJhd1Jlc3BvbnNlc1tyZXN1bHQucmF3UmVzcG9uc2VzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYWdlbnQgaGFzIGEgZnVuY3Rpb24gYXMgaXRzIGluc3RydWN0aW9ucywgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgICAqIHJ1bkNvbnRleHQgYW5kIHRoZSBhZ2VudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTeXN0ZW1Qcm9tcHQocnVuQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5zdHJ1Y3Rpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnN0cnVjdGlvbnMocnVuQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBhdmFpbGFibGUgdG9vbHMgZnJvbSB0aGUgTUNQIHNlcnZlcnMuXG4gICAgICogQHJldHVybnMgdGhlIE1DUCBwb3dlcmVkIHRvb2xzXG4gICAgICovXG4gICAgYXN5bmMgZ2V0TWNwVG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLm1jcFNlcnZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEFsbE1jcFRvb2xzKHRoaXMubWNwU2VydmVycyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBTGwgYWdlbnQgdG9vbHMsIGluY2x1ZGluZyB0aGUgTUNQbCBhbmQgZnVuY3Rpb24gdG9vbHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbGwgY29uZmlndXJlZCB0b29sc1xuICAgICAqL1xuICAgIGFzeW5jIGdldEFsbFRvb2xzKCkge1xuICAgICAgICByZXR1cm4gWy4uLihhd2FpdCB0aGlzLmdldE1jcFRvb2xzKCkpLCAuLi50aGlzLnRvb2xzXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJzZWQgb3V0LlxuICAgICAqL1xuICAgIHByb2Nlc3NGaW5hbE91dHB1dChvdXRwdXQpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vdXRwdXRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShvdXRwdXQpO1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRoaXMub3V0cHV0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRUeXBlLnBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvdXRwdXQgdHlwZTogJHt0aGlzLm91dHB1dFR5cGV9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBhZ2VudCwgd2hpY2ggaXMgc2VyaWFsaXphYmxlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBKU09OIG9iamVjdCBjb250YWluaW5nIHRoZSBhZ2VudCdzIG5hbWUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRUcmFjZVByb2Nlc3NvciB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9wcm9jZXNzb3IubWpzXCI7XG5leHBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuZXhwb3J0IHsgQWdlbnQsIH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5leHBvcnQgeyBBZ2VudHNFcnJvciwgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IsIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIE1heFR1cm5zRXhjZWVkZWRFcnJvciwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgVG9vbENhbGxFcnJvciwgVXNlckVycm9yLCBTeXN0ZW1FcnJvciwgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5leHBvcnQgeyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCwgUnVuUmF3TW9kZWxTdHJlYW1FdmVudCwgUnVuSXRlbVN0cmVhbUV2ZW50LCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmV4cG9ydCB7IGRlZmluZU91dHB1dEd1YXJkcmFpbCwgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5leHBvcnQgeyBnZXRIYW5kb2ZmLCBnZXRUcmFuc2Zlck1lc3NhZ2UsIEhhbmRvZmYsIGhhbmRvZmYsIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmV4cG9ydCB7IGFzc2lzdGFudCwgc3lzdGVtLCB1c2VyIH0gZnJvbSBcIi4vaGVscGVycy9tZXNzYWdlLm1qc1wiO1xuZXhwb3J0IHsgZXh0cmFjdEFsbFRleHRPdXRwdXQsIFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuZXhwb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmV4cG9ydCB7IGdldExvZ2dlciB9IGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmV4cG9ydCB7IGdldEFsbE1jcFRvb2xzLCBpbnZhbGlkYXRlU2VydmVyVG9vbHNDYWNoZSwgTUNQU2VydmVyU3RkaW8sIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuZXhwb3J0IHsgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5leHBvcnQgeyBSdW5SZXN1bHQsIFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0Lm1qc1wiO1xuZXhwb3J0IHsgcnVuLCBSdW5uZXIsIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuZXhwb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5leHBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuZXhwb3J0IHsgY29tcHV0ZXJUb29sLCB0b29sLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuZXhwb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciwgVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5leHBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuZXhwb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIEFkZCB0aGUgZGVmYXVsdCBwcm9jZXNzb3IsIHdoaWNoIGV4cG9ydHMgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgYmFja2VuZCBpbiBiYXRjaGVzLiBZb3UgY2FuXG4gKiBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IgYnkgZWl0aGVyOlxuICogMS4gY2FsbGluZyBhZGRUcmFjZVByb2Nlc3Nvciwgd2hpY2ggYWRkcyBhZGRpdGlvbmFsIHByb2Nlc3NvcnMsIG9yXG4gKiAyLiBjYWxsaW5nIHNldFRyYWNlUHJvY2Vzc29ycywgd2hpY2ggc2V0cyB0aGUgcHJvY2Vzc29ycyBhbmQgZGlzY2FyZHMgdGhlIGRlZmF1bHQgb25lXG4gKi9cbmFkZFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRQcm9jZXNzb3IoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgYWdlbnQgaW5zdGFuY2UgdGhhdCBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHRvIGJ1aWxkXG4gKiB2b2ljZSBhZ2VudHMuIER1ZSB0byB0aGUgbmF0dXJlIG9mIHRoaXMgYWdlbnQsIHNvbWUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gKiB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcmVndWxhciBgQWdlbnRgIGluc3RhbmNlcy4gRm9yIGV4YW1wbGU6XG4gKiAtIGBtb2RlbGAgY2hvaWNlIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgbW9kZWxTZXR0aW5nc2AgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBvdXRwdXRUeXBlYCBpcyBub3Qgc3VwcG9ydGVkIGFzIFJlYWx0aW1lQWdlbnRzIGRvIG5vdCBzdXBwb3J0IHN0cnVjdHVyZWQgb3V0cHV0c1xuICogLSBgdG9vbFVzZUJlaGF2aW9yYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYHZvaWNlYCBjYW4gYmUgY29uZmlndXJlZCBvbiBhbiBgQWdlbnRgIGxldmVsIGhvd2V2ZXIgaXQgY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGZpcnN0XG4gKiAgICBhZ2VudCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCBzcG9rZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSB2b2ljZSBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IHRoZSBhZ2VudC4gSWYgYW5vdGhlciBhZ2VudCBhbHJlYWR5IHNwb2tlIGR1cmluZyB0aGVcbiAgICAgKiBSZWFsdGltZVNlc3Npb24sIGNoYW5naW5nIHRoZSB2b2ljZSBkdXJpbmcgYSBoYW5kb2ZmIHdpbGwgZmFpbC5cbiAgICAgKi9cbiAgICB2b2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy52b2ljZSA9IGNvbmZpZy52b2ljZSA/PyAnYXNoJztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZUFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlYm91bmNlVGV4dExlbmd0aDogc2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoID8/IDEwMCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKHsgcG9saWN5SGludDogcG9saWN5SGludElucHV0LCAuLi5vcHRpb25zIH0pIHtcbiAgICBjb25zdCBiYXNlR3VhcmRyYWlsID0gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKG9wdGlvbnMpO1xuICAgIGNvbnN0IHBvbGljeUhpbnQgPSBwb2xpY3lIaW50SW5wdXQgPz8gYmFzZUd1YXJkcmFpbC5uYW1lO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VHdWFyZHJhaWwsXG4gICAgICAgIHBvbGljeUhpbnQsXG4gICAgICAgIHJ1bjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhc2VHdWFyZHJhaWwucnVuKGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IC4uLnJlc3VsdC5ndWFyZHJhaWwsIHBvbGljeUhpbnQgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWVzc2FnZSB0aGF0IGluZm9ybXMgdGhlIG1vZGVsIGFib3V0IHdoeSB0aGUgZ3VhcmRyYWlsIHdhcyB0cmlnZ2VyZWQgYW5kIHRvXG4gKiBjb3JyZWN0IHRoZSBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCkge1xuICAgIHJldHVybiBgXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXG5GYWlsZWQgR3VhcmRyYWlsIFJlYXNvbjogJHtyZXN1bHQuZ3VhcmRyYWlsLnBvbGljeUhpbnR9LiBcbkZhaWx1cmUgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8gPz8ge30pfS4gXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cbmAudHJpbSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpyZWFsdGltZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuZXhwb3J0IGNvbnN0IGJhc2VJdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCd0ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdhdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pKSksXG4gICAgfSksXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVRvb2xDYWxsSXRlbSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbCcpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtcy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbi8vIEV2ZW50IHNjaGVtYXMgbWlycm9yaW5nIHRoZSBzdHJ1Y3R1cmVzIGRlZmluZWQgaW4gdGhlIE9wZW5BSSBTREsgdHlwaW5ncy5cbi8vIE1vc3QgZmllbGRzIGZyb20gdGhlIGludGVyZmFjZXMgaW4gYHJlYWx0aW1lLmQudHNgIGFyZSBjYXB0dXJlZCBoZXJlIHRvXG4vLyBwcm92aWRlIGJldHRlciBydW50aW1lIHZhbGlkYXRpb24gd2hlbiBwYXJzaW5nIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIuXG5leHBvcnQgY29uc3QgcmVhbHRpbWVSZXNwb25zZSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY29udmVyc2F0aW9uX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtYXhfb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcih6LmxpdGVyYWwoJ2luZicpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtb2RhbGl0aWVzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUucmVzcG9uc2UnKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvdXRwdXRfYXVkaW9fZm9ybWF0OiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBzdGF0dXM6IHpcbiAgICAgICAgLmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdmYWlsZWQnLCAnY2FuY2VsbGVkJywgJ2luX3Byb2dyZXNzJ10pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1c19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBpbnB1dF90b2tlbnNfZGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG91dHB1dF90b2tlbnNfZGV0YWlsczogelxuICAgICAgICAgICAgLnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKVxuICAgICAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgICAgIC5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHZvaWNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuLy8gQmFzaWMgY29udGVudCBzY2hlbWEgdXNlZCBieSBDb252ZXJzYXRpb25JdGVtLlxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRleHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoudW5pb24oW1xuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICB6LmxpdGVyYWwoJ2l0ZW1fcmVmZXJlbmNlJyksXG4gICAgICAgIHoubGl0ZXJhbCgndGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ2F1ZGlvJyksXG4gICAgXSksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNvbnRlbnQ6IHouYXJyYXkoY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEpLm9wdGlvbmFsKCksXG4gICAgbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5pdGVtJykub3B0aW9uYWwoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByb2xlOiB6LmVudW0oWyd1c2VyJywgJ2Fzc2lzdGFudCcsICdzeXN0ZW0nXSkub3B0aW9uYWwoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2luX3Byb2dyZXNzJ10pLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5lbnVtKFsnbWVzc2FnZScsICdmdW5jdGlvbl9jYWxsJywgJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0J10pLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnZlcnNhdGlvbjogei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUuY29udmVyc2F0aW9uJykub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKSxcbiAgICBsb2dwcm9iczogei5hcnJheSh6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmZhaWxlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBlcnJvcjogei5vYmplY3Qoe1xuICAgICAgICBjb2RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcGFyYW06IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGVycm9yRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdlcnJvcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZXJyb3I6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcpLFxuICAgIGF1ZGlvOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0JyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXR0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fc3RhcnRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdG9wcGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JhdGVfbGltaXRzLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByYXRlX2xpbWl0czogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG5hbWU6IHouZW51bShbJ3JlcXVlc3RzJywgJ3Rva2VucyddKS5vcHRpb25hbCgpLFxuICAgICAgICByZW1haW5pbmc6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVzZXRfc2Vjb25kczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIH0pKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW8uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW9fdHJhbnNjcmlwdC5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLnRleHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UudGV4dC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jYW5jZWwnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZTogei5hbnkoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCB0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndHJhbnNjcmlwdGlvbl9zZXNzaW9uLnVwZGF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndHJhbnNjcmlwdGlvbl9zZXNzaW9uLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG4vKipcbiAqIFRoaXMgc2NoZW1hIGlzIHVzZWQgaWYgYW4gZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LiBUaGUgUmVhbHRpbWUgQVBJIG1pZ2h0IGludHJvZHVjZVxuICogbmV3IGV2ZW50cyBhdCBzb21lIHBvaW50IGFuZCB3ZSBzaG91bGQgaGFuZGxlIHRoZW0gZ3JhY2VmdWxseSBieSB0cmVhdGluZyB0aGVtIGFzIGdlbmVyaWMgZXZlbnRzXG4gKiBvbmx5IHJlcXVpcmluZyBhIHR5cGUgYW5kIGFuIG9wdGlvbmFsIGV2ZW50X2lkLlxuICovXG5leHBvcnQgY29uc3QgZ2VuZXJpY0V2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEsXG4gICAgZXJyb3JFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEsXG4gICAgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlT3V0cHV0SXRlbURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZUNsaWVudEV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEsXG4gICAgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSxcbl0pO1xuLyoqXG4gKiBQYXJzZXMgYSByZWFsdGltZSBldmVudCBmcm9tIHRoZSBzZXJ2ZXIuIElmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQsIGl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIGdlbmVyaWMgZXZlbnQuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGV2ZW50IG9yIG51bGwgaWYgdGhlIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVhbHRpbWVFdmVudChldmVudCkge1xuICAgIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YS50b1N0cmluZygpKTtcbiAgICBjb25zdCBwYXJzZWQgPSByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hLnNhZmVQYXJzZShyYXcpO1xuICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1BhcnNlZCA9IGdlbmVyaWNFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICAgICAgaWYgKGdlbmVyaWNQYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogZ2VuZXJpY1BhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZGF0YTogcGFyc2VkLmRhdGEsIGlzR2VuZXJpYzogZmFsc2UgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lRXZlbnRzLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCBVc2FnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSwgcmVhbHRpbWVUb29sQ2FsbEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCwgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBhcnJheUJ1ZmZlclRvQmFzZTY0LCBkaWZmUmVhbHRpbWVIaXN0b3J5IH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBtb2RlbCB0aGF0IGlzIHVzZWQgZHVyaW5nIHRoZSBjb25uZWN0aW9uIGlmIG5vIG1vZGVsIGlzIHByb3ZpZGVkLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwgPSAnZ3B0LTRvLXJlYWx0aW1lLXByZXZpZXcnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBzZXNzaW9uIGNvbmZpZyB0aGF0IGdldHMgc2VuZCBvdmVyIGR1cmluZyBzZXNzaW9uIGNvbm5lY3Rpb24gdW5sZXNzIG92ZXJyaWRlblxuICogYnkgdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyA9IHtcbiAgICB2b2ljZTogJ2FzaCcsXG4gICAgbW9kYWxpdGllczogWyd0ZXh0JywgJ2F1ZGlvJ10sXG4gICAgaW5wdXRBdWRpb0Zvcm1hdDogJ3BjbTE2JyxcbiAgICBvdXRwdXRBdWRpb0Zvcm1hdDogJ3BjbTE2JyxcbiAgICBpbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbjoge1xuICAgICAgICBtb2RlbDogJ2dwdC00by1taW5pLXRyYW5zY3JpYmUnLFxuICAgIH0sXG4gICAgdHVybkRldGVjdGlvbjoge1xuICAgICAgICB0eXBlOiAnc2VtYW50aWNfdmFkJyxcbiAgICB9LFxufTtcbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZUJhc2UgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgI21vZGVsO1xuICAgICNhcGlLZXk7XG4gICAgI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuI21vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTDtcbiAgICAgICAgdGhpcy4jYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IG1vZGVsIHRoYXQgaXMgYmVpbmcgdXNlZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50TW9kZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtb2RlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICogKipOb3RlKio6IFRoZSBtb2RlbCBjYW5ub3QgYmUgY2hhbmdlZCBtaWQgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHNldCBjdXJyZW50TW9kZWwobW9kZWwpIHtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBtb2RlbDtcbiAgICB9XG4gICAgYXN5bmMgX2dldEFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IG9wdGlvbnMuYXBpS2V5ID8/IHRoaXMuI2FwaUtleTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGlLZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBhcGlLZXkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBpS2V5O1xuICAgIH1cbiAgICBfb25NZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgIGlmIChwYXJzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJyonLCBwYXJzZWQpO1xuICAgICAgICBpZiAoaXNHZW5lcmljKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgeyB0eXBlOiAnZXJyb3InLCBlcnJvcjogcGFyc2VkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbWl0KHBhcnNlZC50eXBlLCBwYXJzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fc3RhcnRlZCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2Vfc3RhcnRlZCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcnNlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgcmVzcG9uc2UgZG9uZSBldmVudCcsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3QgdG90YWxUb2tlbnMgPSBpbnB1dFRva2VucyArIG91dHB1dFRva2VucztcbiAgICAgICAgICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKHtcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndXNhZ2VfdXBkYXRlJywgdXNhZ2UpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0dXJuX2RvbmUnLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlX2RvbmUnLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLmlkID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2Uub3V0cHV0ID8/IFtdLFxuICAgICAgICAgICAgICAgICAgICB1c2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvLmRvbmUnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2RvbmUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX2RlbGV0ZWQnLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSB7XG4gICAgICAgICAgICAvLyByaWdodCBub3cgcmF0aGVyIHRoYW4ga2VlcGluZyB0cmFjayBvZiBwYXJ0aWFscyBhbmQgcmVidWlsZGluZyB0aGUgaXRlbSB3ZVxuICAgICAgICAgICAgLy8gd2lsbCByZXRyaWV2ZSBpdCBpbnN0ZWFkIHdoaWNoIHRyaWdnZXJzIHRoZSBgY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkYCBldmVudCBiZWxvd1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS50ZXh0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5hdWRpb190cmFuc2NyaXB0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdF9kZWx0YScsXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhOiBwYXJzZWQuZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIHN1cHBvcnQgZm9yIHBhcnRpYWwgdHJhbnNjcmlwdHMgeWV0LlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW1JZCA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZWQucHJldmlvdXNfaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQuaXRlbS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQuaXRlbTtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJyAmJiBpdGVtLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJywgLy8gd2Ugc2V0IGl0IHRvIGluX3Byb2dyZXNzIGZvciB0aGUgVUkgYXMgaXQgd2lsbCBvbmx5IGJlIGNvbXBsZXRlZCB3aXRoIHRoZSBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIHRvb2xDYWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Z1bmN0aW9uX2NhbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogaXRlbS5jYWxsX2lkID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbHRpbWVJdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgcmVhbHRpbWVJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9vbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIF9vbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IGl0ZW0gaW4gdGhlIGNvbnZlcnNhdGlvbiBhbmRcbiAgICAgKiB0cmlnZ2VyIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogbWVzc2FnZSxcbiAgICAgICAgICAgIC4uLm90aGVyRXZlbnREYXRhLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsID8/XG4gICAgICAgICAgICAgICAgdGhpcy4jbW9kZWwgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RlbCxcbiAgICAgICAgICAgIHZvaWNlOiBjb25maWcudm9pY2UgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudm9pY2UsXG4gICAgICAgICAgICBtb2RhbGl0aWVzOiBjb25maWcubW9kYWxpdGllcyA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RhbGl0aWVzLFxuICAgICAgICAgICAgaW5wdXRfYXVkaW9fZm9ybWF0OiBjb25maWcuaW5wdXRBdWRpb0Zvcm1hdCA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9Gb3JtYXQsXG4gICAgICAgICAgICBvdXRwdXRfYXVkaW9fZm9ybWF0OiBjb25maWcub3V0cHV0QXVkaW9Gb3JtYXQgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5vdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAgICAgICAgIGlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb246IGNvbmZpZy5pbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbiA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9UcmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgdHVybl9kZXRlY3Rpb246IGNvbmZpZy50dXJuRGV0ZWN0aW9uID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBjb25maWcudG9vbENob2ljZSA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scz8ubWFwKCh0b29sKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRvb2wsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBzZXQgdHJhY2luZyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IHRyeSB0byBvdmVycmlkZSBpdCBvbiBldmVyeVxuICAgICAgICAgICAgLy8gc2Vzc2lvbi51cGRhdGUgYXMgaXQgbWlnaHQgbGVhZCB0byBlcnJvcnNcbiAgICAgICAgICAgIC4uLihjb25maWcucHJvdmlkZXJEYXRhID8/IHt9KSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBpbnRlcm5hbCB0cmFjaW5nIGNvbmZpZy4gVGhpcyBpcyB1c2VkIHRvIHRyYWNrIHRoZSB0cmFjaW5nIGNvbmZpZyB0aGF0IGhhcyBiZWVuIHNldFxuICAgICAqIGR1cmluZyB0aGUgc2Vzc2lvbi5jcmVhdGUgZXZlbnQuXG4gICAgICovXG4gICAgc2V0IF90cmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IHRyYWNpbmdDb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRyYWNpbmcgY29uZmlnIGZvciB0aGUgc2Vzc2lvbi4gVGhpcyB3aWxsIHNlbmQgdGhlIHRyYWNpbmcgY29uZmlnIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhY2luZ0NvbmZpZyAtIFRoZSB0cmFjaW5nIGNvbmZpZyB0byBzZXQuIFdlIGRvbid0IHN1cHBvcnQgJ2F1dG8nIGhlcmUgYXMgdGhlIFNESyB3aWxsIGFsd2F5cyBjb25maWd1cmUgYSBXb3JrZmxvdyBOYW1lIHVubGVzcyBpdCBleGlzdHNcbiAgICAgKi9cbiAgICBfdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIHRyZWF0aW5nIGl0IGFzIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgIHRoaXMuI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgIC8vIHR1cm4gb24gdHJhY2luZyBpbiBhdXRvIG1vZGVcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogJ2F1dG8nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgIT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB0eXBlb2YgdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgYWxyZWFkeSBzZXQsIHdlIGNhbid0IGNoYW5nZSBpdFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNpbmcgY29uZmlnIGlzIGFscmVhZHkgc2V0LCBza2lwcGluZyBzZXR0aW5nIGl0IGFnYWluLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdEaXNhYmxpbmcgdHJhY2luZyBmb3IgdGhpcyBzZXNzaW9uLiBJdCBjYW5ub3QgYmUgdHVybmVkIG9uIGZvciB0aGlzIHNlc3Npb24gZnJvbSB0aGlzIHBvaW50IG9uLicpO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyB0cmFjaW5nIGlzIGN1cnJlbnRseSBub3Qgc2V0IHNvIHdlIGNhbiBzZXQgaXQgdG8gdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/Lmdyb3VwX2lkIHx8XG4gICAgICAgICAgICB0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ubWV0YWRhdGEgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdNaXNtYXRjaCBpbiB0cmFjaW5nIGNvbmZpZy4gSWdub3JpbmcgdGhlIG5ldyB0cmFjaW5nIGNvbmZpZy4gVGhpcyBsaWtlbHkgaGFwcGVucyB3aGVuIHlvdSBhbHJlYWR5IHNldCBhIHRyYWNpbmcgY29uZmlnIG9uIHNlc3Npb24gY3JlYXRpb24uIEN1cnJlbnQgdHJhY2luZyBjb25maWc6ICVzLCBuZXcgdHJhY2luZyBjb25maWc6ICVzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4jdHJhY2luZ0NvbmZpZyksIEpTT04uc3RyaW5naWZ5KHRyYWNpbmdDb25maWcpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc2Vzc2lvbiBjb25maWcuIFRoaXMgd2lsbCBtZXJnZSBpdCB3aXRoIHRoZSBjdXJyZW50IHNlc3Npb24gY29uZmlnIHdpdGggdGhlIGRlZmF1bHRcbiAgICAgKiB2YWx1ZXMgYW5kIHNlbmQgaXQgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBUaGUgc2Vzc2lvbiBjb25maWcgdG8gdXBkYXRlLlxuICAgICAqL1xuICAgIHVwZGF0ZVNlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gdGhpcy5fZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjogc2Vzc2lvbkRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBvdXRwdXQgb2YgYSBmdW5jdGlvbiBjYWxsIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbENhbGwgLSBUaGUgdG9vbCBjYWxsIHRvIHNlbmQgdGhlIG91dHB1dCBmb3IuXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHBhcmFtIHN0YXJ0UmVzcG9uc2UgLSBXaGV0aGVyIHRvIHN0YXJ0IGEgbmV3IHJlc3BvbnNlIGFmdGVyIHNlbmRpbmcgdGhlIG91dHB1dC5cbiAgICAgKi9cbiAgICBzZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBvdXRwdXQsIHN0YXJ0UmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkOiB0b29sQ2FsbC5wcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHRvb2xDYWxsLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHRvb2wgY2FsbCBpdGVtJywgZXJyb3IsIHRvb2xDYWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jcmVhdGUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gSWYgYHsgY29tbWl0OiB0cnVlIH1gIGlzIHBhc3NlZCwgdGhlIGF1ZGlvIGJ1ZmZlclxuICAgICAqIHdpbGwgYmUgY29tbWl0dGVkIGFuZCB0aGUgbW9kZWwgd2lsbCBzdGFydCBwcm9jZXNzaW5nIGl0LiBUaGlzIGlzIG5lY2Vzc2FyeSBpZiB5b3UgaGF2ZVxuICAgICAqIGRpc2FibGVkIHR1cm4gZGV0ZWN0aW9uIC8gdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCB7IGNvbW1pdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcsXG4gICAgICAgICAgICBhdWRpbzogYXJyYXlCdWZmZXJUb0Jhc2U2NChhdWRpbyksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29tbWl0KSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi4gVGhpcyB3aWxsIGNyZWF0ZSBhIGRpZmYgYmV0d2VlbiB0aGUgb2xkIGFuZCBuZXcgaGlzdG9yeVxuICAgICAqIGFuZCBzZW5kIHRoZSBuZWNlc3NhcnkgZXZlbnRzIHRvIHRoZSBSZWFsdGltZSBBUEkgdG8gdXBkYXRlIHRoZSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9sZEhpc3RvcnkgLSBUaGUgb2xkIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHJlc2V0SGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgICAgIGNvbnN0IHsgcmVtb3ZhbHMsIGFkZGl0aW9ucywgdXBkYXRlcyB9ID0gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KTtcbiAgICAgICAgY29uc3QgcmVtb3ZhbElkcyA9IG5ldyBTZXQocmVtb3ZhbHMubWFwKChpdGVtKSA9PiBpdGVtLml0ZW1JZCkpO1xuICAgICAgICAvLyB3ZSBkb24ndCBoYXZlIGFuIHVwZGF0ZSBldmVudCBmb3IgaXRlbXMgc28gd2Ugd2lsbCByZW1vdmUgYW5kIHJlLWFkZCB3aGF0J3MgdGhlcmVcbiAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuICAgICAgICAgICAgcmVtb3ZhbElkcy5hZGQodXBkYXRlLml0ZW1JZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92YWxJZHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbUlkIG9mIHJlbW92YWxJZHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtSWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRkaXRpb25zQW5kVXBkYXRlcyA9IFsuLi5hZGRpdGlvbnMsIC4uLnVwZGF0ZXNdO1xuICAgICAgICBmb3IgKGNvbnN0IGFkZGl0aW9uIG9mIGFkZGl0aW9uc0FuZFVwZGF0ZXMpIHtcbiAgICAgICAgICAgIGlmIChhZGRpdGlvbi50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogYWRkaXRpb24ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYWRkaXRpb24uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGFkZGl0aW9uLml0ZW1JZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbi5yb2xlICE9PSAnc3lzdGVtJyAmJiBhZGRpdGlvbi5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUVudHJ5LnN0YXR1cyA9IGFkZGl0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbUVudHJ5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYWRkaXRpb24udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Z1bmN0aW9uIGNhbGxzIGNhbm5vdCBiZSBtYW51YWxseSBhZGRlZCBvciB1cGRhdGVkIGF0IHRoZSBtb21lbnQuIElnbm9yaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVCYXNlLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuaW1wb3J0IHsgaXNCcm93c2VyRW52aXJvbm1lbnQgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgSEVBREVSUyB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCdzIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgT3BlbkFJJ3MgUmVhbHRpbWUgQVBJXG4gKiB2aWEgV2ViUlRDLiBXaGlsZSB0aGlzIHRyYW5zcG9ydCBsYXllciBpcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGhpbiBhIFJlYWx0aW1lU2Vzc2lvbiwgaXQgY2FuXG4gKiBhbHNvIGJlIHVzZWQgc3RhbmRhbG9uZSBpZiB5b3Ugd2FudCB0byBoYXZlIGEgZGlyZWN0IGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAqXG4gKiBVbmxlc3MgeW91IHNwZWNpZnkgYSBgbWVkaWFTdHJlYW1gIG9yIGBhdWRpb0VsZW1lbnRgIG9wdGlvbiwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGUgbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVdlYlJUQyBleHRlbmRzIE9wZW5BSVJlYWx0aW1lQmFzZSB7XG4gICAgb3B0aW9ucztcbiAgICAjdXJsO1xuICAgICNzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgICN1c2VJbnNlY3VyZUFwaUtleTtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgI211dGVkID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0eXBlb2YgUlRDUGVlckNvbm5lY3Rpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy4jdXJsID0gb3B0aW9ucy5iYXNlVXJsID8/IGBodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lYDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uIGluY2x1ZGluZyB0aGUgcGVlciBjb25uZWN0aW9uIGFuZCBkYXRhXG4gICAgICogY2hhbm5lbC5cbiAgICAgKi9cbiAgICBnZXQgY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIGVzdGFibGlzaCB0aGUgY29ubmVjdGlvbiB0byB0aGUgT3BlbkFJIFJlYWx0aW1lIEFQSVxuICAgICAqIHZpYSBXZWJSVEMuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsIGFsc28gYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlXG4gICAgICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGluZycpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdSZWFsdGltZSBjb25uZWN0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MuIFBsZWFzZSBhd2FpdCBvcmlnaW5hbCBwcm9taXNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gb3B0aW9ucy51cmwgPz8gdGhpcy4jdXJsO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGlzQ2xpZW50S2V5ID0gdHlwZW9mIGFwaUtleSA9PT0gJ3N0cmluZycgJiYgYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpO1xuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJiAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgJiYgIWlzQ2xpZW50S2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGluc2VjdXJlIEFQSSBrZXkuIFBsZWFzZSB1c2UgYSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpbnN0ZWFkIG9yIHNldCB0aGUgdXNlSW5zZWN1cmVBcGlLZXkgb3B0aW9uIHRvIHRydWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWFzeW5jLXByb21pc2UtZXhlY3V0b3JcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvblVybCA9IG5ldyBVUkwoYmFzZVVybCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQ2hhbm5lbCA9IHBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCdvYWktZXZlbnRzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAvLyBTZW5kaW5nIHRoZSBzZXNzaW9uIGNvbmZpZyBhZ2FpbiBoZXJlIG9uY2UgdGhlIGNoYW5uZWwgaXMgY29ubmVjdGVkIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHRoZSBzZXNzaW9uIGNvbmZpZyBpcyBzZW50IHRvIHRoZSBzZXJ2ZXIgYmVmb3JlIHRoZSBmaXJzdCByZXNwb25zZSBpcyByZWNlaXZlZFxuICAgICAgICAgICAgICAgICAgICAvLyBTZXR0aW5nIGl0IG9uIGNvbm5lY3Rpb24gc2hvdWxkIHdvcmsgYnV0IHRoZSBjb25maWcgaXMgbm90IGJlaW5nIHZhbGlkYXRlZCBvbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VydmVyLiBUaGlzIHRyaWdnZXJzIGEgdmFsaWRhdGlvbiBlcnJvciBpZiB0aGUgY29uZmlnIGlzIG5vdCB2YWxpZC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZXNzaW9uQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24uY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHR1cm4gb24gdHJhY2luZyBhZnRlciB0aGUgc2Vzc2lvbiBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFjaW5nQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnLnRyYWNpbmcgPz8gJ2F1dG8nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIHNldCB1cCBhdWRpbyBwbGF5YmFja1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRWxlbWVudCA9IHRoaXMub3B0aW9ucy5hdWRpb0VsZW1lbnQgPz8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLm9udHJhY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LnNyY09iamVjdCA9IGV2ZW50LnN0cmVhbXNbMF07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBnZXQgbWljcm9waG9uZSBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLm9wdGlvbnMubWVkaWFTdHJlYW0gPz9cbiAgICAgICAgICAgICAgICAgICAgKGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uYWRkVHJhY2soc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgcGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9mZmVyLnNkcCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgb2ZmZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5fZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZyksXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZCgnc2RwJywgb2ZmZXIuc2RwKTtcbiAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZCgnc2Vzc2lvbicsIEpTT04uc3RyaW5naWZ5KHNlc3Npb25Db25maWcpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZHBSZXNwb25zZSA9IGF3YWl0IGZldGNoKGNvbm5lY3Rpb25VcmwsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthcGlLZXl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogSEVBREVSU1snWC1PcGVuQUktQWdlbnRzLVNESyddLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Fuc3dlcicsXG4gICAgICAgICAgICAgICAgICAgIHNkcDogYXdhaXQgc2RwUmVzcG9uc2UudGV4dCgpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgc3RyaW5naWZ5IHRoZSBldmVudCBhbmQgc2VuZCBpdCBkaXJlY3RseSB0byB0aGVcbiAgICAgKiBBUEkuIFRoaXMgY2FuIGJlIHVzZWQgaWYgeW91IHdhbnQgdG8gdGFrZSBjb250cm9sIG92ZXIgdGhlIGNvbm5lY3Rpb24gYW5kIHNlbmQgZXZlbnRzIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwgfHxcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLnJlYWR5U3RhdGUgIT09ICdvcGVuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJSVEMgZGF0YSBjaGFubmVsIGlzIG5vdCBjb25uZWN0ZWQuIE1ha2Ugc3VyZSB5b3UgY2FsbCBgY29ubmVjdCgpYCBiZWZvcmUgc2VuZGluZyBldmVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwuc2VuZChKU09OLnN0cmluZ2lmeShldmVudCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIG9yIHVubXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiNtdXRlZCA9IG11dGVkO1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlci50cmFjaykge1xuICAgICAgICAgICAgICAgICAgICBzZW5kZXIudHJhY2suZW5hYmxlZCA9ICFtdXRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJIGFuZCBkaXNjb25uZWN0cyB0aGUgdW5kZXJseWluZyBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSB0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzZW5kZXIpID0+IHtcbiAgICAgICAgICAgICAgICBzZW5kZXIudHJhY2s/LnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzICE9PSAnZGlzY29ubmVjdGVkJykge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBjdXJyZW50IHJlc3BvbnNlIGlmIG9uZSBpcyBvbmdvaW5nIGFuZCBjbGVhciB0aGUgYXVkaW8gYnVmZmVyIHNvIHRoYXQgdGhlIGFnZW50XG4gICAgICogc3RvcHMgdGFsa2luZy5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNvbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY2FuY2VsJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXInLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbmV4cG9ydCBjb25zdCBXZWJTb2NrZXQgPSBnbG9iYWxUaGlzLldlYlNvY2tldDtcbmV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXJFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoaW1zLWJyb3dzZXIubWpzLm1hcCIsImltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50LCBXZWJTb2NrZXQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvX3NoaW1zJztcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBiYXNlNjRUb0FycmF5QnVmZmVyLCBIRUFERVJTLCBXRUJTT0NLRVRfTUVUQSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlNvY2tldHMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdFxuICogY2FuIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgICNhcGlLZXk7XG4gICAgI3VybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNjdXJyZW50SXRlbUlkO1xuICAgICNjdXJyZW50QXVkaW9Db250ZW50SW5kZXg7XG4gICAgLyoqXG4gICAgICogVGltZXN0YW1wIG1haW50YWluZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllciB0byBhaWQgd2l0aCB0aGUgY2FsY3VsYXRpb24gb2YgdGhlIGVsYXBzZWQgdGltZVxuICAgICAqIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkIHRvIGNvbXB1dGUgdGhlIHJpZ2h0IGludGVycnVwdGlvbiB0aW1lLlxuICAgICAqXG4gICAgICogTW9zdGx5IGludGVybmFsIGJ1dCBtaWdodCBiZSB1c2VkIGJ5IGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllcnMgZm9yIHRoZWlyIGludGVycnVwdGlvblxuICAgICAqIGNhbGN1bGF0aW9uLlxuICAgICAqL1xuICAgIF9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgIF9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLiN1cmwgPSBgd3NzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWU/bW9kZWw9JHt0aGlzLmN1cnJlbnRNb2RlbH1gO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbHdheXMgcmV0dXJucyBgbnVsbGAgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3QgaGFuZGxlIG11dGluZy4gSW5zdGVhZCxcbiAgICAgKiB0aGlzIHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBjbGllbnQgYnkgbm90IHRyaWdnZXJpbmcgdGhlIGBzZW5kQXVkaW9gIG1ldGhvZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBpdGVtIElEIG9mIHRoZSBvbmdvaW5nIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50SXRlbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY3VycmVudEl0ZW1JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcnMgdGhlIGBhdWRpb2AgZXZlbnQgdGhhdCBhIGNsaWVudCBtaWdodCBsaXN0ZW4gdG8gdG8gcmVjZWl2ZSB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqIFByb3RlY3RlZCBmb3IgeW91IHRvIGJlIGFibGUgdG8gb3ZlcnJpZGUgYW5kIGRpc2FibGUgZW1pdHRpbmcgdGhpcyBldmVudCBpbiBjYXNlIHlvdXIgZXh0ZW5kZWRcbiAgICAgKiB0cmFuc3BvcnQgbGF5ZXIgaGFuZGxlcyBhdWRpbyBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvRXZlbnQgLSBUaGUgYXVkaW8gZXZlbnQgdG8gZW1pdC5cbiAgICAgKi9cbiAgICBfb25BdWRpbyhhdWRpb0V2ZW50KSB7XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBhdWRpb0V2ZW50KTtcbiAgICB9XG4gICAgI3NldHVwV2ViU29ja2V0KHJlc29sdmUsIHJlamVjdCwgc2Vzc2lvbkNvbmZpZykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLiNhcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0FQSSBrZXkgaXMgbm90IHNldC4gUGxlYXNlIGNhbGwgYGNvbm5lY3QoKWAgd2l0aCBhbiBBUEkga2V5IGZpcnN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmXG4gICAgICAgICAgICAhdGhpcy4jYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpICYmXG4gICAgICAgICAgICAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gZXBoZW1lcmFsIGNsaWVudCBrZXkuIElmIHlvdSBoYXZlIHRvIHVzZSBhIHJlZ3VsYXIgQVBJIGtleSwgc2V0IHRoZSBgdXNlSW5zZWN1cmVBcGlLZXlgIG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdlYnNvY2tldEFyZ3VtZW50cyA9IGlzQnJvd3NlckVudmlyb25tZW50KClcbiAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgLy8gQXV0aFxuICAgICAgICAgICAgICAgICdvcGVuYWktaW5zZWN1cmUtYXBpLWtleS4nICsgdGhpcy4jYXBpS2V5LFxuICAgICAgICAgICAgICAgIC8vIEJldGEgcHJvdG9jb2wsIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgJ29wZW5haS1iZXRhLnJlYWx0aW1lLXYxJyxcbiAgICAgICAgICAgICAgICAvLyBWZXJzaW9uIGhlYWRlclxuICAgICAgICAgICAgICAgIFdFQlNPQ0tFVF9NRVRBLFxuICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4jYXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICdPcGVuQUktQmV0YSc6ICdyZWFsdGltZT12MScsXG4gICAgICAgICAgICAgICAgICAgIC4uLkhFQURFUlMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCh0aGlzLiN1cmwsIHdlYnNvY2tldEFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGluZycsXG4gICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChtZXNzYWdlKTtcbiAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvLmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHBhcnNlZC5jb250ZW50X2luZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSBwYXJzZWQuaXRlbV9pZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXNwb25zZSBzdGFydCB0aW1lc3RhbXAgaXMgbm90IHNldCwgd2Ugc2V0IGl0IHRvIHRoZSBjdXJyZW50IHRpbWUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGVsYXBzZWQgdGltZSBmb3IgaW50ZXJydXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmYgPSBiYXNlNjRUb0FycmF5QnVmZmVyKHBhcnNlZC5kZWx0YSk7XG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhdWRpbyBsZW5ndGggaW4gbWlsbGlzZWNvbmRzIGFzc3VtaW5nIDI0a0h6IHBjbTE2bGVcbiAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjsgLy8gMjRrSHogKiAyIGJ5dGVzIHBlciBzYW1wbGVcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0V2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBidWZmLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2VfaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkF1ZGlvKGF1ZGlvRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0YXJ0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhY2luZ0NvbmZpZyA9IHBhcnNlZC5zZXNzaW9uLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHR1cm4gb24gdHJhY2luZyBhZnRlciB0aGUgc2Vzc2lvbiBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyhzZXNzaW9uQ29uZmlnLnRyYWNpbmcgPz8gJ2F1dG8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBjb25zdCBtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gdGhpcy5jdXJyZW50TW9kZWw7XG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMuI2FwaUtleSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleShvcHRpb25zKTtcbiAgICAgICAgdGhpcy4jdXJsID1cbiAgICAgICAgICAgIG9wdGlvbnMudXJsID8/XG4gICAgICAgICAgICAgICAgYHdzczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lP21vZGVsPSR7dGhpcy5jdXJyZW50TW9kZWx9YDtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyhzZXNzaW9uQ29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgc3RyaW5naWZ5IHRoZSBldmVudCBhbmQgc2VuZCBpdCBkaXJlY3RseSB0byB0aGVcbiAgICAgKiBBUEkuIFRoaXMgY2FuIGJlIHVzZWQgaWYgeW91IHdhbnQgdG8gdGFrZSBjb250cm9sIG92ZXIgdGhlIGNvbm5lY3Rpb24gYW5kIHNlbmQgZXZlbnRzIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgd2lsbCBhbHNvIHJlc2V0IGFueSBpbnRlcm5hbCBjb25uZWN0aW9uIHRyYWNraW5nIHVzZWQgZm9yIGludGVycnVwdGlvbiBoYW5kbGluZy5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jc3RhdGUud2Vic29ja2V0Py5jbG9zZSgpO1xuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaWxsIHRocm93IGFuIGVycm9yIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IHN1cHBvcnQgbXV0aW5nLlxuICAgICAqL1xuICAgIG11dGUoX211dGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTXV0ZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydC4gWW91IGhhdmUgdG8gbXV0ZSB0aGUgYXVkaW8gaW5wdXQgeW91cnNlbGYuJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYXVkaW8gYnVmZmVyIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgaXMgdXNlZCBmb3IgeW91ciBjbGllbnQgdG8gc2VuZCBhdWRpbyB0byB0aGVcbiAgICAgKiBtb2RlbCB0byByZXNwb25kLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHN1cGVyLnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIGNhbmNlbCByZXNwb25zZSBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgdG8gY2FuY2VsIGFuIG9uZ29pbmdcbiAgICAgKiAgcmVzcG9uc2UgdGhhdCB0aGUgbW9kZWwgaXMgY3VycmVudGx5IGdlbmVyYXRpbmcuXG4gICAgICovXG4gICAgX2NhbmNlbFJlc3BvbnNlKCkge1xuICAgICAgICAvLyBjYW5jZWwgdGhlIG9uZ29pbmcgcmVzcG9uc2VcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEbyBOT1QgY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseS4gQ2FsbCBgaW50ZXJydXB0KClgIGluc3RlYWQgZm9yIHByb3BlciBpbnRlcnJ1cHRpb24gaGFuZGxpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlbmQgdGhlIHJpZ2h0IGV2ZW50cyB0byB0aGUgQVBJIHRvIGluZm9ybSB0aGUgbW9kZWwgdGhhdCB0aGUgdXNlciBoYXNcbiAgICAgKiBpbnRlcnJ1cHRlZCB0aGUgcmVzcG9uc2UuIEl0IG1pZ2h0IGJlIG92ZXJyaWRkZW4vZXh0ZW5kZWQgYnkgYW4gZXh0ZW5kZWQgdHJhbnNwb3J0IGxheWVyLiBTZWVcbiAgICAgKiB0aGUgYFR3aWxpb1JlYWx0aW1lVHJhbnNwb3J0TGF5ZXJgIGZvciBhbiBleGFtcGxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVsYXBzZWRUaW1lIC0gVGhlIGVsYXBzZWQgdGltZSBzaW5jZSB0aGUgcmVzcG9uc2Ugc3RhcnRlZC5cbiAgICAgKi9cbiAgICBfaW50ZXJydXB0KGVsYXBzZWRUaW1lKSB7XG4gICAgICAgIC8vIGltbWVkaWF0ZWx5IGVtaXQgdGhpcyBldmVudCBzbyB0aGUgY2xpZW50IGNhbiBzdG9wIHBsYXlpbmcgYXVkaW9cbiAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19pbnRlcnJ1cHRlZCcpO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGUnLFxuICAgICAgICAgICAgaXRlbV9pZDogdGhpcy4jY3VycmVudEl0ZW1JZCxcbiAgICAgICAgICAgIGNvbnRlbnRfaW5kZXg6IHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCxcbiAgICAgICAgICAgIGF1ZGlvX2VuZF9tczogZWxhcHNlZFRpbWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIG9uZ29pbmcgcmVzcG9uc2UuIFRoaXMgbWV0aG9kIGlzIHRyaWdnZXJlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjbGllbnQgd2hlblxuICAgICAqIHZvaWNlIGFjdGl2aXR5IGRldGVjdGlvbiAoVkFEKSBpcyBlbmFibGVkIChkZWZhdWx0KSBhcyB3ZWxsIGFzIHdoZW4gYW4gb3V0cHV0IGd1YXJkcmFpbCBnb3RcbiAgICAgKiB0cmlnZ2VyZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGFsc28gY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseSBpZiB5b3Ugd2FudCB0byBpbnRlcnJ1cHQgdGhlIGNvbnZlcnNhdGlvbiBmb3IgZXhhbXBsZVxuICAgICAqIGJhc2VkIG9uIGFuIGV2ZW50IGluIHRoZSBjbGllbnQuXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICBpZiAoIXRoaXMuI2N1cnJlbnRJdGVtSWQgfHwgdHlwZW9mIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FuY2VsUmVzcG9uc2UoKTtcbiAgICAgICAgY29uc3QgZWxhcHNlZFRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcDtcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lID49IDAgJiYgZWxhcHNlZFRpbWUgPCB0aGlzLl9hdWRpb0xlbmd0aE1zKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnRlcnJ1cHQoZWxhcHNlZFRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzLm1hcCIsImltcG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgUnVuQ29udGV4dCwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCwgdG9TbWFydFN0cmluZyB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuaW1wb3J0IHsgZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwsIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlLCBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViUlRDIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlLCBoYXNXZWJSVENTdXBwb3J0LCB1cGRhdGVSZWFsdGltZUhpc3RvcnksIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogQSBgUmVhbHRpbWVTZXNzaW9uYCBpcyB0aGUgY29ybmVyIHBpZWNlIG9mIGJ1aWxkaW5nIFZvaWNlIEFnZW50cy4gSXQncyB0aGUgZXF1aXZhbGVudCBvZiBhXG4gKiBSdW5uZXIgaW4gdGV4dC1iYXNlZCBhZ2VudHMgZXhjZXB0IHRoYXQgaXQgYXV0b21hdGljYWxseSBoYW5kbGVzIG11bHRpcGxlIHR1cm5zIGJ5IG1haW50YWluaW5nIGFcbiAqIGNvbm5lY3Rpb24gd2l0aCB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXIuXG4gKlxuICogVGhlIHNlc3Npb24gaGFuZGxlcyBtYW5hZ2luZyB0aGUgbG9jYWwgaGlzdG9yeSBjb3B5LCBleGVjdXRlcyB0b29scywgcnVucyBvdXRwdXQgZ3VhcmRyYWlscywgYW5kXG4gKiBmYWNpbGl0aWVzIGhhbmRvZmZzLlxuICpcbiAqIFRoZSBhY3R1YWwgYXVkaW8gaGFuZGxpbmcgYW5kIGdlbmVyYXRpb24gb2YgbW9kZWwgcmVzcG9uc2VzIGlzIGhhbmRsZWQgYnkgdGhlIHVuZGVybHlpbmdcbiAqIHRyYW5zcG9ydCBsYXllci4gQnkgZGVmYXVsdCBpZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciB3aXRoIFdlYlJUQyBzdXBwb3J0LCB0aGUgc2Vzc2lvbiB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IHVzZSB0aGUgV2ViUlRDIHZlcnNpb24gb2YgdGhlIE9wZW5BSSBSZWFsdGltZSBBUEkuIE9uIHRoZSBzZXJ2ZXIgb3IgaWYgeW91IHBhc3NcbiAqIGB3ZWJzb2NrZXRgIGFzIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIHRoZSBzZXNzaW9uIHdpbGwgZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB1c2luZyBXZWJTb2NrZXRzLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIFdlYlJUQywgaW4gdGhlIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKlxuICogWW91IGNhbiBhbHNvIGNyZWF0ZSBhIHRyYW5zcG9ydCBsYXllciBpbnN0YW5jZSB5b3Vyc2VsZiBhbmQgcGFzcyBpdCBpbiB0byBoYXZlIG1vcmUgY29udHJvbCBvdmVyXG4gKiB0aGUgY29uZmlndXJhdGlvbiBvciBldmVuIGV4dGVuZCB0aGUgZXhpc3Rpbmcgb25lcy4gQ2hlY2sgb3V0IHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmBcbiAqIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBjcmVhdGUgYSBjdXN0b20gdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogc2Vzc2lvbi5jb25uZWN0KHtcbiAqICAgYXBpS2V5OiAneW91ci1hcGkta2V5JyxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZVNlc3Npb24gZXh0ZW5kcyBSdW50aW1lRXZlbnRFbWl0dGVyIHtcbiAgICBpbml0aWFsQWdlbnQ7XG4gICAgb3B0aW9ucztcbiAgICAjdHJhbnNwb3J0O1xuICAgICNjdXJyZW50QWdlbnQ7XG4gICAgI2N1cnJlbnRUb29scyA9IFtdO1xuICAgICNjb250ZXh0O1xuICAgICNvdXRwdXRHdWFyZHJhaWxzID0gW107XG4gICAgI291dHB1dEd1YXJkcmFpbFNldHRpbmdzO1xuICAgICN0cmFuc2NyaWJlZFRleHREZWx0YXMgPSB7fTtcbiAgICAjaGlzdG9yeSA9IFtdO1xuICAgICNzaG91bGRJbmNsdWRlQXVkaW9EYXRhO1xuICAgICNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsID0ge307XG4gICAgY29uc3RydWN0b3IoaW5pdGlhbEFnZW50LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsQWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIGlmICgodHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJyAmJiBoYXNXZWJSVENTdXBwb3J0KCkpIHx8XG4gICAgICAgICAgICBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3dlYnJ0YycpIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVdlYlJUQygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2Vic29ja2V0JyB8fFxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBvcHRpb25zLnRyYW5zcG9ydDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMuI2NvbnRleHQgPSBuZXcgUnVuQ29udGV4dCh7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5jb250ZXh0ID8/IHt9KSxcbiAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMuI2hpc3RvcnksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxzID0gKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPSBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPz8ge30pO1xuICAgICAgICB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhID0gb3B0aW9ucy5oaXN0b3J5U3RvcmVBdWRpbyA/PyBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zcG9ydCBsYXllciB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB0cmFuc3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGFnZW50IGluIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHVzYWdlIG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbnRleHQgb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLiBNaWdodCBiZSBgbnVsbGAgaWYgdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90XG4gICAgICogc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhbnNwb3J0Lm11dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hpc3Rvcnk7XG4gICAgfVxuICAgIGFzeW5jICNzZXRDdXJyZW50QWdlbnQoYWdlbnQpIHtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50ID0gYWdlbnQ7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZzID0gdGhpcy4jY3VycmVudEFnZW50LmhhbmRvZmZzLm1hcChnZXRIYW5kb2ZmKTtcbiAgICAgICAgY29uc3QgaGFuZG9mZlRvb2xzID0gaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiBoYW5kb2ZmLmdldEhhbmRvZmZBc0Z1bmN0aW9uVG9vbCgpKTtcbiAgICAgICAgdGhpcy4jY3VycmVudFRvb2xzID0gW1xuICAgICAgICAgICAgLi4uKGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scygpKS5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyksXG4gICAgICAgICAgICAuLi5oYW5kb2ZmVG9vbHMsXG4gICAgICAgIF07XG4gICAgfVxuICAgIGFzeW5jICNnZXRTZXNzaW9uQ29uZmlnKGFkZGl0aW9uYWxDb25maWcgPSB7fSkge1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdGhpcy5vcHRpb25zXG4gICAgICAgICAgICAudHJhY2luZ0Rpc2FibGVkXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogdGhpcy5vcHRpb25zLndvcmtmbG93TmFtZVxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6ICdhdXRvJztcbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgIT09IG51bGwgJiYgdHJhY2luZ0NvbmZpZyAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLmdyb3VwX2lkID0gdGhpcy5vcHRpb25zLmdyb3VwSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLm1ldGFkYXRhID0gdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQgfHwgdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdJbiBvcmRlciB0byBzZXQgdHJhY2VNZXRhZGF0YSBvciBhIGdyb3VwSWQgeW91IG5lZWQgdG8gc3BlY2lmeSBhIHdvcmtmbG93TmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgdm9pY2U6IHRoaXMuI2N1cnJlbnRBZ2VudC52b2ljZSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICB0b29sczogdGhpcy4jY3VycmVudFRvb2xzLFxuICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIC4uLmFkZGl0aW9uYWxDb25maWcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUFnZW50KG5ld0FnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgaGFuZG9mZikge1xuICAgICAgICBjb25zdCBuZXdBZ2VudCA9IChhd2FpdCBoYW5kb2ZmLm9uSW52b2tlSGFuZG9mZih0aGlzLiNjb250ZXh0LCB0b29sQ2FsbC5hcmd1bWVudHMpKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICAvLyB1cGRhdGUgc2Vzc2lvbiB3aXRoIG5ldyBhZ2VudFxuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQobmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQudXBkYXRlU2Vzc2lvbkNvbmZpZyhhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKCkpO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBnZXRUcmFuc2Zlck1lc3NhZ2UobmV3QWdlbnQpO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgb3V0cHV0LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgdG9vbCkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgIGlmICh0b29sLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2wucGFyYW1ldGVycy5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBKU09OLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSBhd2FpdCB0b29sLm5lZWRzQXBwcm92YWwodGhpcy4jY29udGV4dCwgcGFyc2VkQXJncywgdG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKG5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gdGhpcy5jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIHJlc3VsdCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2wsXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbENhbGwsIHRoaXMuI2N1cnJlbnRBZ2VudCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCk7XG4gICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLiNoaXN0b3J5KSk7IC8vIGRlZXAgY29weSBvZiB0aGUgaGlzdG9yeVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b29sLmludm9rZSh0aGlzLiNjb250ZXh0LCB0b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBzdHJpbmdSZXN1bHQsIHRydWUpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCBzdHJpbmdSZXN1bHQpO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCBzdHJpbmdSZXN1bHQpO1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25DYWxsKHRvb2xDYWxsKSB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZNYXAgPSBuZXcgTWFwKHRoaXMuI2N1cnJlbnRBZ2VudC5oYW5kb2Zmc1xuICAgICAgICAgICAgLm1hcChnZXRIYW5kb2ZmKVxuICAgICAgICAgICAgLm1hcCgoaGFuZG9mZikgPT4gW2hhbmRvZmYudG9vbE5hbWUsIGhhbmRvZmZdKSk7XG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbE1hcCA9IG5ldyBNYXAoKGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scygpKS5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlSGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgICAgICBpZiAocG9zc2libGVIYW5kb2ZmKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVIYW5kb2ZmKHRvb2xDYWxsLCBwb3NzaWJsZUhhbmRvZmYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sID0gZnVuY3Rpb25Ub29sTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgICAgIGlmIChmdW5jdGlvblRvb2wgJiYgZnVuY3Rpb25Ub29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKHRvb2xDYWxsLCBmdW5jdGlvblRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke3Rvb2xDYWxsLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNydW5PdXRwdXRHdWFyZHJhaWxzKG91dHB1dCwgcmVzcG9uc2VJZCkge1xuICAgICAgICBpZiAodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuI2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgIGFnZW50T3V0cHV0OiBvdXRwdXQsXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLiNjb250ZXh0LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5tYXAoKGd1YXJkcmFpbCkgPT4gZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKSkpO1xuICAgICAgICBjb25zdCBmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkID0gcmVzdWx0cy5maW5kKChyZXN1bHQpID0+IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICBpZiAoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgLy8gdGhpcyBlbnN1cmVzIHRoYXQgaWYgb25lIGd1YXJkcmFpbCBhbHJlYWR5IHRyaXBzIGFuZCB3ZSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhbm90aGVyXG4gICAgICAgICAgICAvLyBndWFyZHJhaWwgcnVuLCB3ZSBkb24ndCB0cmlwIGFnYWluXG4gICAgICAgICAgICBpZiAodGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWxbcmVzcG9uc2VJZF0gPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYE91dHB1dCBndWFyZHJhaWwgdHJpZ2dlcmVkOiAke0pTT04uc3RyaW5naWZ5KGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQub3V0cHV0Lm91dHB1dEluZm8pfWAsIGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdndWFyZHJhaWxfdHJpcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZlZWRiYWNrVGV4dCA9IGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShmZWVkYmFja1RleHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgICNzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCcqJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3RyYW5zcG9ydF9ldmVudCcsIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW8nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3R1cm5fc3RhcnRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9kb25lJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZXZlbnQucmVzcG9uc2Uub3V0cHV0W2V2ZW50LnJlc3BvbnNlLm91dHB1dC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IHRleHRPdXRwdXQgPSBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkgPz8gJyc7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdGV4dE91dHB1dCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGV4dE91dHB1dCk7XG4gICAgICAgICAgICB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHRleHRPdXRwdXQsIGV2ZW50LnJlc3BvbnNlLmlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fZG9uZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fc3RvcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgbGV0IGxhc3RJdGVtSWQ7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fdHJhbnNjcmlwdF9kZWx0YScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50Lml0ZW1JZDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUlkID0gZXZlbnQucmVzcG9uc2VJZDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW1JZCAhPT0gaXRlbUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RJdGVtSWQgPSBpdGVtSWQ7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSdW5JbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUZXh0ID0gdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IGN1cnJlbnRUZXh0ICsgZGVsdGE7XG4gICAgICAgICAgICAgICAgdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPSBuZXdUZXh0O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UnVuSW5kZXggPSBNYXRoLmZsb29yKG5ld1RleHQubGVuZ3RoIC8gdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UnVuSW5kZXggPiBsYXN0UnVuSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gbmV3UnVuSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGNhbmNlbCBleGlzdGluZyBydW5zIGJlY2F1c2Ugd2Ugd2FudCB0aGUgZmlyc3Qgb25lIHRvIGZhaWwgdG8gZmFpbFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNwb3J0IGxheWVyIHNob3VsZCB1cG9uIGZhaWx1cmUgaGFuZGxlIHRoZSBpbnRlcnJ1cHRpb24gYW5kIHN0b3AgdGhlIG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb20gZ2VuZXJhdGluZyBmdXJ0aGVyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHMobmV3VGV4dCwgcmVzcG9uc2VJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2l0ZW1fdXBkYXRlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gIXRoaXMuI2hpc3Rvcnkuc29tZSgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSh0aGlzLiNoaXN0b3J5LCBldmVudCwgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIGlmIChpc05ldykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRlZEl0ZW0gPSB0aGlzLiNoaXN0b3J5LmZpbmQoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfYWRkZWQnLCBhZGRlZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV9kZWxldGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2hpc3RvcnkgPSB0aGlzLiNoaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pdGVtSWQgIT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZnVuY3Rpb25fY2FsbCcsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvbkNhbGwoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBoYW5kbGluZyBmdW5jdGlvbiBjYWxsJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd1c2FnZV91cGRhdGUnLCAodXNhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbnRleHQudXNhZ2UuYWRkKHVzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9faW50ZXJydXB0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2ludGVycnVwdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllclxuICAgICAqIGFuZCBzdGFydCB0aGUgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEFmdGVyIGNvbm5lY3RpbmcsIHRoZSBzZXNzaW9uIHdpbGwgYWxzbyBlbWl0IGEgYGhpc3RvcnlfdXBkYXRlZGAgZXZlbnQgd2l0aCBhbiBlbXB0eSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIC8vIG1ha2VzIHN1cmUgdGhlIGN1cnJlbnQgYWdlbnQgaXMgY29ycmVjdGx5IHNldCBhbmQgbG9hZHMgdGhlIHRvb2xzXG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudCh0aGlzLmluaXRpYWxBZ2VudCk7XG4gICAgICAgIHRoaXMuI3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC5jb25uZWN0KHtcbiAgICAgICAgICAgIGFwaUtleTogb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy5vcHRpb25zLmFwaUtleSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICBpbml0aWFsU2Vzc2lvbkNvbmZpZzogYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZyh0aGlzLm9wdGlvbnMuY29uZmlnKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2hpc3RvcnkgPSBbXTtcbiAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IHRvIHNldC5cbiAgICAgKi9cbiAgICB1cGRhdGVIaXN0b3J5KG5ld0hpc3RvcnkpIHtcbiAgICAgICAgbGV0IHVwZGF0ZWRIaXN0b3J5O1xuICAgICAgICBpZiAodHlwZW9mIG5ld0hpc3RvcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeSh0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN0cmFuc3BvcnQucmVzZXRIaXN0b3J5KHRoaXMuI2hpc3RvcnksIHVwZGF0ZWRIaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvdGhlckV2ZW50RGF0YSAtIEFkZGl0aW9uYWwgZXZlbnQgZGF0YSB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQubXV0ZShtdXRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3QgZnJvbSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhdWRpbyB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jb21taXQgLSBXaGV0aGVyIHRvIGZpbmlzaCB0aGUgdHVybiB3aXRoIHRoaXMgYXVkaW8uXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgc2Vzc2lvbiBhcnRpZmljaWFsbHkgZm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgdG8gYnVpbGQgYSBcInN0b3AgdGFsa2luZ1wiXG4gICAgICogYnV0dG9uLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmludGVycnVwdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c0FwcHJvdmUgLSBXaGV0aGVyIHRvIGFsd2F5cyBhcHByb3ZlIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmIHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7YXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzUmVqZWN0IC0gV2hldGhlciB0byBhbHdheXMgcmVqZWN0IHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHRvIHNpbXVsYXRlIGEgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudCB0byBsZXQgdGhlIGFnZW50IGtub3dcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke2FwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVTZXNzaW9uLm1qcy5tYXAiLCJpbXBvcnQgKiBhcyB1dGlsSW1wb3J0IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVBZ2VudCB9IGZyb20gXCIuL3JlYWx0aW1lQWdlbnQubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZVNlc3Npb24sIH0gZnJvbSBcIi4vcmVhbHRpbWVTZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmV4cG9ydCBjb25zdCB1dGlscyA9IHtcbiAgICBiYXNlNjRUb0FycmF5QnVmZmVyOiB1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIsXG4gICAgYXJyYXlCdWZmZXJUb0Jhc2U2NDogdXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0LFxuICAgIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZTogdXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsXG59O1xuZXhwb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgdG9vbCwgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6WyJNRVRBREFUQSIsImJhc2U2NFRvQXJyYXlCdWZmZXIiLCJiYXNlNjQiLCJiaW5hcnlTdHJpbmciLCJsZW4iLCJieXRlcyIsImkiLCJhcnJheUJ1ZmZlclRvQmFzZTY0IiwiYXJyYXlCdWZmZXIiLCJnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UiLCJpdGVtIiwibGFzdENvbnRlbnRJdGVtIiwiZGlmZlJlYWx0aW1lSGlzdG9yeSIsIm9sZEhpc3RvcnkiLCJuZXdIaXN0b3J5IiwicmVtb3ZhbHMiLCJuZXdJdGVtIiwiYWRkaXRpb25zIiwib2xkSXRlbSIsInVwZGF0ZXMiLCJoYXNXZWJSVENTdXBwb3J0IiwicmVtb3ZlQXVkaW9Gcm9tQ29udGVudCIsImVudHJ5IiwidXBkYXRlUmVhbHRpbWVIaXN0b3J5IiwiaGlzdG9yeSIsImV2ZW50Iiwic2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsIm5ld0V2ZW50IiwiZXhpc3RpbmdJbmRleCIsImlkeCIsInByZXZJbmRleCIsIkhFQURFUlMiLCJXRUJTT0NLRVRfTUVUQSIsInNhZmVFeGVjdXRlIiwiZm4iLCJlcnJvciIsIm1ha2VQYXJzZWFibGVUZXh0Rm9ybWF0IiwicmVzcG9uc2VfZm9ybWF0IiwicGFyc2VyIiwib2JqIiwiaWdub3JlT3ZlcnJpZGUiLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwib3B0aW9ucyIsInpvZERlZiIsInpvZFNjaGVtYSIsImlzRW1wdHlPYmoiLCJfayIsImdldFJlZnMiLCJfb3B0aW9ucyIsImN1cnJlbnRQYXRoIiwibmFtZSIsImRlZiIsImFkZEVycm9yTWVzc2FnZSIsInJlcyIsImtleSIsImVycm9yTWVzc2FnZSIsInJlZnMiLCJzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIiwidmFsdWUiLCJ1dGlsIiwiXyIsImFzc2VydElzIiwiX2FyZyIsImFzc2VydE5ldmVyIiwiX3giLCJpdGVtcyIsInZhbGlkS2V5cyIsImsiLCJmaWx0ZXJlZCIsImUiLCJvYmplY3QiLCJrZXlzIiwiYXJyIiwiY2hlY2tlciIsInZhbCIsImpvaW5WYWx1ZXMiLCJhcnJheSIsInNlcGFyYXRvciIsIm9iamVjdFV0aWwiLCJmaXJzdCIsInNlY29uZCIsInV0aWwkMSIsIlpvZEVycm9yIiwiaXNzdWVzIiwic3ViIiwic3VicyIsImFjdHVhbFByb3RvIiwiX21hcHBlciIsIm1hcHBlciIsImlzc3VlIiwiZmllbGRFcnJvcnMiLCJwcm9jZXNzRXJyb3IiLCJjdXJyIiwiZWwiLCJmb3JtRXJyb3JzIiwiZXJyb3JVdGlsIiwibWVzc2FnZSIsIlpvZEZpcnN0UGFydHlUeXBlS2luZCIsInBhcnNlQW55RGVmIiwicGFyc2VBcnJheURlZiIsIl9iIiwiX2EiLCJwYXJzZURlZiIsInBhcnNlQmlnaW50RGVmIiwiY2hlY2siLCJwYXJzZUJvb2xlYW5EZWYiLCJwYXJzZUJyYW5kZWREZWYiLCJfZGVmIiwicGFyc2VDYXRjaERlZiIsInBhcnNlRGF0ZURlZiIsIm92ZXJyaWRlRGF0ZVN0cmF0ZWd5Iiwic3RyYXRlZ3kiLCJpbnRlZ2VyRGF0ZVBhcnNlciIsInBhcnNlRGVmYXVsdERlZiIsInBhcnNlRWZmZWN0c0RlZiIsImZvcmNlUmVzb2x1dGlvbiIsInBhcnNlRW51bURlZiIsImlzSnNvblNjaGVtYTdBbGxPZlR5cGUiLCJ0eXBlIiwicGFyc2VJbnRlcnNlY3Rpb25EZWYiLCJhbGxPZiIsIngiLCJ1bmV2YWx1YXRlZFByb3BlcnRpZXMiLCJtZXJnZWRBbGxPZiIsInNjaGVtYSIsIm5lc3RlZFNjaGVtYSIsImFkZGl0aW9uYWxQcm9wZXJ0aWVzIiwicmVzdCIsInBhcnNlTGl0ZXJhbERlZiIsInBhcnNlZFR5cGUiLCJlbW9qaVJlZ2V4Iiwiem9kUGF0dGVybnMiLCJwYXJzZVN0cmluZ0RlZiIsInByb2Nlc3NQYXR0ZXJuIiwiZXNjYXBlTm9uQWxwaGFOdW1lcmljIiwiYWRkRm9ybWF0IiwiYWRkUGF0dGVybiIsImMiLCJyZWdleCIsInByb2Nlc3NSZWdFeHAiLCJyZWdleE9yRnVuY3Rpb24iLCJmbGFncyIsInNvdXJjZSIsInBhdHRlcm4iLCJpc0VzY2FwZWQiLCJpbkNoYXJHcm91cCIsImluQ2hhclJhbmdlIiwicmVnZXhUZXN0IiwicGFyc2VSZWNvcmREZWYiLCJhY2MiLCJfYyIsImtleVR5cGUiLCJfZCIsInBhcnNlTWFwRGVmIiwidmFsdWVzIiwicGFyc2VOYXRpdmVFbnVtRGVmIiwiYWN0dWFsVmFsdWVzIiwicGFyc2VkVHlwZXMiLCJwYXJzZU5ldmVyRGVmIiwicGFyc2VOdWxsRGVmIiwicHJpbWl0aXZlTWFwcGluZ3MiLCJwYXJzZVVuaW9uRGVmIiwiYXNBbnlPZiIsInR5cGVzIiwidW5pcXVlVHlwZXMiLCJhIiwiYW55T2YiLCJwYXJzZU51bGxhYmxlRGVmIiwiYmFzZSIsInBhcnNlTnVtYmVyRGVmIiwiZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZU9iamVjdERlZiIsInJlc3VsdCIsInByb3BOYW1lIiwicHJvcERlZiIsInByb3BlcnR5UGF0aCIsInBhcnNlZERlZiIsInBhcnNlT3B0aW9uYWxEZWYiLCJpbm5lclNjaGVtYSIsInBhcnNlUGlwZWxpbmVEZWYiLCJiIiwicGFyc2VQcm9taXNlRGVmIiwicGFyc2VTZXREZWYiLCJwYXJzZVR1cGxlRGVmIiwicGFyc2VVbmRlZmluZWREZWYiLCJwYXJzZVVua25vd25EZWYiLCJwYXJzZVJlYWRvbmx5RGVmIiwic2Vlbkl0ZW0iLCJvdmVycmlkZVJlc3VsdCIsInNlZW5TY2hlbWEiLCJnZXQkcmVmIiwianNvblNjaGVtYSIsInNlbGVjdFBhcnNlciIsImFkZE1ldGEiLCJnZXRSZWxhdGl2ZVBhdGgiLCJpbmRleCIsInBhdGhBIiwicGF0aEIiLCJ0eXBlTmFtZSIsInpvZFRvSnNvblNjaGVtYSIsIm1haW4iLCJ0aXRsZSIsImRlZmluaXRpb25zIiwicHJvY2Vzc2VkRGVmaW5pdGlvbnMiLCJuZXdEZWZpbml0aW9ucyIsImNvbWJpbmVkIiwibWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCIsInRvb2wiLCJjYWxsYmFjayIsIl96b2RUb0pzb25TY2hlbWEiLCJ6b2RUZXh0Rm9ybWF0Iiwiem9kT2JqZWN0IiwicHJvcHMiLCJjb250ZW50Iiwiem9kUmVzcG9uc2VzRnVuY3Rpb24iLCJhcmdzIiwiQWdlbnRzRXJyb3IiLCJzdGF0ZSIsIl9fcHVibGljRmllbGQiLCJTeXN0ZW1FcnJvciIsIk1heFR1cm5zRXhjZWVkZWRFcnJvciIsIk1vZGVsQmVoYXZpb3JFcnJvciIsIlVzZXJFcnJvciIsIkd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIiwiVG9vbENhbGxFcnJvciIsIklucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQiLCJPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsImlzWm9kT2JqZWN0IiwiaW5wdXQiLCJpc0FnZW50VG9vbElucHV0IiwidG9GdW5jdGlvblRvb2xOYW1lIiwiZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSIsImlucHV0VHlwZSIsImZvcm1hdHRlZEZ1bmN0aW9uIiwiY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIiwib3V0cHV0VHlwZSIsIm91dHB1dCIsInMiLCJtIiwiaCIsImQiLCJ3IiwieSIsIm1zIiwicGFyc2UiLCJmbXRMb25nIiwiZm10U2hvcnQiLCJzdHIiLCJtYXRjaCIsIm4iLCJtc0FicyIsInBsdXJhbCIsImlzUGx1cmFsIiwic2V0dXAiLCJlbnYiLCJjcmVhdGVEZWJ1ZyIsImNvZXJjZSIsImRpc2FibGUiLCJlbmFibGUiLCJlbmFibGVkIiwicmVxdWlyZSQkMCIsImRlc3Ryb3kiLCJzZWxlY3RDb2xvciIsIm5hbWVzcGFjZSIsImhhc2giLCJwcmV2VGltZSIsImVuYWJsZU92ZXJyaWRlIiwibmFtZXNwYWNlc0NhY2hlIiwiZW5hYmxlZENhY2hlIiwiZGVidWciLCJzZWxmIiwiZm9ybWF0IiwiZm9ybWF0dGVyIiwiZXh0ZW5kIiwidiIsImRlbGltaXRlciIsIm5ld0RlYnVnIiwibmFtZXNwYWNlcyIsInNwbGl0IiwibnMiLCJtYXRjaGVzVGVtcGxhdGUiLCJzZWFyY2giLCJ0ZW1wbGF0ZSIsInNlYXJjaEluZGV4IiwidGVtcGxhdGVJbmRleCIsInN0YXJJbmRleCIsIm1hdGNoSW5kZXgiLCJza2lwIiwiY29tbW9uIiwiZXhwb3J0cyIsImZvcm1hdEFyZ3MiLCJzYXZlIiwibG9hZCIsInVzZUNvbG9ycyIsImxvY2Fsc3RvcmFnZSIsIndhcm5lZCIsIm1vZHVsZSIsImxhc3RDIiwiciIsImZvcm1hdHRlcnMiLCJsb2FkRW52IiwiX2xvYWRFbnYiLCJpc0VuYWJsZWQiLCJmbGFnTmFtZSIsInRyYWNpbmciLCJsb2dnaW5nIiwiZG9udExvZ01vZGVsRGF0YSIsImRvbnRMb2dUb29sRGF0YSIsImdldExvZ2dlciIsImxvZ2dlciIsInRvU21hcnRTdHJpbmciLCJkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24iLCJjb250ZXh0IiwidG9vbEVycm9yRnVuY3Rpb24iLCJzdHJpY3RNb2RlIiwicGFyYW1ldGVycyIsIl9pbnZva2UiLCJydW5Db250ZXh0IiwicGFyc2VkIiwic3RyaW5nUmVzdWx0IiwiaW52b2tlIiwiY3VycmVudFNwYW4iLCJnZXRDdXJyZW50U3BhbiIsIm5lZWRzQXBwcm92YWwiLCJab2RQYXJzZWRUeXBlIiwiZ2V0UGFyc2VkVHlwZSIsImRhdGEiLCJab2RJc3N1ZUNvZGUiLCJlcnJvck1hcCIsIl9jdHgiLCJvdmVycmlkZUVycm9yTWFwIiwiZGVmYXVsdEVycm9yTWFwIiwiZ2V0RXJyb3JNYXAiLCJtYWtlSXNzdWUiLCJwYXJhbXMiLCJwYXRoIiwiZXJyb3JNYXBzIiwiaXNzdWVEYXRhIiwiZnVsbFBhdGgiLCJmdWxsSXNzdWUiLCJtYXBzIiwibWFwIiwiYWRkSXNzdWVUb0NvbnRleHQiLCJjdHgiLCJvdmVycmlkZU1hcCIsIlBhcnNlU3RhdHVzIiwic3RhdHVzIiwicmVzdWx0cyIsImFycmF5VmFsdWUiLCJJTlZBTElEIiwicGFpcnMiLCJzeW5jUGFpcnMiLCJwYWlyIiwiZmluYWxPYmplY3QiLCJESVJUWSIsIk9LIiwiaXNBYm9ydGVkIiwiaXNEaXJ0eSIsImlzVmFsaWQiLCJpc0FzeW5jIiwiUGFyc2VJbnB1dExhenlQYXRoIiwicGFyZW50IiwiaGFuZGxlUmVzdWx0IiwicHJvY2Vzc0NyZWF0ZVBhcmFtcyIsImludmFsaWRfdHlwZV9lcnJvciIsInJlcXVpcmVkX2Vycm9yIiwiZGVzY3JpcHRpb24iLCJpc3MiLCJab2RUeXBlIiwiZXJyIiwibWF5YmVBc3luY1Jlc3VsdCIsImdldElzc3VlUHJvcGVydGllcyIsInNldEVycm9yIiwicmVmaW5lbWVudERhdGEiLCJyZWZpbmVtZW50IiwiWm9kRWZmZWN0cyIsIlpvZE9wdGlvbmFsIiwiWm9kTnVsbGFibGUiLCJab2RBcnJheSIsIlpvZFByb21pc2UiLCJvcHRpb24iLCJab2RVbmlvbiIsImluY29taW5nIiwiWm9kSW50ZXJzZWN0aW9uIiwidHJhbnNmb3JtIiwiZGVmYXVsdFZhbHVlRnVuYyIsIlpvZERlZmF1bHQiLCJab2RCcmFuZGVkIiwiY2F0Y2hWYWx1ZUZ1bmMiLCJab2RDYXRjaCIsIlRoaXMiLCJ0YXJnZXQiLCJab2RQaXBlbGluZSIsIlpvZFJlYWRvbmx5IiwiY3VpZFJlZ2V4IiwiY3VpZDJSZWdleCIsInVsaWRSZWdleCIsInV1aWRSZWdleCIsIm5hbm9pZFJlZ2V4Iiwiand0UmVnZXgiLCJkdXJhdGlvblJlZ2V4IiwiZW1haWxSZWdleCIsIl9lbW9qaVJlZ2V4IiwiaXB2NFJlZ2V4IiwiaXB2NENpZHJSZWdleCIsImlwdjZSZWdleCIsImlwdjZDaWRyUmVnZXgiLCJiYXNlNjRSZWdleCIsImJhc2U2NHVybFJlZ2V4IiwiZGF0ZVJlZ2V4U291cmNlIiwiZGF0ZVJlZ2V4IiwidGltZVJlZ2V4U291cmNlIiwic2Vjb25kc1JlZ2V4U291cmNlIiwic2Vjb25kc1F1YW50aWZpZXIiLCJ0aW1lUmVnZXgiLCJkYXRldGltZVJlZ2V4Iiwib3B0cyIsImlzVmFsaWRJUCIsImlwIiwidmVyc2lvbiIsImlzVmFsaWRKV1QiLCJqd3QiLCJhbGciLCJoZWFkZXIiLCJkZWNvZGVkIiwiaXNWYWxpZENpZHIiLCJab2RTdHJpbmciLCJ0b29CaWciLCJ0b29TbWFsbCIsInZhbGlkYXRpb24iLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJjaCIsIm1pbiIsIm1heCIsImZsb2F0U2FmZVJlbWFpbmRlciIsInN0ZXAiLCJ2YWxEZWNDb3VudCIsInN0ZXBEZWNDb3VudCIsImRlY0NvdW50IiwidmFsSW50Iiwic3RlcEludCIsIlpvZE51bWJlciIsImtpbmQiLCJpbmNsdXNpdmUiLCJab2RCaWdJbnQiLCJab2RCb29sZWFuIiwiWm9kRGF0ZSIsIm1pbkRhdGUiLCJtYXhEYXRlIiwiWm9kU3ltYm9sIiwiWm9kVW5kZWZpbmVkIiwiWm9kTnVsbCIsIlpvZEFueSIsIlpvZFVua25vd24iLCJab2ROZXZlciIsIlpvZFZvaWQiLCJkZWVwUGFydGlhbGlmeSIsIlpvZE9iamVjdCIsIm5ld1NoYXBlIiwiZmllbGRTY2hlbWEiLCJab2RUdXBsZSIsInNoYXBlIiwic2hhcGVLZXlzIiwiZXh0cmFLZXlzIiwia2V5VmFsaWRhdG9yIiwidW5rbm93bktleXMiLCJjYXRjaGFsbCIsImRlZmF1bHRFcnJvciIsImF1Z21lbnRhdGlvbiIsIm1lcmdpbmciLCJtYXNrIiwibmV3RmllbGQiLCJjcmVhdGVab2RFbnVtIiwiaGFuZGxlUmVzdWx0cyIsInVuaW9uRXJyb3JzIiwiY2hpbGRDdHgiLCJkaXJ0eSIsImdldERpc2NyaW1pbmF0b3IiLCJab2RMYXp5IiwiWm9kTGl0ZXJhbCIsIlpvZEVudW0iLCJab2ROYXRpdmVFbnVtIiwiWm9kRGlzY3JpbWluYXRlZFVuaW9uIiwiZGlzY3JpbWluYXRvciIsImRpc2NyaW1pbmF0b3JWYWx1ZSIsIm9wdGlvbnNNYXAiLCJkaXNjcmltaW5hdG9yVmFsdWVzIiwibWVyZ2VWYWx1ZXMiLCJhVHlwZSIsImJUeXBlIiwiYktleXMiLCJzaGFyZWRLZXlzIiwibmV3T2JqIiwic2hhcmVkVmFsdWUiLCJuZXdBcnJheSIsIml0ZW1BIiwiaXRlbUIiLCJoYW5kbGVQYXJzZWQiLCJwYXJzZWRMZWZ0IiwicGFyc2VkUmlnaHQiLCJtZXJnZWQiLCJsZWZ0IiwicmlnaHQiLCJpdGVtSW5kZXgiLCJzY2hlbWFzIiwiWm9kUmVjb3JkIiwidmFsdWVUeXBlIiwidGhpcmQiLCJab2RNYXAiLCJmaW5hbE1hcCIsIlpvZFNldCIsImZpbmFsaXplU2V0IiwiZWxlbWVudHMiLCJwYXJzZWRTZXQiLCJlbGVtZW50IiwibWluU2l6ZSIsIm1heFNpemUiLCJzaXplIiwiZ2V0dGVyIiwiZXhwZWN0ZWRWYWx1ZXMiLCJlbnVtVmFsdWVzIiwibmV3RGVmIiwib3B0IiwibmF0aXZlRW51bVZhbHVlcyIsInByb21pc2lmaWVkIiwiZWZmZWN0IiwiY2hlY2tDdHgiLCJhcmciLCJwcm9jZXNzZWQiLCJleGVjdXRlUmVmaW5lbWVudCIsImlubmVyIiwicHJlcHJvY2VzcyIsIm5ld0N0eCIsIlpvZE5hTiIsImluUmVzdWx0IiwiZnJlZXplIiwic3RyaW5nVHlwZSIsIm51bWJlclR5cGUiLCJib29sZWFuVHlwZSIsImFueVR5cGUiLCJhcnJheVR5cGUiLCJvYmplY3RUeXBlIiwidW5pb25UeXBlIiwiZGlzY3JpbWluYXRlZFVuaW9uVHlwZSIsInJlY29yZFR5cGUiLCJsYXp5VHlwZSIsImxpdGVyYWxUeXBlIiwiZW51bVR5cGUiLCJ6Lm9iamVjdCIsInouc3RyaW5nIiwiei5saXRlcmFsIiwiei5yZWNvcmQiLCJ6LmFueSIsInouYXJyYXkiLCJ6LmJvb2xlYW4iLCJnZXRBbGxNY3BGdW5jdGlvblRvb2xzIiwibWNwU2VydmVycyIsImNvbnZlcnRTY2hlbWFzVG9TdHJpY3QiLCJhbGxUb29scyIsInRvb2xOYW1lcyIsInNlcnZlciIsInNlcnZlclRvb2xzIiwiZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIiLCJpbnRlcnNlY3Rpb24iLCJ0IiwiX2NhY2hlZFRvb2xzIiwid2l0aE1DUExpc3RUb29sc1NwYW4iLCJzcGFuIiwibWNwVG9vbHMiLCJ0b29scyIsIm1jcFRvRnVuY3Rpb25Ub29sIiwiZ2V0QWxsTWNwVG9vbHMiLCJtY3BUb29sIiwiX2NvbnRleHQiLCJzdHJpY3RTY2hlbWEiLCJlbnN1cmVTdHJpY3RKc29uU2NoZW1hIiwiZ2xvYmFsTG9nZ2VyIiwibm9uU3RyaWN0U2NoZW1hIiwib3V0IiwiQnJvd3NlckV2ZW50RW1pdHRlciIsIl9fcHJpdmF0ZUFkZCIsIl90YXJnZXQiLCJsaXN0ZW5lciIsIl9fcHJpdmF0ZUdldCIsImhhbmRsZXIiLCJyYW5kb21VVUlEIiwiUmVhZGFibGUiLCJfZGVzdGluYXRpb24iLCJfdHJhbnNmb3JtIiwiUmVhZGFibGVTdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJBc3luY0xvY2FsU3RvcmFnZSIsIkJyb3dzZXJUaW1lciIsInRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJ0aW1lciIsIl9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRDdXJyZW50VHJhY2UiLCJjdXJyZW50VHJhY2UiLCJfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlIiwidHJhY2UiLCJ3aXRoVHJhY2UiLCJuZXdUcmFjZSIsImdldEdsb2JhbFRyYWNlUHJvdmlkZXIiLCJnZXRPckNyZWF0ZVRyYWNlIiwic2V0Q3VycmVudFNwYW4iLCJyZXNldEN1cnJlbnRTcGFuIiwiYWRkRXJyb3JUb0N1cnJlbnRTcGFuIiwic3BhbkVycm9yIiwiY2xvbmVDdXJyZW50Q29udGV4dCIsIndpdGhOZXdTcGFuQ29udGV4dCIsImN1cnJlbnRDb250ZXh0IiwiY29weU9mQ29udGV4dCIsIkNvbnNvbGVTcGFuRXhwb3J0ZXIiLCJCYXRjaFRyYWNlUHJvY2Vzc29yIiwiZXhwb3J0ZXIiLCJtYXhRdWV1ZVNpemUiLCJtYXhCYXRjaFNpemUiLCJzY2hlZHVsZURlbGF5IiwiZXhwb3J0VHJpZ2dlclJhdGlvIiwiX0JhdGNoVHJhY2VQcm9jZXNzb3JfaW5zdGFuY2VzIiwiX21heFF1ZXVlU2l6ZSIsIl9tYXhCYXRjaFNpemUiLCJfc2NoZWR1bGVEZWxheSIsIl9leHBvcnRUcmlnZ2VyU2l6ZSIsIl9leHBvcnRlciIsIl9idWZmZXIiLCJfdGltZXIiLCJfdGltZW91dCIsIl9leHBvcnRJblByb2dyZXNzIiwiX3RpbWVvdXRBYm9ydENvbnRyb2xsZXIiLCJfX3ByaXZhdGVTZXQiLCJfX3ByaXZhdGVNZXRob2QiLCJzYWZlQWRkSXRlbV9mbiIsIl90cmFjZSIsIl9zcGFuIiwiZXhwb3J0QmF0Y2hlc19mbiIsInJlc29sdmUiLCJydW5FeHBvcnRMb29wX2ZuIiwiZm9yY2UiLCJ0b0V4cG9ydCIsImJhdGNoIiwiTXVsdGlUcmFjaW5nUHJvY2Vzc29yIiwiX3Byb2Nlc3NvcnMiLCJwcm9jZXNzb3IiLCJwcm9jZXNzb3JzIiwiX2RlZmF1bHRFeHBvcnRlciIsIl9kZWZhdWx0UHJvY2Vzc29yIiwiZGVmYXVsdEV4cG9ydGVyIiwiZGVmYXVsdFByb2Nlc3NvciIsInRpbWVJc28iLCJnZW5lcmF0ZVRyYWNlSWQiLCJnZW5lcmF0ZVNwYW5JZCIsInJlbW92ZVByaXZhdGVGaWVsZHMiLCJfU3BhbiIsIl9kYXRhIiwiX3RyYWNlSWQiLCJfc3BhbklkIiwiX3BhcmVudElkIiwiX3Byb2Nlc3NvciIsIl9zdGFydGVkQXQiLCJfZW5kZWRBdCIsIl9lcnJvciIsIl9wcmV2aW91c1NwYW4iLCJTcGFuIiwiTm9vcFNwYW4iLCJfVHJhY2UiLCJfc3RhcnRlZCIsIlRyYWNlIiwiTm9vcFRyYWNlIiwiVHJhY2VQcm92aWRlciIsIl9UcmFjZVByb3ZpZGVyX2luc3RhbmNlcyIsIl9tdWx0aVByb2Nlc3NvciIsIl9kaXNhYmxlZCIsImFkZENsZWFudXBMaXN0ZW5lcnNfZm4iLCJkaXNhYmxlZCIsInRyYWNlT3B0aW9ucyIsInRyYWNlSWQiLCJzcGFuT3B0aW9ucyIsInBhcmVudElkIiwiY2xlYW51cCIsInJlYXNvbiIsInByb21pc2UiLCJHTE9CQUxfVFJBQ0VfUFJPVklERVIiLCJfd2l0aFNwYW5GYWN0b3J5IiwiY3JlYXRlU3BhbiIsImNyZWF0ZUFnZW50U3BhbiIsImNyZWF0ZUZ1bmN0aW9uU3BhbiIsIndpdGhGdW5jdGlvblNwYW4iLCJjcmVhdGVIYW5kb2ZmU3BhbiIsIndpdGhIYW5kb2ZmU3BhbiIsImNyZWF0ZUd1YXJkcmFpbFNwYW4iLCJ3aXRoR3VhcmRyYWlsU3BhbiIsImNyZWF0ZU1DUExpc3RUb29sc1NwYW4iLCJhZGRUcmFjZVByb2Nlc3NvciIsIkV2ZW50RW1pdHRlckRlbGVnYXRlIiwiQWdlbnRIb29rcyIsIlJ1bnRpbWVFdmVudEVtaXR0ZXIiLCJSdW5Ib29rcyIsImRlZmluZUlucHV0R3VhcmRyYWlsIiwiZXhlY3V0ZSIsImRlZmluZU91dHB1dEd1YXJkcmFpbCIsImdldFRyYW5zZmVyTWVzc2FnZSIsImFnZW50IiwiZGVmYXVsdEhhbmRvZmZUb29sTmFtZSIsImRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uIiwiSGFuZG9mZiIsIm9uSW52b2tlSGFuZG9mZiIsImhhbmRvZmYiLCJjb25maWciLCJoYXNPbkhhbmRvZmYiLCJoYXNJbnB1dFR5cGUiLCJpbnB1dEpzb25TdHJpbmciLCJnZXRIYW5kb2ZmIiwiZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIiLCJTaGFyZWRCYXNlIiwiSXRlbUJhc2UiLCJSZWZ1c2FsIiwiT3V0cHV0VGV4dCIsIklucHV0VGV4dCIsIklucHV0SW1hZ2UiLCJ6XG4gICAgICAgIC5zdHJpbmciLCJJbnB1dEZpbGUiLCJBdWRpb0NvbnRlbnQiLCJJbWFnZUNvbnRlbnQiLCJUb29sT3V0cHV0VGV4dCIsIlRvb2xPdXRwdXRJbWFnZSIsIkNvbXB1dGVyVG9vbE91dHB1dCIsImNvbXB1dGVyQWN0aW9ucyIsInouZGlzY3JpbWluYXRlZFVuaW9uIiwiei5udW1iZXIiLCJ6LmVudW0iLCJBc3Npc3RhbnRDb250ZW50IiwiTWVzc2FnZUJhc2UiLCJBc3Npc3RhbnRNZXNzYWdlSXRlbSIsIlVzZXJDb250ZW50IiwiVXNlck1lc3NhZ2VJdGVtIiwiU3lzdGVtTWVzc2FnZUl0ZW0iLCJIb3N0ZWRUb29sQ2FsbEl0ZW0iLCJGdW5jdGlvbkNhbGxJdGVtIiwiRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSIsIkNvbXB1dGVyVXNlQ2FsbEl0ZW0iLCJDb21wdXRlckNhbGxSZXN1bHRJdGVtIiwiVG9vbENhbGxJdGVtIiwiUmVhc29uaW5nSXRlbSIsIlVua25vd25JdGVtIiwiT3V0cHV0TW9kZWxJdGVtIiwiTW9kZWxJdGVtIiwiei51bmlvbiIsIlVzYWdlRGF0YSIsIlN0cmVhbUV2ZW50VGV4dFN0cmVhbSIsIlN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkIiwiU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCIsIlN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0iLCJVc2FnZSIsIm5ld1VzYWdlIiwiUnVuQ29udGV4dCIsIl9hcHByb3ZhbHMiLCJhcHByb3ZhbHMiLCJ0b29sTmFtZSIsImNhbGxJZCIsImFwcHJvdmFsRW50cnkiLCJpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsIiwiaW5kaXZpZHVhbENhbGxSZWplY3Rpb24iLCJhcHByb3ZhbEl0ZW0iLCJhbHdheXNBcHByb3ZlIiwiYWx3YXlzUmVqZWN0IiwiUnVuUmVzdWx0QmFzZSIsImdldFR1cm5JbnB1dCIsInJlc3BvbnNlcyIsIlJ1blJlc3VsdCIsIlN0cmVhbWVkUnVuUmVzdWx0IiwiX3NpZ25hbCIsIl9yZWFkYWJsZUNvbnRyb2xsZXIiLCJfcmVhZGFibGVTdHJlYW0iLCJfY29tcGxldGVkUHJvbWlzZSIsIl9jb21wbGV0ZWRQcm9taXNlUmVzb2x2ZSIsIl9jb21wbGV0ZWRQcm9taXNlUmVqZWN0IiwiX2NhbmNlbGxlZCIsIl9SZWFkYWJsZVN0cmVhbSIsImNvbnRyb2xsZXIiLCJyZWplY3QiLCJzdHJlYW0iLCJzZXJpYWxpemVUb29sIiwic2VyaWFsaXplSGFuZG9mZiIsIlJ1bkl0ZW1CYXNlIiwiUnVuTWVzc2FnZU91dHB1dEl0ZW0iLCJyYXdJdGVtIiwicGFydCIsIlJ1blRvb2xDYWxsSXRlbSIsIlJ1blRvb2xDYWxsT3V0cHV0SXRlbSIsIlJ1blJlYXNvbmluZ0l0ZW0iLCJSdW5IYW5kb2ZmQ2FsbEl0ZW0iLCJSdW5IYW5kb2ZmT3V0cHV0SXRlbSIsInNvdXJjZUFnZW50IiwidGFyZ2V0QWdlbnQiLCJSdW5Ub29sQXBwcm92YWxJdGVtIiwiZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZSIsIm91dHB1dE1lc3NhZ2UiLCJsYXN0SXRlbSIsImdldE91dHB1dFRleHQiLCJSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IiwiUnVuSXRlbVN0cmVhbUV2ZW50IiwiUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQiLCJwcm9jZXNzTW9kZWxSZXNwb25zZSIsIm1vZGVsUmVzcG9uc2UiLCJoYW5kb2ZmcyIsInJ1bkhhbmRvZmZzIiwicnVuRnVuY3Rpb25zIiwicnVuQ29tcHV0ZXJBY3Rpb25zIiwidG9vbHNVc2VkIiwiaGFuZG9mZk1hcCIsImZ1bmN0aW9uTWFwIiwiY29tcHV0ZXJUb29sIiwiZnVuY3Rpb25Ub29sIiwibmV4dFN0ZXBTY2hlbWEiLCJTaW5nbGVTdGVwUmVzdWx0Iiwib3JpZ2luYWxJbnB1dCIsInByZVN0ZXBJdGVtcyIsIm5ld1N0ZXBJdGVtcyIsIm5leHRTdGVwIiwibWF5YmVSZXNldFRvb2xDaG9pY2UiLCJ0b29sVXNlVHJhY2tlciIsIm1vZGVsU2V0dGluZ3MiLCJleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzIiwib3JpZ2luYWxQcmVTdGVwSXRlbXMiLCJuZXdSZXNwb25zZSIsInByb2Nlc3NlZFJlc3BvbnNlIiwicnVubmVyIiwiYXBwcm92YWxSZXF1ZXN0cyIsImZ1bmN0aW9uVG9vbFJ1bnMiLCJydW4iLCJmdW5jdGlvblJlc3VsdHMiLCJleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMiLCJuZXdJdGVtcyIsImNoZWNrVG9vbE91dHB1dCIsImNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMiLCJleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cyIsImNvbXB1dGVyUmVzdWx0cyIsImV4ZWN1dGVDb21wdXRlckFjdGlvbnMiLCJleGVjdXRlSGFuZG9mZkNhbGxzIiwibWVzc2FnZUl0ZW1zIiwicG90ZW50aWFsRmluYWxPdXRwdXQiLCJnZXRUb29sQ2FsbE91dHB1dEl0ZW0iLCJ0b29sQ2FsbCIsInRvb2xSdW5zIiwicnVuU2luZ2xlVG9vbCIsInRvb2xSdW4iLCJwYXJzZWRBcmdzIiwiYXBwcm92YWwiLCJyZXNwb25zZSIsIl9ydW5Db21wdXRlckFjdGlvbkFuZFNjcmVlbnNob3QiLCJjb21wdXRlciIsImFjdGlvbiIsInNjcmVlbnNob3QiLCJwIiwiYWN0aW9ucyIsImN1c3RvbUxvZ2dlciIsIl9sb2dnZXIiLCJpbWFnZVVybCIsImFjdHVhbEhhbmRvZmYiLCJoYW5kb2ZmU3BhbiIsIm5ld0FnZW50IiwicmVxdWVzdGVkQWdlbnRzIiwiaW5wdXRGaWx0ZXIiLCJoYW5kb2ZmSW5wdXREYXRhIiwiTk9UX0ZJTkFMX09VVFBVVCIsInRvb2xSZXN1bHRzIiwiaW50ZXJydXB0aW9ucyIsImZpcnN0VG9vbFJlc3VsdCIsInRvb2xVc2VCZWhhdmlvciIsInN0b3BwaW5nVG9vbCIsImFkZFN0ZXBUb1J1blJlc3VsdCIsIml0ZW1OYW1lIiwiQWdlbnRUb29sVXNlVHJhY2tlciIsIl9hZ2VudFRvVG9vbHMiLCJDVVJSRU5UX1NDSEVNQV9WRVJTSU9OIiwiJHNjaGVtYVZlcnNpb24iLCJzZXJpYWxpemVkQWdlbnRTY2hlbWEiLCJTZXJpYWxpemVkU3BhbiIsInpcbiAgICAgICAgLm9iamVjdCIsInoubGF6eSIsInVzYWdlU2NoZW1hIiwibW9kZWxSZXNwb25zZVNjaGVtYSIsInByb3RvY29sLk91dHB1dE1vZGVsSXRlbSIsIml0ZW1TY2hlbWEiLCJwcm90b2NvbC5Bc3Npc3RhbnRNZXNzYWdlSXRlbSIsInByb3RvY29sLlRvb2xDYWxsSXRlbSIsInByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSIsInByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0iLCJwcm90b2NvbC5SZWFzb25pbmdJdGVtIiwicHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSIsInNlcmlhbGl6ZWRUcmFjZVNjaGVtYSIsInNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZVNjaGVtYSIsImd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hIiwiaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJTZXJpYWxpemVkUnVuU3RhdGUiLCJwcm90b2NvbC5Nb2RlbEl0ZW0iLCJSdW5TdGF0ZSIsInN0YXJ0aW5nQWdlbnQiLCJtYXhUdXJucyIsImluaXRpYWxBZ2VudCIsInBhcnNpbmdFcnJvciIsImpzb25SZXN1bHQiLCJjdXJyZW50U2NoZW1hVmVyc2lvbiIsInN0YXRlSnNvbiIsImFnZW50TWFwIiwiYnVpbGRBZ2VudE1hcCIsImN1cnJlbnRBZ2VudCIsImFnZW50TmFtZSIsImRlc2VyaWFsaXplU3BhbiIsImRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSIsImRlc2VyaWFsaXplSXRlbSIsImRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UiLCJfZSIsInF1ZXVlIiwiQWdlbnQiLCJzZXJpYWxpemVkU3BhbiIsInNwYW5EYXRhIiwicHJldmlvdXNTcGFuIiwic2VyaWFsaXplZE1vZGVsUmVzcG9uc2UiLCJ1c2FnZSIsInNlcmlhbGl6ZWRJdGVtIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlIiwiY29tcHV0ZXJUb29scyIsImZ1bmN0aW9uQ2FsbCIsImNvbXB1dGVyQWN0aW9uIiwiREVGQVVMVF9NQVhfVFVSTlMiLCJnZXRUcmFjaW5nIiwidHJhY2luZ0Rpc2FibGVkIiwidHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSIsImdlbmVyYXRlZEl0ZW1zIiwicmF3SXRlbXMiLCJSdW5uZXIiLCJfUnVubmVyX2luc3RhbmNlcyIsInJ1bkluZGl2aWR1YWxTdHJlYW1fZm4iLCJydW5JbmRpdmlkdWFsTm9uU3RyZWFtX2ZuIiwibW9kZWwiLCJ0dXJuUmVzdWx0IiwiaGFuZG9mZk5hbWVzIiwic2VyaWFsaXplZFRvb2xzIiwic2VyaWFsaXplZEhhbmRvZmZzIiwicnVuSW5wdXRHdWFyZHJhaWxzX2ZuIiwidHVybklucHV0IiwicnVuT3V0cHV0R3VhcmRyYWlsc19mbiIsImd1YXJkcmFpbHMiLCJndWFyZHJhaWxBcmdzIiwiZ3VhcmRyYWlsIiwiYWdlbnRPdXRwdXQiLCJydW5TdHJlYW1Mb29wX2ZuIiwiZmluYWxSZXNwb25zZSIsIm91dHB1dFR5cGVzIiwidG9vbERlc2NyaXB0aW9uIiwiY3VzdG9tT3V0cHV0RXh0cmFjdG9yIiwiUmVhbHRpbWVBZ2VudCIsImdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MiLCJzZXR0aW5ncyIsImRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsIiwicG9saWN5SGludElucHV0IiwiYmFzZUd1YXJkcmFpbCIsInBvbGljeUhpbnQiLCJnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSIsInJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEiLCJyZWFsdGltZVRvb2xDYWxsSXRlbSIsInJlYWx0aW1lUmVzcG9uc2UiLCJ6XG4gICAgICAgIC5lbnVtIiwielxuICAgICAgICAgICAgLnJlY29yZCIsImNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVNjaGVtYSIsImNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hIiwiZXJyb3JFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDb21taXRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEiLCJ6XG4gICAgLm9iamVjdCIsIm91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJyYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSIsInNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEiLCJ0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hIiwidHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEiLCJnZW5lcmljRXZlbnRTY2hlbWEiLCJyZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hIiwicGFyc2VSZWFsdGltZUV2ZW50IiwicmF3IiwiZ2VuZXJpY1BhcnNlZCIsIkRFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMIiwiREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUciLCJPcGVuQUlSZWFsdGltZUJhc2UiLCJfbW9kZWwiLCJfYXBpS2V5IiwiX3RyYWNpbmdDb25maWciLCJhcGlLZXkiLCJpc0dlbmVyaWMiLCJpbnB1dFRva2VucyIsIm91dHB1dFRva2VucyIsInRvdGFsVG9rZW5zIiwiX2YiLCJwcmV2aW91c0l0ZW1JZCIsInJlYWx0aW1lSXRlbSIsIm90aGVyRXZlbnREYXRhIiwidHJhY2luZ0NvbmZpZyIsInNlc3Npb25EYXRhIiwic3RhcnRSZXNwb25zZSIsImF1ZGlvIiwiY29tbWl0IiwicmVtb3ZhbElkcyIsInVwZGF0ZSIsIml0ZW1JZCIsImFkZGl0aW9uc0FuZFVwZGF0ZXMiLCJhZGRpdGlvbiIsIml0ZW1FbnRyeSIsIk9wZW5BSVJlYWx0aW1lV2ViUlRDIiwiX3VybCIsIl9zdGF0ZSIsIl91c2VJbnNlY3VyZUFwaUtleSIsIl9vbmdvaW5nUmVzcG9uc2UiLCJfbXV0ZWQiLCJiYXNlVXJsIiwiaXNDbGllbnRLZXkiLCJ1c2VyU2Vzc2lvbkNvbmZpZyIsImNvbm5lY3Rpb25VcmwiLCJwZWVyQ29ubmVjdGlvbiIsImRhdGFDaGFubmVsIiwiYXVkaW9FbGVtZW50Iiwib2ZmZXIiLCJzZXNzaW9uQ29uZmlnIiwiYW5zd2VyIiwibXV0ZWQiLCJzZW5kZXIiLCJXZWJTb2NrZXQiLCJPcGVuQUlSZWFsdGltZVdlYlNvY2tldCIsIl9PcGVuQUlSZWFsdGltZVdlYlNvY2tldF9pbnN0YW5jZXMiLCJfY3VycmVudEl0ZW1JZCIsIl9jdXJyZW50QXVkaW9Db250ZW50SW5kZXgiLCJhdWRpb0V2ZW50Iiwic2V0dXBXZWJTb2NrZXRfZm4iLCJlbGFwc2VkVGltZSIsIndlYnNvY2tldEFyZ3VtZW50cyIsIndzIiwiYnVmZiIsIlJlYWx0aW1lU2Vzc2lvbiIsIl9SZWFsdGltZVNlc3Npb25faW5zdGFuY2VzIiwiX3RyYW5zcG9ydCIsIl9jdXJyZW50QWdlbnQiLCJfY3VycmVudFRvb2xzIiwiX291dHB1dEd1YXJkcmFpbHMiLCJfb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MiLCJfdHJhbnNjcmliZWRUZXh0RGVsdGFzIiwiX2hpc3RvcnkiLCJfc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsIl9pbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsIiwic2V0Q3VycmVudEFnZW50X2ZuIiwiZ2V0U2Vzc2lvbkNvbmZpZ19mbiIsInNldEV2ZW50TGlzdGVuZXJzX2ZuIiwidXBkYXRlZEhpc3RvcnkiLCJoYW5kbGVGdW5jdGlvblRvb2xDYWxsX2ZuIiwiaGFuZG9mZlRvb2xzIiwiYWRkaXRpb25hbENvbmZpZyIsImluc3RydWN0aW9ucyIsImhhbmRsZUhhbmRvZmZfZm4iLCJoYW5kbGVGdW5jdGlvbkNhbGxfZm4iLCJmdW5jdGlvblRvb2xNYXAiLCJwb3NzaWJsZUhhbmRvZmYiLCJyZXNwb25zZUlkIiwiZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCIsImZlZWRiYWNrVGV4dCIsInRleHRPdXRwdXQiLCJsYXN0UnVuSW5kZXgiLCJsYXN0SXRlbUlkIiwiZGVsdGEiLCJuZXdUZXh0IiwibmV3UnVuSW5kZXgiLCJpc05ldyIsImFkZGVkSXRlbSIsInV0aWxzIiwidXRpbEltcG9ydC5iYXNlNjRUb0FycmF5QnVmZmVyIiwidXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0IiwidXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UiXSwibWFwcGluZ3MiOiJzZ0NBQ08sTUFBTUEsRUFBVyxDQUVwQixRQUFXLE9BS2YsRUNGTyxTQUFTQyxFQUFvQkMsRUFBUSxDQUN4QyxNQUFNQyxFQUFlLEtBQUtELENBQU0sRUFDMUJFLEVBQU1ELEVBQWEsT0FDbkJFLEVBQVEsSUFBSSxXQUFXRCxDQUFHLEVBQ2hDLFFBQVNFLEVBQUksRUFBR0EsRUFBSUYsRUFBS0UsSUFDckJELEVBQU1DLENBQUMsRUFBSUgsRUFBYSxXQUFXRyxDQUFDLEVBRXhDLE9BQU9ELEVBQU0sTUFDakIsQ0FNTyxTQUFTRSxHQUFvQkMsRUFBYSxDQUM3QyxNQUFNTCxFQUFlLE9BQU8sYUFBYSxHQUFHLElBQUksV0FBV0ssQ0FBVyxDQUFDLEVBQ3ZFLE9BQU8sS0FBS0wsQ0FBWSxDQUM1QixDQU1PLFNBQVNNLEdBQWtDQyxFQUFNLENBWXBELEdBWEksT0FBT0EsRUFBUyxLQUNoQkEsSUFBUyxNQUNULE9BQU9BLEdBQVMsVUFDaEIsRUFBRSxTQUFVQSxJQUNaLE9BQU9BLEVBQUssTUFBUyxVQUNyQixDQUFDQSxFQUFLLE1BR05BLEVBQUssT0FBUyxXQUdkLEVBQUUsWUFBYUEsSUFDZixDQUFDLE1BQU0sUUFBUUEsRUFBSyxPQUFPLEdBQzNCQSxFQUFLLFFBQVEsT0FBUyxFQUN0QixPQUVKLE1BQU1DLEVBQWtC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QVMsTUFBTSxJQUFJOFYsQ0FBSyxDQUN6QyxDQUFTLEVBQ0RwVixFQUFBLEtBQUtnZixHQUFXLEdBQUcsb0JBQXFCLElBQU0sQ0FDMUMsS0FBSyxLQUFLLG9CQUFxQmhmLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLaWYsRUFBYSxDQUM1RSxDQUFTLEVBQ0RqZixFQUFBLEtBQUtnZixHQUFXLEdBQUcsUUFBVXRoQyxHQUFVLENBQ25DLEtBQUssS0FBSyxRQUFTQSxDQUFLLENBQ3BDLENBQVMsQ0FDVCxFQzNXWSxNQUFDc2pDLEdBQVEsQ0FDakIsb0JBQXFCQyxFQUNyQixvQkFBcUJDLEdBQ3JCLGtDQUFtQ0MsRUFDdkMiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCwzMSwzMiwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MSw0Miw0Myw0NCw0NSw0OSw1MCw1MSw1Niw1Nyw1OCw1OSw2MCw2MSw2Ml19
